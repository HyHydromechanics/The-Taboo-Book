"use strict";(self.webpackChunkfe_banciyuan_web=self.webpackChunkfe_banciyuan_web||[]).push([["src_common_components_pc_HomeIcon_index_js-src_common_components_pc_PublishGroup_index_js-src-1579ea"],{"./src/common/components/pc/HomeIcon/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("./node_modules/react/index.js")),r=i(n("./node_modules/classnames/index.js")),c=n("./node_modules/date-fns/esm/index.js");function i(e){return e&&e.__esModule?e:{default:e}}n("./src/common/components/pc/HomeIcon/style.css");var a=function(e){var t=e.bigMargin,n=e.style;var i=(0,c.isToday)(new Date(2021,3,1))?"logo41":"logo";return o.default.createElement("span",{className:(0,r.default)("home-icon","".concat(i),{bigMargin:"true"===t}),style:n,onClick:function(){window.location.href="/"}})};t.default=a},"./src/common/components/pc/PublishGroup/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("./node_modules/react/index.js")),c=l(n("./src/common/components/pc/Login/Dialog.js")),i=l(n("./src/common/asset/images/post/video-post.png")),a=l(n("./src/common/asset/images/post/note-post.png")),u=l(n("./src/common/asset/images/post/group-post.png")),s=l(n("./src/common/asset/images/post/article-post.png"));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var c=v(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/common/components/pc/PublishGroup/style.css");var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,r.default.Component);var t=b(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={publishShow:!1},o.onPublishClick=o.onPublishClick.bind(y(o)),o.publishClick=o.publishClick.bind(y(o)),o}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(n,[{key:"onPublishClick",value:function(e){this.setState({publishShow:e})}},{key:"publishClick",value:function(e,t){var n=this.props,o=n.current_page,r=n.circleInfo,i=n.user,a=void 0===i?{uid:"0"}:i,u=n.rankType,s={current_page:o||"",hashtag_id:"",hashtag_name:"",hashtag_type:"",section:"bar",publish_type:e};if("video"===e&&window.collectEvent("enter_publish",{item_type:"video",publish_enter_from:"publish_button",hashtag_name:""}),"hashtag"===o&&r){var l="";1===u?l="work":2===u?l="tag":3===u&&(l="team");var f=r.relative_wid;s=p(p({},s),{},{hashtag_id:r.circle_id,hashtag_name:r.circle_name,wid:f>0?f:-1,hashtag_type:l})}return a.uid>0?(window.collectEvent("publish_click",s),window.open(t),""):(c.default.initLoginDialog(),"")}},{key:"render",value:function(){var e=this,t=this.props,n=t.current_page,o=t.circleInfo,c="";if("hashtag"===n&&o){var l=o.circle_name;1===o.circle_type?c="?work=".concat(l):2!==o.circle_type&&3!==o.circle_type||(c="?extraTags=".concat(l))}return r.default.createElement("div",{className:"posr newHome-publish-btn",onMouseEnter:function(){return e.onPublishClick(!0)},onMouseLeave:function(){return e.onPublishClick(!1)}},r.default.createElement("p",{className:"new-site-publish-empty"}),r.default.createElement("button",{size:"large",className:"new-site-publish"},r.default.createElement("i",{className:"new-i-publish"}),r.default.createElement("span",{className:"publish-txt"},"发布")),r.default.createElement("div",{className:"publish-top publish-loaf round-shadow posa ".concat(this.state.publishShow?"":"hide")},r.default.createElement("a",{className:"publish-item",onClick:function(){e.publishClick("note","/item/newnote".concat(c))}},r.default.createElement("img",{src:a.default}),r.default.createElement("div",{className:"text"},r.default.createElement("p",{className:"type"},"图片"),r.default.createElement("p",{className:"short"},"绘画、COS、手办、汉服、表情包…"))),r.default.createElement("a",{className:"publish-item",onClick:function(){e.publishClick("article","/item/newarticle".concat(c))}},r.default.createElement("img",{src:s.default}),r.default.createElement("div",{className:"text"},r.default.createElement("p",{className:"type"},"文字"),r.default.createElement("p",{className:"short"},"小说、漫评、段子、文章、碎碎念…"))),r.default.createElement("a",{className:"publish-item",onClick:function(){e.publishClick("gask","/group/newgroup".concat(c))}},r.default.createElement("img",{src:u.default}),r.default.createElement("div",{className:"text"},r.default.createElement("p",{className:"type"},"提问"),r.default.createElement("p",{className:"short"},"如何评价？如何反驳？为什么讨厌？"))),r.default.createElement("a",{className:"publish-item",onClick:function(){e.publishClick("video","/item/newvideo".concat(c))}},r.default.createElement("img",{src:i.default}),r.default.createElement("div",{className:"text"},r.default.createElement("p",{className:"type"},"视频"),r.default.createElement("p",{className:"short"},"舞蹈、剪辑、游戏、MAD、生活...")))))}}]),n}();t.default=g},"./src/common/components/pc/SearchInput/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,c,i=m(n("./node_modules/react/index.js")),a=m(n("./node_modules/classnames/index.js")),u=n("./node_modules/react-redux/es/index.js"),s=m(n("./node_modules/autobind-decorator/lib/esm/index.js")),l=m(n("./src/common/services/Common.js")),f=m(n("./src/common/utils/variableCss.js")),p=m(n("./src/common/components/pc/Login/Dialog.js"));function m(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var c=y(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/common/components/pc/SearchInput/style.css");var v=["用户","问答"],g=(0,u.connect)(function(e){return{userInfo:e.user}})((function(e,t,n,o,r){var c={};Object.keys(o).forEach(function(e){c[e]=o[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},c),r&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(r):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(e,t,c),c=null)}((c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,i.default.Component);var t=b(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={inputFocus:!1,showTip:!1,suggestion:[],value:""},o}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(n,[{key:"inputChange",value:function(e){var t=this,n=e.target.value;l.default.getSearchSug(n).then(function(e){t.setState({value:n,showTip:""!==n,suggestion:e.suggestions.splice(0,3)})})}},{key:"getMatchIndexes",value:function(e,t){for(var n=t.length,o=[],r=-1,c=0;(r=e.indexOf(t,c))>-1;)o.push(r),c=r+n;return o}},{key:"getStrongedSuggestion",value:function(e){for(var t=this.state.value,n=e.toLowerCase(),o=this.getMatchIndexes(n,t.toLowerCase()),r=e.split(""),c=0;c<r.length;c++)if(o.indexOf(c)>=0)for(var a=c;a<c+t.length;a++)r[a]=i.default.createElement("span",null,e[a]);return r}},{key:"tipClick",value:function(e){this.props.userInfo.uid>0?location.href="/search/home?k=".concat(e):p.default.initLoginDialog()}},{key:"defaultTipClick",value:function(e){this.props.userInfo.uid>0?"用户"===e?location.href="/search/user?k=".concat(this.state.value):"问答"===e&&(location.href="/search/group?k=".concat(this.state.value)):p.default.initLoginDialog()}},{key:"submit",value:function(e){e.preventDefault(),this.tipClick(this.state.value)}},{key:"inputBlurHandler",value:function(e){this.tipEle.contains(e.target)||this.input.contains(e.target)||this.setState({inputFocus:!1,showTip:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.inputBlurHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.inputBlurHandler)}},{key:"render",value:function(){var e=this,t=this.state,n=t.suggestion,o=t.inputFocus,r=t.showTip,c=t.value,u=this.props.style;return i.default.createElement("form",{action:"/search/home",method:"get"},i.default.createElement("div",{id:"js-navSearch",className:"nav-search-input ".concat((0,a.default)({active:o})),style:u},i.default.createElement("input",{className:"nav-search-text",ref:function(t){return e.input=t},type:"text",name:"k",maxLength:"40",placeholder:"搜索COS、绘画、文...",autoComplete:"off",onFocus:function(){e.setState({inputFocus:!0})},onChange:this.inputChange.bind(this)}),i.default.createElement("input",{type:"submit",value:"",className:"nav-search-btn"}),i.default.createElement("div",{ref:function(t){return e.tipEle=t},className:"nav-tip-wrapper ".concat((0,a.default)({hide:!r}))},n.map(function(t,o){return i.default.createElement("div",{className:"nav-tip nav-tip-response",key:t,onClick:e.tipClick.bind(e,t),style:n.length!==o+1?null:{borderBottom:"solid 1px ".concat(f.default.$borderColor)}},e.getStrongedSuggestion(t))}),v.map(function(t){return i.default.createElement("div",{className:"nav-tip",key:t,onClick:e.defaultTipClick.bind(e,t)},"搜索",t," “",i.default.createElement("span",null,c),"”")}))))}}]),n}()).prototype,"inputBlurHandler",[s.default],Object.getOwnPropertyDescriptor(c.prototype,"inputBlurHandler"),c.prototype),r=c))||r;t.default=g},"./src/common/components/pc/HomeIcon/style.css":function(e,t,n){n.r(t)},"./src/common/components/pc/PublishGroup/style.css":function(e,t,n){n.r(t)},"./src/common/components/pc/SearchInput/style.css":function(e,t,n){n.r(t)}}]);
//# sourceMappingURL=src_common_components_pc_HomeIcon_index_js-src_common_components_pc_PublishGroup_index_js-src-1579ea.344a2e3dd278bd1476f1.js.map
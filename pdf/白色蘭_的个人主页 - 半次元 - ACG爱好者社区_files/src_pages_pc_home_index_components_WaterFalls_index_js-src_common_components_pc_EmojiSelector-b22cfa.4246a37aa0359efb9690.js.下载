"use strict";(self.webpackChunkfe_banciyuan_web=self.webpackChunkfe_banciyuan_web||[]).push([["src_pages_pc_home_index_components_WaterFalls_index_js-src_common_components_pc_EmojiSelector-b22cfa"],{"./src/common/components/pc/Loading/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n("./node_modules/react/index.js"));var r=function(){return o.default.createElement("span",{style:{display:"block",width:"24px",height:"24px",background:'transparent url("data:image/gif;base64,R0lGODlhIAAgALMAAP///7Ozs/v7+9bW1uHh4fLy8rq6uoGBgTQ0NAEBARsbG8TExJeXl/39/VRUVAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBQAAACwAAAAAIAAgAAAE5xDISSlLrOrNp0pKNRCdFhxVolJLEJQUoSgOpSYT4RowNSsvyW1icA16k8MMMRkCBjskBTFDAZyuAEkqCfxIQ2hgQRFvAQEEIjNxVDW6XNE4YagRjuBCwe60smQUDnd4Rz1ZAQZnFAGDd0hihh12CEE9kjAEVlycXIg7BAsMB6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YEvpJivxNaGmLHT0VnOgGYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHQjYKhKP1oZmADdEAAAh+QQFBQAAACwAAAAAGAAXAAAEchDISasKNeuJFKoHs4mUYlJIkmjIV54Soypsa0wmLSnqoTEtBw52mG0AjhYpBxioEqRNy8V0qFzNw+GGwlJki4lBqx1IBgjMkRIghwjrzcDti2/Gh7D9qN774wQGAYOEfwCChIV/gYmDho+QkZKTR3p7EQAh+QQFBQAAACwBAAAAHQAOAAAEchDISWdANesNHHJZwE2DUSEo5SjKKB2HOKGYFLD1CB/DnEoIlkti2PlyuKGEATMBaAACSyGbEDYD4zN1YIEmh0SCQQgYehNmTNNaKsQJXmBuuEYPi9ECAU/UFnNzeUp9VBQEBoFOLmFxWHNoQw6RWEocEQAh+QQFBQAAACwHAAAAGQARAAAEaRDICdZZNOvNDsvfBhBDdpwZgohBgE3nQaki0AYEjEqOGmqDlkEnAzBUjhrA0CoBYhLVSkm4SaAAWkahCFAWTU0A4RxzFWJnzXFWJJWb9pTihRu5dvghl+/7NQmBggo/fYKHCX8AiAmEEQAh+QQFBQAAACwOAAAAEgAYAAAEZXCwAaq9ODAMDOUAI17McYDhWA3mCYpb1RooXBktmsbt944BU6zCQCBQiwPB4jAihiCK86irTB20qvWp7Xq/FYV4TNWNz4oqWoEIgL0HX/eQSLi69boCikTkE2VVDAp5d1p0CW4RACH5BAUFAAAALA4AAAASAB4AAASAkBgCqr3YBIMXvkEIMsxXhcFFpiZqBaTXisBClibgAnd+ijYGq2I4HAamwXBgNHJ8BEbzgPNNjz7LwpnFDLvgLGJMdnw/5DRCrHaE3xbKm6FQwOt1xDnpwCvcJgcJMgEIeCYOCQlrF4YmBIoJVV2CCXZvCooHbwGRcAiKcmFUJhEAIfkEBQUAAAAsDwABABEAHwAABHsQyAkGoRivELInnOFlBjeM1BCiFBdcbMUtKQdTN0CUJru5NJQrYMh5VIFTTKJcOj2HqJQRhEqvqGuU+uw6AwgEwxkOO55lxIihoDjKY8pBoThPxmpAYi+hKzoeewkTdHkZghMIdCOIhIuHfBMOjxiNLR4KCW1ODAlxSxEAIfkEBQUAAAAsCAAOABgAEgAABGwQyEkrCDgbYvvMoOF5ILaNaIoGKroch9hacD3MFMHUBzMHiBtgwJMBFolDB4GoGGBCACKRcAAUWAmzOWJQExysQsJgWj0KqvKalTiYPhp1LBFTtp10Is6mT5gdVFx1bRN8FTsVCAqDOB9+KhEAIfkEBQUAAAAsAgASAB0ADgAABHgQyEmrBePS4bQdQZBdR5IcHmWEgUFQgWKaKbWwwSIhc4LonsXhBSCsQoOSScGQDJiWwOHQnAxWBIYJNXEoFCiEWDI9jCzESey7GwMM5doEwW4jJoypQQ743u1WcTV0CgFzbhJ5XClfHYd/EwZnHoYVDgiOfHKQNREAIfkEBQUAAAAsAAAPABkAEQAABGeQqUQruDjrW3vaYCZ5X2ie6EkcKaooTAsi7ytnTq046BBsNcTvItz4AotMwKZBIC6H6CVAJaCcT0CUBTgaTg5nTCu9GKiDEMPJg5YBBOpwlnVzLwtqyKnZagZWahoMB2M3GgsHSRsRACH5BAUFAAAALAEACAARABgAAARcMKR0gL34npkUyyCAcAmyhBijkGi2UW02VHFt33iu7yiDIDaD4/erEYGDlu/nuBAOJ9Dvc2EcDgFAYIuaXS3bbOh6MIC5IAP5Eh5fk2exC4tpgwZyiyFgvhEMBBEAIfkEBQUAAAAsAAACAA4AHQAABHMQyAnYoViSlFDGXBJ808Ep5KRwV8qEg+pRCOeoioKMwJK0Ekcu54h9AoghKgXIMZgAApQZcCCu2Ax2O6NUud2pmJcyHA4L0uDM/ljYDCnGfGakJQE5YH0wUBYBAUYfBIFkHwaBgxkDgX5lgXpHAXcpBIsRADs=") no-repeat',backgroundSize:"cover",margin:"10px auto 0"}})};t.default=r},"./src/common/components/pc/TextCollapse/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n("./node_modules/react/index.js")),a=c(n("./node_modules/classnames/index.js"));n("./src/common/components/pc/TextCollapse/style.css");var i=c(n("./node_modules/prop-types/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r.default.Component);var t=u(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={isCollapse:!1},o._onExpand=o._onExpand.bind(f(o)),o}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.article&&(e.article.clientHeight>e.props.maxHeight&&e.setState({isCollapse:!0}))},20)}},{key:"_onExpand",value:function(e){var t=this.props,n=t.onExpand,o=t.onlyShowTextCollapse;e.stopPropagation(),n&&n(),"true"!==o&&this.setState({isCollapse:!1})}},{key:"render",value:function(){var e=this,t=this.state.isCollapse,n=this.props,o=n.expandText,i=n.maxHeight,c=n.style,l=n.onlyChangeHeiht,s=n.expandStyle,u=(0,a.default)("text-collapse",{"is-collapse":t});return r.default.createElement("div",{className:u,style:c},r.default.createElement("article",{ref:function(t){e.article=t},style:{maxHeight:"true"===l?i:t?i:null}},this.props.children,r.default.createElement("a",{style:s,className:"expand",onClick:this._onExpand},o)))}}]),n}();t.default=m,m.propTypes={maxHeight:i.default.number,expandText:i.default.string,onlyChangeHeiht:i.default.string,onlyShowTextCollapse:i.default.string,onExpand:i.default.func,style:i.default.object,expandStyle:i.default.object},m.defaultProps={maxHeight:54,expandText:"...展开更多",onlyChangeHeiht:"",onExpand:function(){return""},style:{},expandStyle:{}}},"./src/pages/pc/home/index/components/Comment/CommentList.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=w(n("./node_modules/querystring/index.js")),i=w(n("./node_modules/react/index.js")),c=n("./node_modules/react-redux/es/index.js"),l=n("./src/common/utils/tea.js"),s=w(n("./node_modules/classnames/index.js")),u=n("./node_modules/byted-dimension-ui/lib/index.js"),f=w(n("./src/common/services/CommentSvc.js")),d=w(n("./src/common/components/pc/EmojiSelector/index.js")),m=w(n("./src/common/components/pc/TextCollapse/index.js")),p=n("./src/common/utils/index.js"),h=w(n("./src/common/components/pc/Login/Dialog.js")),y=n("./src/pages/pc/home/index/components/Tea/index.js"),g=w(n("./src/common/asset/images/default_avatar.png")),_=w(n("./src/common/utils/variableCss.js")),v=n("./src/pages/pc/home/index/components/LineItem/svg.js"),b=w(n("./src/pages/pc/home/index/components/Comment/Publishitem.js"));function w(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var a=T(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(this,n)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/Comment/CommentList.css");var D=(0,c.connect)(function(e){return{userInfo:e.user,uid:e.user.uid,page:e.page}})(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(n,i.default.Component);var t=S(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={subId:null,formatCommentText:"",initLastCommentsLen:o.props.comment.comments_count-2,isTextareaFocus:!1,currentInput:"",showTextInput:!1,isZan:!1,commentActive:!1};return["zanReplies","getDeletsSubReplyId","handleDeleteComment","changeDiscussBox","changeShowTextInput","showPublishdiscuss","handleShowinputReply","replyContent","handleReply","deleteReply","handleLike","handleZan","showAllReply","publishTextarea","blurPublishTextarea","setTextState","handleKeyEvent","clickFace","handleSvg"].forEach(function(e){o[e]=o[e].bind(I(o))}),o.lock=!0,o.zanRepliesLock=!0,o}return function(e,t,n){t&&C(e.prototype,t),n&&C(e,n)}(n,[{key:"zanReplies",value:function(e,t,n){var o=this,r=this.props,a=r.comment,i=r.zanReply,c=e?f.default.undoLikeSub:f.default.doLikeSub;this.zanRepliesLock&&(this.zanRepliesLock=!1,c(t,a.id).then(function(r){0===r.code?(n&&n(o),i(e,t)):(o.zanRepliesLock=!0,u.message.error("半次元不小心滑了一跤~"))}).catch(function(){o.zanRepliesLock=!0,u.message.error("半次元不小心滑了一跤~")}))}},{key:"getDeletsSubReplyId",value:function(e){this.setState({subId:e})}},{key:"handleDeleteComment",value:function(e){var t=this.props,n=t.handleShowConfirm,o=t.getDeleteReplyId,r=t.comment_id,a=t.getHandleItemId,i=t.item_id;n(e.clientX,e.clientY),o(r),a(i,"删除评论")}},{key:"changeDiscussBox",value:function(){var e=this.props;(0,e.changeDiscuss_box)(e.comment_id)}},{key:"changeShowTextInput",value:function(){this.state.showTextInput||this.setState({showTextInput:!0})}},{key:"showPublishdiscuss",value:function(){var e=this.props;(0,e.getHandleComentId)(e.comment_id),this.changeShowTextInput(),this.publishTextarea()}},{key:"handleShowinputReply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.state.currentInput;e&&(t?this.setState({currentInput:"".concat(t,"\n回复@").concat(e,"：")}):this.setState({currentInput:"回复@".concat(e,"：")}))}},{key:"replyContent",value:function(){var e=this;if("0"!==this.props.uid){var t=this.state.currentInput,n=this.props,o=n.comment_id,r=n.replyContent,a=n.changeAddedCommentsNum;r(t,o).then(function(){e.setState({showTextInput:!1})}),a(o,"add"),this.setState({currentInput:""})}else h.default.initLoginDialog()}},{key:"handleReply",value:function(){this.replyContent()}},{key:"deleteReply",value:function(){var e=this.props,t=e.comment_id,n=e.deleteReply,o=e.changeAddedCommentsNum;n(t,this.state.subId),o(t,"drop")}},{key:"handleLike",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=this.props,r=o.item_detail,a=o.comment_id,i=o.sortType,c={current_page:(0,y.getCurrentPage)(t),source_page:(0,l.getSourcePage)(),item_type:r.type,item_id:r.item_id,author_id:r.uid,like_type:"comment",comment_id:a,is_hot_comment:r.replies&&r.replies.length>0?"1":"0",hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(r.type){case"ganswer":c=k(k({},c),{},{group_ask_id:r.group.gid});break;case"article":r.post_in_set&&(c=k(k({},c),{},{set_id:r.set_data.item_set_id}))}"circle"===t&&(c=(0,y.circleEvent)(c,n,i,"branch_page")),window.collectEvent("like",c)}},{key:"handleZan",value:function(){var e=this,t=this.props,n=t.item_id,o=t.comment,r=t.zanComment,a=o.user_liked,i=a?f.default.undoLike:f.default.doLike;"0"!==this.props.uid?this.lock&&(this.lock=!1,i(n,o.id).then(function(t){0===t.code?(r(o.id,a),a?(e.setState({isZan:!1},function(){e.lock=!0}),u.message.success("取消点赞成功")):(u.message.success("点赞成功"),e.handleLike(),e.setState({isZan:!0},function(){setTimeout(function(){e.setState({isZan:!1},function(){e.lock=!0})},480)}))):(e.lock=!0,u.message.error("半次元不小心滑了一跤~"))}).catch(function(){e.lock=!0,u.message.error("半次元不小心滑了一跤~")})):h.default.initLoginDialog()}},{key:"showAllReply",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=e.collectionInfo,r=this.props,i=r.item_detail,c=r.sortType,l={current_page:"",source_page:(0,y.getCurrentPage)(t),item_id:i.item_id,item_type:i.type,author_id:i.uid,hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(i.type){case"ganswer":l=k(k({},l),{},{group_ask_id:i.group.gid});break;case"article":i.post_in_set&&(l=k(k({},l),{},{set_id:i.set_data.item_set_id}))}if(this.props.user.uid>0?l.current_page="detail":l.current_page="login","circle"===t&&(l=(0,y.circleEvent)(l,n,c,"branch_page")),"profile"===t){var s=a.default.parse(window.location.search.substr("1")).source_profile_id;s&&(l.source_profile_id=s)}"collection"===t&&(l.set_id=o.collection.collection_id,l.set_name=o.collection.title),window.collectEvent("go_comment",l),window.collectEvent("go_detail",k(k({},l),{},{section:"middle",action_source:"click_comment_more"}))}},{key:"publishTextarea",value:function(){var e=this;this.setState({isTextareaFocus:!0},function(){e.text.focus()})}},{key:"blurPublishTextarea",value:function(){this.setState({isTextareaFocus:!1})}},{key:"setTextState",value:function(e,t,n){this.setState({currentInput:e&&e.target.value||t},function(){n&&n()})}},{key:"handleKeyEvent",value:function(e){var t=this.state.currentInput,n=t&&t.trim();13===e.keyCode&&n?this.handleReply():13!==e.keyCode||n||u.message.warning("评论不能为空！")}},{key:"clickFace",value:function(e){(0,p.insertText)(this.text,e),this.setState({currentInput:this.text.value})}},{key:"handleSvg",value:function(e){this.setState({commentActive:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.comment.id===e.handleItemId&&"删除回复"===this.props.deleteComment&&this.deleteReply()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.comment,n="";n=t.multi&&t.multi.length>0?(0,p.replyShortImg)((0,p.linkUrl)(t.content)):(0,p.linkUrl)(t.content),p.emoji.convertEmoji(n,24).then(function(t){e.setState({formatCommentText:t})}).catch(function(){u.message.error("半次元不小心滑了一跤~")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.comment,o=t.comments,r=t.handleShowConfirm,a=t.getDeleteReplyId,c=t.onReplyZan,l=t.item_detail,u=t.userInfo,f=t.showOneFall,h=t.page,w=n.discuss_box,x=this.state,k=x.formatCommentText,O=x.initLastCommentsLen,C=x.isTextareaFocus,j=x.currentInput,S=x.showTextInput,I=x.commentActive,T=parseInt(this.props.uid,10),D=parseInt(n.uid,10),A=parseInt(l.uid,10),P=n.comments_count-O,N=j&&j.trim(),L=i.default.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),R=(0,y.getCurrentPage)(h.type);return i.default.createElement("ul",{className:"comment_list"},i.default.createElement("li",{className:"comment_item"},i.default.createElement("a",{className:"avatar_user",target:"_blank",rel:"noopener noreferrer",href:"/u/".concat(n.uid,"?_source_page=").concat(R)},i.default.createElement("img",{src:n.avatar}),1===n.value_user&&i.default.createElement("i",{className:"i-uservalue-c"})),i.default.createElement("div",{className:"discussBox"},i.default.createElement(m.default,{maxHeight:75,expandStyle:{right:"25px",fontSize:"12px",bottom:"-2px"}},i.default.createElement("div",{className:"discuss_title"},i.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/u/".concat(n.uid,"?_source_page=").concat(R)},n.uname,"："),L)),i.default.createElement("div",{className:(0,s.default)("discuss_time",{paddingBottom:w&&o.length>0})},i.default.createElement("div",{className:"zan"},i.default.createElement("span",{className:"comment_zan-btn",onClick:this.handleZan},i.default.createElement("span",null,n.user_liked?"取消赞":"".concat(n.like_count||"","赞"))),i.default.createElement("span",{className:"comment_reply_dot"},"·"),i.default.createElement("span",{className:(0,s.default)("comment_reply-btn",{active:"true"===f}),onClick:this.showPublishdiscuss,onMouseEnter:function(){return e.handleSvg(!0)},onMouseLeave:function(){return e.handleSvg(!1)}},"true"===f&&i.default.createElement(v.Comment,{style:{marginRight:"2px",position:"relative",top:"5px",transform:"scale(0.8)"},color:I?_.default.$K70:_.default.$K60}),i.default.createElement("span",null,"回复")),i.default.createElement("span",{className:"comment_reply_dot"},"·"),T===D?i.default.createElement(i.default.Fragment,null,i.default.createElement("a",{href:"javascript:;",className:(0,s.default)("comment_delete-btn",{active:"true"===f}),onClick:this.handleDeleteComment},"删除"),i.default.createElement("span",{className:"comment_reply_dot"},"·")):T===A?i.default.createElement(i.default.Fragment,null,i.default.createElement("a",{href:"javascript:;",className:(0,s.default)("comment_delete-btn",{active:"true"===f}),onClick:this.handleDeleteComment},"删除"),i.default.createElement("span",{className:"comment_reply_dot"},"·")):null,i.default.createElement("span",{className:"time"},(0,p.formatTime)(n.ctime))),o.length>0&&i.default.createElement("div",{className:(0,s.default)("comment_action-btn",{active:"true"===f}),onClick:this.changeDiscussBox},w?"收起":"展开")),o.length>0&&i.default.createElement("div",{className:(0,s.default)("discuss_box",{hide:!w})},i.default.createElement("div",{className:"discuss_publish"},i.default.createElement("div",{className:"discuss_publish_line"}),i.default.createElement("ul",{className:"publish_list"},o.length>0?o.slice(0,P).map(function(t){return i.default.createElement(b.default,E({publishTextarea:e.publishTextarea,handleShowinputReply:function(t){return e.handleShowinputReply(t)},getDeletsSubReplyId:function(t){e.getDeletsSubReplyId(t)},zanReplies:function(t,n,o){e.zanReplies(t,n,o)},changeShowTextInput:e.changeShowTextInput,comment_id:n.id,comment_uid:n.uid,key:t.id,reply_data:t,handleShowConfirm:r,getDeleteReplyId:a,onReplyZan:c},e.props))}):null),i.default.createElement("div",{className:"commentReplay clearfix"},O>0&&i.default.createElement("a",{className:(0,s.default)("checkMoreReply",{active:"true"===f}),rel:"noopener noreferrer",target:"_blank",href:"/item/detail/".concat(l.item_id,"?_source_page=").concat(R,"#ikari"),onClick:e.showAllReply},"查看全部回复",i.default.createElement("i",{className:(0,s.default)("look-more-btn",{active:"true"===f})}))))))),S&&i.default.createElement("li",{className:"comment_item-replyarea"},i.default.createElement("div",{className:(0,s.default)("publish_form",{active:"true"===f})},i.default.createElement("a",{className:"publish_avatar",href:u.uid>0?"/u/".concat(u.uid,"?_source_page=").concat(R):"/",target:"_blank",rel:"noopener noreferrer"},i.default.createElement("img",{src:u.avatar?u.avatar:g.default})),i.default.createElement("div",{className:"newTimeInputWrap"},i.default.createElement("input",{value:j,onKeyDown:this.handleKeyEvent,onChange:this.setTextState.bind(this),autoSize:!0,className:(0,s.default)("publish-content-textarea",{focused:C||N}),ref:function(t){return e.text=t},placeholder:"回复".concat(n.uname,"..."),onBlur:this.blurPublishTextarea}),i.default.createElement("div",{className:(0,s.default)("face-box",{active:N})},i.default.createElement(d.default,{showTxt:"false",clickFace:this.clickFace.bind(this),style:{width:"335px",height:"316px"}})),N&&i.default.createElement("button",{className:"publish-content-btn",onClick:this.handleReply},"回复")))),o.length>0&&w&&i.default.createElement("li",{className:(0,s.default)("comment_item-line",{active:"true"===f})}))}}]),n}())||r;t.default=D},"./src/pages/pc/home/index/components/Comment/Publishitem.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=m(n("./node_modules/react/index.js")),i=m(n("./node_modules/classnames/index.js")),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/byted-dimension-ui/lib/index.js"),s=m(n("./src/common/utils/variableCss.js")),u=n("./src/common/utils/index.js"),f=n("./src/pages/pc/home/index/components/Tea/index.js"),d=n("./src/pages/pc/home/index/components/LineItem/svg.js");function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/Comment/Publishitem.css");var v=(0,c.connect)(function(e){return{uid:e.user.uid,page:e.page}})(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,a.default.Component);var t=y(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={formattedComment:o.props.reply_data.content,replyActive:!1,isZan:!1},o.handleDelete=o.handleDelete.bind(g(o)),o.callBack=o.callBack.bind(g(o)),o.handleZan=o.handleZan.bind(g(o)),o.publishReply=o.publishReply.bind(g(o)),o.handleSvg=o.handleSvg.bind(g(o)),o}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(n,[{key:"handleDelete",value:function(e){var t=this.props,n=t.handleShowConfirm,o=t.getDeletsSubReplyId,r=t.comment_id,a=t.getHandleItemId,i=t.reply_data;n(e.pageX,e.pageY),o(i.id),a(r,"删除回复")}},{key:"callBack",value:function(e){var t=this;this.props.reply_data.user_liked?this.setState({isZan:!1},function(){e.zanRepliesLock=!0}):this.setState({isZan:!0},function(){setTimeout(function(){t.setState({isZan:!1},function(){e.zanRepliesLock=!0})},480)})}},{key:"handleZan",value:function(){var e=this.props,t=e.zanReplies,n=e.reply_data;t(n.user_liked,n.id,this.callBack)}},{key:"publishReply",value:function(){var e=this.props,t=e.handleShowinputReply,n=e.reply_data,o=e.getHandleComentId,r=e.comment_id,a=e.changeShowTextInput,i=e.publishTextarea;a(),i(),t(n.uname),o(r)}},{key:"handleSvg",value:function(e){this.setState({replyActive:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.reply_data,n="";n=t.multi.length>0?(0,u.replyShortImg)((0,u.linkUrl)(t.content)):(0,u.linkUrl)(t.content),u.emoji.convertEmoji(n,24).then(function(t){e.setState({formattedComment:t})}).catch(function(){l.message.error("半次元不小心滑了一跤~")})}},{key:"render",value:function(){var e=this,t=this.state,n=t.formattedComment,o=t.isZan,r=t.replyActive,c=this.props,l=c.reply_data,m=c.showOneFall,p=c.page,h=parseInt(this.props.uid,10),y=parseInt(this.props.item_id,10),g=parseInt(this.props.comment_uid,10),_=parseInt(l.uid,10),v="true"===m?"":"·",b=l.like_count>0?"".concat(l.like_count," 赞"):"赞",w=(0,i.default)("comment_reply-btn",{active:"true"===m}),E=(0,f.getCurrentPage)(p.type);return a.default.createElement("li",{className:"publish-item"},a.default.createElement("div",{className:(0,i.default)("publish_title",{active:"true"===m})},a.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/u/".concat(l.uid,"?_source_page=").concat(E),className:"publish-title-name"},l.uname),"：",a.default.createElement("span",{className:"publish_people-text",dangerouslySetInnerHTML:{__html:n}})),a.default.createElement("div",{className:(0,i.default)("publish_time",{active:"true"===m})},a.default.createElement("div",{className:"zan"},a.default.createElement("span",{className:(0,i.default)("comment_ding-btn",{active:"true"===m}),onClick:this.handleZan},"true"===m&&a.default.createElement("i",{className:(0,i.default)({"i-zan-reply":o,normal:!l.user_liked&&!o,active:l.user_liked&&!o})}),a.default.createElement("span",null,l.user_liked?"取消赞":b)),a.default.createElement("span",{className:(0,i.default)("comment_reply_dot",{active:"true"===m})},v),h===y?a.default.createElement("span",{className:w,onClick:this.handleDelete},"删除"):h===g?a.default.createElement("span",{className:w,onClick:this.handleDelete},"删除"):h===_?a.default.createElement("span",{className:w,onClick:this.handleDelete},"删除"):a.default.createElement("span",{className:w,onClick:this.publishReply,onMouseEnter:function(){return e.handleSvg(!0)},onMouseLeave:function(){return e.handleSvg(!1)}},"true"===m&&a.default.createElement(d.Comment,{style:{marginRight:"2px",position:"relative",top:"5px",transform:"scale(0.8)"},color:r?s.default.$K70:s.default.$K60}),a.default.createElement("span",null,"回复")),a.default.createElement("span",{className:"comment_reply_dot"},v),a.default.createElement("span",{className:"time"},(0,u.formatTime)(l.ctime)))))}}]),n}())||r;t.default=v},"./src/pages/pc/home/index/components/Comment/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=y(n("./node_modules/querystring/index.js")),i=y(n("./node_modules/react/index.js")),c=y(n("./node_modules/classnames/index.js")),l=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/byted-dimension-ui/lib/index.js"),u=n("./src/common/utils/index.js"),f=y(n("./src/common/components/pc/Login/Dialog.js")),d=y(n("./src/common/components/pc/EmojiSelector/index.js")),m=n("./src/pages/pc/home/index/components/Tea/index.js"),p=y(n("./src/common/asset/images/default_avatar.png")),h=y(n("./src/pages/pc/home/index/components/Comment/CommentList.js"));function y(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/Comment/style.css");var C=(0,l.connect)(function(e){return{userInfo:e.user,page:e.page}})(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(n,i.default.Component);var t=x(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={isTextareaFocus:!1,currentInput:""};return["clickFace","handlePublish","handleLoadMore","setTextState","publishTextarea","blurPublishTextarea","handleKeyEvent"].forEach(function(e){o[e]=o[e].bind(k(o))}),o}return function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(n,[{key:"clickFace",value:function(e){(0,u.insertText)(this.text,e),this.setState({currentInput:this.text.value})}},{key:"handlePublish",value:function(){var e=this.props.getCommentText,t=this.state.currentInput;this.props.user.uid>0?(e(t),this.setState({currentInput:""})):f.default.initLoginDialog()}},{key:"handleLoadMore",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=e.collectionInfo,r=this.props,i=r.item_detail,c=r.sortType,l={current_page:"",source_page:(0,m.getCurrentPage)(t),item_id:i.item_id,item_type:i.type,author_id:i.uid,hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(i.type){case"ganswer":l=v(v({},l),{},{group_ask_id:i.group.gid});break;case"article":i.post_in_set&&(l=v(v({},l),{},{set_id:i.set_data.item_set_id}))}if(this.props.user.uid>0?l.current_page="detail":l.current_page="login","circle"===t&&(l=(0,m.circleEvent)(l,n,c,"source_branch_page")),"profile"===t){var s=a.default.parse(window.location.search.substr("1")).source_profile_id;s&&(l.source_profile_id=s)}"collection"===t&&(l.set_id=o.collection.collection_id,l.set_name=o.collection.title),window.collectEvent("go_comment",l),window.collectEvent("go_detail",v(v({},l),{},{section:"middle",action_source:"click_comment_more"}))}},{key:"setTextState",value:function(e,t,n){this.setState({currentInput:e&&e.target.value||t},function(){n&&n()})}},{key:"publishTextarea",value:function(){var e=this.props,t=e.getHandleItemId,n=e.item_id;this.setState({isTextareaFocus:!0}),t(n,"添加评论")}},{key:"blurPublishTextarea",value:function(){this.setState({isTextareaFocus:!1})}},{key:"handleKeyEvent",value:function(e){var t=this.state.currentInput,n=t&&t.trim();13===e.keyCode&&n?this.handlePublish():13!==e.keyCode||n||s.message.warning("评论不能为空！")}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentInput,o=t.isTextareaFocus,r=this.props,a=r.item_detail,l=r.isShowdiscuss,s=r.commentList,u=r.isMoreComment,f=r.userInfo,y=r.showOneFall,_=r.page,v=n&&n.trim(),b=(0,m.getCurrentPage)(_.type),w=!0;return a.extra_properties&&a.extra_properties.item_reply_disable&&(w=!1),i.default.createElement("div",{className:(0,c.default)("publishBg",{active:!l,oneFall:"true"===y})},i.default.createElement("div",{className:"publish_form"},i.default.createElement("a",{className:"publish_avatar",href:f.uid>0?"/u/".concat(f.uid,"?_source_page=").concat(b):"/",target:"_blank",rel:"noopener noreferrer"},i.default.createElement("img",{src:f.avatar?f.avatar:p.default})),i.default.createElement("div",{className:"newTimeInputWrap"},w?i.default.createElement(i.default.Fragment,null,i.default.createElement("input",{value:n,onKeyDown:this.handleKeyEvent,onChange:this.setTextState.bind(this),autoSize:!0,className:(0,c.default)("publish-content-textarea",{focused:o||v}),ref:function(t){return e.text=t},placeholder:"发表评论...",onFocus:this.publishTextarea,onBlur:this.blurPublishTextarea}),i.default.createElement("div",{className:(0,c.default)("face-box",{active:v})},i.default.createElement(d.default,{showTxt:"false",clickFace:this.clickFace.bind(this),style:{width:"335px",height:"316px"}})),v&&i.default.createElement("button",{className:"publish-content-btn",onClick:this.handlePublish},"评论")):i.default.createElement("div",{className:"disable-input"},"该作品的评论功能已关闭"))),w&&i.default.createElement("div",{className:"commentListWrap"},s&&s.map(function(t){return i.default.createElement(h.default,g({comments:t.comments,comment_id:t.id,key:t.id,comment:t},e.props))}),u?i.default.createElement("div",{className:"comment_load-more"},i.default.createElement("a",{className:"load-more-text",rel:"noopener noreferrer",target:"_blank",href:"/item/detail/".concat(a.item_id,"?_source_page=").concat(b,"#ikari"),onClick:this.handleLoadMore},"查看更多"),i.default.createElement("i",{className:"load-more-arrow"})):null))}}]),n}())||r;t.default=C},"./src/pages/pc/home/index/components/HomeOneFall/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n("./node_modules/react/index.js")),r=c(n("./node_modules/react-infinite-scroller/index.js")),a=c(n("./src/common/components/pc/Loading/index.js")),i=c(n("./src/pages/pc/home/index/components/LiItemBox/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}n("./src/pages/pc/home/index/components/HomeOneFall/style.css");var s=function(e){var t=e.loadMore,n=e.hasMore,c=e.renderData;return o.default.createElement(r.default,{pageStart:0,loadMore:t,hasMore:n,loader:o.default.createElement("div",{className:"loader",key:0},o.default.createElement(a.default,null))},o.default.createElement("div",{className:"one-fall-li-wrap"},c.map(function(t){return o.default.createElement(i.default,l({},e,{key:t.item_detail.item_id,item_id:t.item_detail.item_id,item_detail:t.item_detail,topping:t.user_top}))})))};t.default=s},"./src/pages/pc/home/index/components/LiItemBox/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=v(n("./node_modules/querystring/index.js")),c=v(n("./node_modules/react/index.js")),l=v(n("./node_modules/classnames/index.js")),s=n("./node_modules/byted-dimension-ui/lib/index.js"),u=v(n("./src/common/components/errorBound.js")),f=n("./node_modules/react-redux/es/index.js"),d=n("./src/common/utils/index.js"),m=n("./src/common/utils/tea.js"),p=v(n("./src/common/services/CommentSvc.js")),h=v(n("./src/common/components/pc/FirstInView/index.js")),y=n("./src/pages/pc/home/index/components/Tea/index.js"),g=v(n("./src/pages/pc/home/index/components/LineItem/index.js")),_=v(n("./src/pages/pc/home/index/components/Comment/index.js"));function v(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(this,n)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LiItemBox/style.css");var I=(r=(0,f.connect)(function(e){return{user:e.user,page:e.page}}),(0,u.default)(a=r(a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,c.default.Component);var t=C(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={replyId:null,commentText:null,commentList:[],isShowdiscuss:!1,currentPage:1,handleComentId:null,sort:"hot",isMoreComment:!1};return["getCommentText","getDeleteReplyId","changeCommentCount","handleGocomment","handleDiscuss","getCommentData","publishComment","deleteComment","zanComment","zanReply","replyContent","deleteReply","changeAddedCommentsNum","changeDiscuss_box","sendImpression","getHandleComentId"].forEach(function(e){o[e]=o[e].bind(j(o))}),o.onceGetComment=!0,o}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(n,[{key:"getCommentText",value:function(e){var t=this;this.setState({commentText:e},function(){t.publishComment()})}},{key:"getDeleteReplyId",value:function(e){this.setState({replyId:e})}},{key:"changeCommentCount",value:function(e,t){this.setState(function(n){return{commentList:n.commentList.map(function(n){var o=n;return o.id===e&&("add"===t?o.comments_count++:"drop"===t&&o.comments_count--),o})}})}},{key:"handleGocomment",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=this.props,r=o.item_detail,a=o.sortType,c={current_page:"",source_page:(0,m.getSourcePage)(),item_id:r.item_id,item_type:r.type,author_id:r.uid,hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(r.type){case"ganswer":c=E(E({},c),{},{group_ask_id:r.group.gid});break;case"article":r.post_in_set&&(c=E(E({},c),{},{set_id:r.set_data.item_set_id}))}if(this.props.user.uid>0?c.current_page=(0,y.getCurrentPage)(t):c.current_page="login","circle"===t&&(c=(0,y.circleEvent)(c,n,a,"branch_page")),"profile"===t){var l=i.default.parse(window.location.search.substr("1")).source_profile_id;l&&(c.source_profile_id=l)}window.collectEvent("go_comment",c)}},{key:"handleDiscuss",value:function(){var e=this.state.isShowdiscuss;!e&&this.onceGetComment&&(this.onceGetComment=!1,this.getCommentData()),e||this.handleGocomment(),this.setState({isShowdiscuss:!e})}},{key:"getCommentData",value:function(){var e=this,t=this.props.item_id,n=this.state,o=n.currentPage,r=n.sort;p.default.getCommentList(o,t,r).then(function(t){if(0===t.code){var n=t.data.data;e.setState({commentList:e.addproperties(n).slice(0,4),isMoreComment:n.length>4})}})}},{key:"publishComment",value:function(){var e=this,t=this.props,n=t.item_id,o=t.item_detail,r=t.commentAddOne,a=t.page,i=t.sortType,c=this.state,l=c.commentText,u=c.commentList,f={item_type:o.type,item_id:n,author_id:o.uid,emoji_list:d.emoji.convertEmojiForEventTracker(l),current_page:(0,y.getCurrentPage)(a.type)};"circle"===a.type&&(f.branch_page=1===i?"hot":"new"),window.collectEvent("click_comment_confirm_button",f),p.default.publishComment(l,[],n).then(function(t){if(0===t.code){r(n),s.message.success("评论发布成功");var o=u,a=t.data.data;a.user_liked=!1,a.like_count=0,a.addedCommentsNum=0,a.discuss_box=!1,o.unshift(a),e.setState({commentList:o})}else s.message.error(t.msg)})}},{key:"deleteComment",value:function(){var e=this,t=this.props,n=t.item_id,o=t.commentReduceOne,r=this.state.replyId;p.default.deleteComment(n,r).then(function(t){0===t.code?(o(n),e.setState(function(e){return{commentList:e.commentList.filter(function(e){return e.id!==r})}})):s.message.error(t.msg)})}},{key:"zanComment",value:function(e,t){var n=this.state.commentList.map(function(n){var o=n;return o.id===e&&(o.user_liked=!o.user_liked,t?o.like_count--:o.like_count++),o});this.setState({commentList:n})}},{key:"zanReply",value:function(e,t){var n=this.state.commentList.map(function(n){var o=n;return o.comments=o.comments.map(function(n){var o=n;return o.id===t&&(o.user_liked=!o.user_liked,e?(s.message.success("取消点赞成功"),o.like_count--):(s.message.success("点赞成功"),o.like_count++)),o}),o});this.setState({commentList:n})}},{key:"replyContent",value:function(e,t){var n=this,o=this.state.commentList,r=this.props.item_id;return p.default.publishSubcomment(e,r,t).then(function(e){if(0===e.code){s.message.success("评论发布成功"),n.changeCommentCount(t,"add");var r=o.map(function(n){return n.id===t&&(n.discuss_box=!0,n.comments.unshift(e.data.data)),n});n.setState({commentList:r})}else s.message.error(e.msg)})}},{key:"deleteReply",value:function(e,t){var n=this,o=this.state.commentList,r=this.props.item_id;p.default.deleteSubcomment(t,r,e).then(function(r){if(0===r.code){n.changeCommentCount(e,"drop");var a=o.map(function(n){var o=n;return o.id===e&&(o.comments=o.comments.filter(function(e){return e.id!==t})),o});n.setState({commentList:a})}else s.message.error(r.msg)})}},{key:"addproperties",value:function(e){return 0===e.length?[]:e.map(function(e){var t=e;return t.addedCommentsNum=0,t.discuss_box=t.comments.length>0,t})}},{key:"changeAddedCommentsNum",value:function(e,t){this.setState(function(n){return{commentList:n.commentList.map(function(n){var o=n;return o.id===e&&("add"===t?o.addedCommentsNum++:"drop"===t&&o.addedCommentsNum--),o})}})}},{key:"changeDiscuss_box",value:function(e){this.setState(function(t){return{commentList:t.commentList.map(function(t){var n=t;return n.id===e&&(n.discuss_box=!n.discuss_box),n})}})}},{key:"sendImpression",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=e.profile_id,r=e.collectionInfo,a=this.props,c=a.item_detail,l=a.sortType,s={source_page:(0,m.getSourcePage)(),current_page:"",item_type:c.type,sub_type:"main",section:"middle",item_id:c.item_id,author_id:c.uid,hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(c.type){case"ganswer":s=E(E({},s),{},{group_ask_id:c.group.gid});break;case"article":c.post_in_set&&(s=E(E({},s),{},{set_id:c.set_data.item_set_id}))}if(this.props.user.uid>0?s.current_page=(0,y.getCurrentPage)(t):s.current_page="login","circle"===t&&(s=(0,y.circleEvent)(s,n,l,"branch_page")),"profile"===t){var u=i.default.parse(window.location.search.substr("1")).source_profile_id;u&&(s.source_profile_id=u),s.profile_id=o,s.author_id=o}"collection"===t&&(s.set_id=r.collection.collection_id,s.set_name=r.collection.title),window.collectEvent("impression",s)}},{key:"getHandleComentId",value:function(e){this.setState({handleComentId:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.item_id===e.handleItemId&&"删除评论"===this.props.deleteComment&&this.deleteComment()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isShowdiscuss,o=t.commentList,r=t.handleComentId,a=t.isMoreComment,i=this.props,s=i.item_detail,u=i.showOneFall;return c.default.createElement(h.default,{key:s.item_id,item_id:s.item_id,author_id:s.uid,onFirstInView:this.sendImpression},c.default.createElement("li",{className:(0,l.default)("li_item_box",{active:"true"===u})},c.default.createElement(g.default,b({handleDiscuss:this.handleDiscuss,isShowdiscuss:n},this.props)),c.default.createElement(_.default,b({commentList:o,isMoreComment:a,isShowdiscuss:n,getCommentText:function(t){return e.getCommentText(t)},getDeleteReplyId:function(t){return e.getDeleteReplyId(t)},zanComment:function(t,n){return e.zanComment(t,n)},zanReply:function(t,n){return e.zanReply(t,n)},replyContent:function(t,n){return e.replyContent(t,n)},deleteReply:function(t,n){return e.deleteReply(t,n)},getHandleComentId:function(t){return e.getHandleComentId(t)},handleComentId:r,changeAddedCommentsNum:function(t,n){return e.changeAddedCommentsNum(t,n)},changeDiscuss_box:function(t){return e.changeDiscuss_box(t)}},this.props))))}}]),n}())||a)||a);t.default=I},"./src/pages/pc/home/index/components/LineItem/Article.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n("./node_modules/react/index.js")),a=c(n("./node_modules/classnames/index.js")),i=c(n("./src/common/components/pc/TextCollapse/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/Article.css");var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r.default.Component);var t=u(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={maxHeight:126,onlyChangeHeiht:"",expandText:"...展开更多"},o.firstClick=!0,o.changeMaxHeight=o.changeMaxHeight.bind(f(o)),o}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(n,[{key:"changeMaxHeight",value:function(){var e=this.props,t=e.handleGoDetail,n=e.href;this.firstClick?this.setState({maxHeight:270,onlyChangeHeiht:"true",expandText:"...查看全部"}):(t(),window.open(n)),this.firstClick=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.maxHeight,o=t.onlyChangeHeiht,c=t.expandText,l=this.props,s=l.item_detail,u=l.href,f=l.title,d=l.content,m=l.handleGoDetail,p=l.showOneFall,h=!!s.cover;return r.default.createElement("div",{className:(0,a.default)("articleBox",{active:"true"===p})},r.default.createElement("a",{href:u,className:(0,a.default)("img_box",{show:h}),target:"_blank",rel:"noopener noreferrer",onClick:function(){m()}},r.default.createElement("img",{src:s.cover})),r.default.createElement("div",{className:(0,a.default)("article",{active:!h})},r.default.createElement("a",{className:"articleTitle",href:u,target:"_blank",rel:"noopener noreferrer",onClick:function(){m()}},f),d?r.default.createElement("a",{className:"curt"},r.default.createElement(i.default,{maxHeight:n,onExpand:this.changeMaxHeight,onlyChangeHeiht:o,onlyShowTextCollapse:"true",expandText:c},r.default.createElement("div",{className:"curt_inner",ref:function(t){return e.articleText=t}},d))):null))}}]),n}();t.default=m},"./src/pages/pc/home/index/components/LineItem/ChannelGanswer.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./src/common/components/pc/TextCollapse/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/ChannelGanswer.css");var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={maxHeight:84,showType1:!1},o.enterProfile=o.enterProfile.bind(u(o)),o.goDetail=o.goDetail.bind(u(o)),o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"enterProfile",value:function(){var e=this.props,t=e.handleEnterprofile,n=e.item_detail;t(),window.open("/u/".concat(n.uid,"?_source_page=discuss"))}},{key:"goDetail",value:function(){var e=this.props,t=e.handleGoDetail,n=e.item_detail,o="/item/detail/".concat(n.item_id,"?_source_page=discuss");t(),window.open(o)}},{key:"componentDidMount",value:function(){if(this.article){this.article.clientHeight>72&&this.setState({showType1:!0})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.maxHeight,o=t.showType1,i=this.props,c=i.item_detail,l=i.isUser,s=i.isShowImg,u=i.handleGoDetail;return r.default.createElement("div",{className:"channel-ganswer"},o?r.default.createElement("div",{className:"channel-ganswer-type1"},r.default.createElement("a",{className:"channel-ganswer-title",href:"/group/list/".concat(c.group.gid,"?_source_page=discuss"),target:"_blank",rel:"noopener noreferrer",onClick:function(){u()}},c.group.name),r.default.createElement("div",{className:"channel-ganswer-main"},r.default.createElement(a.default,{maxHeight:n,expandText:"...查看全部",style:{fontSize:"14px"},onExpand:this.goDetail,onlyShowTextCollapse:"true"},r.default.createElement("p",{className:"channel-ganswer-content"},l?r.default.createElement("a",{className:"channel-ganswer-content-name",onClick:this.enterProfile},c.uname,r.default.createElement("span",null,": ")):null,r.default.createElement("a",{className:"channel-ganswer-txt",onClick:this.goDetail},c.plain?c.plain:"发布回答"))),s>0&&r.default.createElement("a",{className:"channel-ganswer-img-box",onClick:this.goDetail},r.default.createElement("img",{src:c.multi[0].path,className:"channel-ganswer-img"})))):r.default.createElement("div",{className:"channel-ganswer-type2"},r.default.createElement("div",{className:"channel-ganswer-left"},r.default.createElement("a",{className:"channel-ganswer-left-title",href:"/group/list/".concat(c.group.gid,"?_source_page=discuss"),target:"_blank",rel:"noopener noreferrer"},c.group.name),r.default.createElement(a.default,{maxHeight:n,expandText:"...查看全部",style:{fontSize:"14px"}},r.default.createElement("p",{className:"ganswer-content",ref:function(t){return e.article=t}},l?r.default.createElement("a",{className:"ganswer-content-name",onClick:this.enterProfile},c.uname,r.default.createElement("span",null,": ")):null,r.default.createElement("a",{className:"ganswer-txt",onClick:this.goDetail},c.plain?c.plain:"发布回答")))),s>0&&r.default.createElement("a",{className:"ganswer-right-img-box",onClick:this.goDetail},r.default.createElement("img",{src:c.multi[0].path,className:"ganswer-right-img"}))))}}]),n}();t.default=d},"./src/pages/pc/home/index/components/LineItem/Ganswer.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("./node_modules/react/index.js")),a=u(n("./src/common/components/pc/TextCollapse/index.js")),i=n("./src/pages/pc/home/index/components/Tea/index.js"),c=u(n("./src/pages/pc/home/index/components/LineItem/OneImage.js")),l=u(n("./src/pages/pc/home/index/components/LineItem/TwoImage.js")),s=u(n("./src/pages/pc/home/index/components/LineItem/ThreeRowImage.js"));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/Ganswer.css");var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default.Component);var t=m(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={maxHeight:111},o}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(n,[{key:"render",value:function(){var e=this.state.maxHeight,t=this.props,n=t.item_detail,o=t.isUser,u=t.isShowImg,f=t.picNum,d=t.handleGoDetail,m=t.type,p=t.handleEnterprofile,h=(0,i.getCurrentPage)(m);return r.default.createElement("div",{className:"ganswer"},r.default.createElement("a",{href:"/group/list/".concat(n.group.gid,"?_source_page=").concat(h),className:"ganswer_title",target:"_blank",rel:"noopener noreferrer",onClick:function(){d()}},r.default.createElement("h5",null,n.group.name)),r.default.createElement(a.default,{maxHeight:e,style:{fontSize:"14px"}},r.default.createElement("p",{className:"ganswer_content"},o?r.default.createElement("a",{href:"/u/".concat(n.uid,"?_source_page=").concat(h),className:"content_name",target:"_blank",rel:"noopener noreferrer",onClick:function(){p()}},n.uname,r.default.createElement("span",null,":")):null,r.default.createElement("a",{href:"/item/detail/".concat(n.item_id,"?_source_page=").concat(h),className:"content",target:"_blank",rel:"noopener noreferrer",onClick:function(){d()}},n.plain?n.plain:"发布回答"))),u?1===f?r.default.createElement(c.default,{type:"ganswer",href:"/item/detail/".concat(n.item_id,"?_source_page=").concat(h),srcs:n.multi,handleGoDetail:d}):2===f?r.default.createElement(l.default,{href:"/item/detail/".concat(n.item_id,"?_source_page=").concat(h),srcs:n.multi,handleGoDetail:d}):3===f?r.default.createElement(s.default,{href:"/item/detail/".concat(n.item_id,"?_source_page=").concat(h),srcs:n.multi,moreThree:!1,handleGoDetail:d}):f>3?r.default.createElement(s.default,{href:"/item/detail/".concat(n.item_id,"?_source_page=").concat(h),srcs:n.multi,moreThree:!0,handleGoDetail:d}):null:null)}}]),n}();t.default=h},"./src/pages/pc/home/index/components/LineItem/OneImage.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/OneImage.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.srcs,o=e.handleGoDetail,i=e.showOneFall,c=e.type;return r.default.createElement("div",{className:(0,a.default)("oneImage",{active:"true"===i})},r.default.createElement("a",{className:"img_box",href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){o()}},r.default.createElement("img",{src:n[0].path,className:(0,a.default)({maxHeight:"ganswer"===c})})))}}]),n}();t.default=f},"./src/pages/pc/home/index/components/LineItem/Tag.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tags=function(e){var t=e.item_detail,n=e.pageType,r=e.tagMessage,i=t.post_tags;if("ganswer"===t.type)return null;var c=!i||0===i.length||function(e,t,n){var o=0;return e.forEach(function(e){("work"===e.type&&"circle"===t&&1===n.circle_type||"tag"===e.type&&"circle"===t&&e.tag_name.toUpperCase()===n.circle_name.toUpperCase())&&(o+=1)}),o===e.length}(i,n,r);return o.default.createElement("div",{className:(0,a.default)("tags",{hide:c})},o.default.createElement(u,e))},t.WorkTag=c,t.EventTag=l,t.Tag=s,t.TagList=u;var o=i(n("./node_modules/react/index.js")),r=n("./src/common/utils/index.js"),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.tag,n=e.tagMessage,r=e.pageType,a=e.profile_id_query,i=e.handleEnterhashtag;return"circle"===r&&1===n.circle_type?null:o.default.createElement("a",{className:"tag",href:"/tag/".concat(t.tag_id).concat(a),target:"_blank",rel:"noopener noreferrer",onClick:function(){return i(t.tag_id,t.tag_name,"work","click_bottom_tag")}},t.tag_name)}function l(e){var t=e.tag,n=e.onEvent,r=t.event_id,a=t.tag_id,i=t.tag_name;return o.default.createElement("a",{className:"tag tag-event",href:"/huodong/".concat(r),target:"_blank",rel:"noopener noreferrer",onClick:function(){return n(a,i)}},o.default.createElement("i",{className:"tag-event-icon"}),i)}function s(e){var t=e.tag,n=e.tagMessage,r=e.pageType,a=e.onEnterhashtag,i=e.profile_id_query,c=t.tag_name,l=t.tag_id;return"circle"===r&&t.tag_name.toUpperCase()===n.circle_name.toUpperCase()?null:o.default.createElement("a",{className:"tag",href:"/tag/".concat(l).concat(i),target:"_blank",rel:"noopener noreferrer",onClick:function(){return a(l,c,"tag","click_bottom_tag")}},c)}function u(e){var t=e.item_detail,n=e.tagMessage,a=e.pageType,i=e.profile_id_query,u=e.handleEnterhashtag,f=e.handleHuoDong,d=t.post_tags;return d&&0!==d.length?(0,r.sortTag)(d).map(function(e){return"event"===e.type?o.default.createElement(l,{key:e.tag_id,tag:e,onEvent:f}):"work"===e.type?o.default.createElement(c,{key:e.tag_id,tagMessage:n,pageType:a,profile_id_query:i,onEnterhashtag:u,tag:e}):o.default.createElement(s,{key:e.tag_id,tag:e,tagMessage:n,pageType:a,profile_id_query:i,onEnterhashtag:u})}):null}},"./src/pages/pc/home/index/components/LineItem/ThreeImage.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/ThreeImage.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.srcs,o=e.pic_num,i=e.handleGoDetail,c=e.showOneFall;return r.default.createElement("div",{className:(0,a.default)("threeImage",{active:"true"===c})},r.default.createElement("a",{className:"img_box",href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){i()}},r.default.createElement("div",{className:"left_img"},r.default.createElement("img",{src:n[0].path,alt:""})),r.default.createElement("div",{className:"right_img"},r.default.createElement("img",{className:"up_img_box",src:n[1].path,alt:""}),r.default.createElement("img",{className:"down_img_box",src:n[2].path,alt:""}),r.default.createElement("span",{className:(0,a.default)("multiPic_box clearfix",{show:o>3})},r.default.createElement("i",{className:"multiPic"}),"多图"))))}}]),n}();t.default=f},"./src/pages/pc/home/index/components/LineItem/ThreeRowImage.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/ThreeRowImage.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.srcs,o=e.moreThree,i=e.handleGoDetail;return r.default.createElement("div",{className:"threeRowImage"},r.default.createElement("a",{href:t,className:"img_box",target:"_blank",rel:"noopener noreferrer",onClick:function(){i()}},r.default.createElement("ul",{className:"li_box"},r.default.createElement("li",{className:"li_item"},r.default.createElement("img",{src:n[0].path})),r.default.createElement("li",{className:"li_item"},r.default.createElement("img",{src:n[1].path})),r.default.createElement("li",{className:"li_item"},r.default.createElement("img",{src:n[2].path}),r.default.createElement("span",{className:(0,a.default)({show:o})},r.default.createElement("i",{className:"multiPic"}),"多图")))))}}]),n}();t.default=f},"./src/pages/pc/home/index/components/LineItem/TwoImage.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/TwoImage.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.srcs,o=e.handleGoDetail,i=e.showOneFall;return r.default.createElement("div",{className:(0,a.default)("twoImgage",{active:"true"===i})},r.default.createElement("a",{className:"img_box",href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){o()}},r.default.createElement("div",{className:"left_img"},r.default.createElement("img",{src:n[0].path})),r.default.createElement("div",{className:"right_img"},r.default.createElement("img",{src:n[1].path}))))}}]),n}();t.default=f},"./src/pages/pc/home/index/components/LineItem/UserMessage.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n("./node_modules/react/index.js")),a=f(n("./node_modules/moment/moment.js")),i=f(n("./src/common/asset/images/default_avatar.png")),c=f(n("./src/common/asset/images/report.png")),l=f(n("./src/common/asset/images/timing_time.png")),s=n("./src/common/utils/index.js"),u=n("./src/pages/pc/home/index/components/LineItem/svg.js");function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/UserMessage.css");var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.default.Component);var t=p(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o.handleEnterhashtag=o.handleEnterhashtag.bind(h(o)),o}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(n,[{key:"handleEnterhashtag",value:function(){var e=this.props;(0,e.handleEnterprofile)(e.item_detail.uid)}},{key:"render",value:function(){var e=this.props,t=e.avatarAurl,n=e.avatarImg,o=e.avatarName,f=e.ctime,d=e.isUser,m=e.isValueUser,p=e.showOneFall,h=e.topping,y=e.item_detail,g=y.visible_level,_=y.timing_time,v=y.after_timing_time,b=(0,s.needShowTimingTime)(v),w=d&&m,E=n||i.default;return r.default.createElement(r.default.Fragment,null,"true"!==p?r.default.createElement("div",{className:"title"},r.default.createElement("a",{className:"title_img_box",href:t,title:o,target:"_blank",rel:"noopener noreferrer",onClick:this.handleEnterhashtag},r.default.createElement("img",{className:"title-img",src:E,alt:o}),w?r.default.createElement("i",{className:"i-uservalue-c"}):null),r.default.createElement("a",{className:"title-txt",href:t,title:o,target:"_blank",rel:"noopener noreferrer",onClick:this.handleEnterhashtag},o)):r.default.createElement("div",{className:"one_title"},r.default.createElement("a",{className:"one_title_img_box",href:t,title:o,target:"_blank",rel:"noopener noreferrer",onClick:this.handleEnterhashtag},r.default.createElement("img",{className:"one_title-img",src:E,alt:o}),w?r.default.createElement("i",{className:"i-uservalue-c"}):null),r.default.createElement("div",{className:"info-wrap"},r.default.createElement("a",{className:"one_title-txt",href:t,title:o,target:"_blank",rel:"noopener noreferrer",onClick:this.handleEnterhashtag},o),b?r.default.createElement("span",{className:"timing-time"},r.default.createElement("img",{src:l.default,className:"timing-time-icon"}),a.default.unix(_).format("YYYY-MM-DD HH:mm")):r.default.createElement("span",null,r.default.createElement("span",{className:"dot"},"·"),r.default.createElement("span",{className:"post-time"},(0,s.formatTime)(f))),(0,s.needShowAuditPromp)(g)&&r.default.createElement("div",{className:"high-risk-prompt"},r.default.createElement("div",{className:"risk-info"},b?" · ":r.default.createElement("img",{src:c.default}),"审核未通过")),r.default.createElement("div",{style:{marginLeft:"auto"}}),h&&r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{className:"top-txt"},"置顶"),r.default.createElement(u.TopIcon,null)))))}}]),n}();t.default=g},"./src/pages/pc/home/index/components/LineItem/Video.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/Video.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.src,n=e.link,o=e.duration,i=e.handleGoDetail,c=e.showOneFall;return r.default.createElement("div",{className:(0,a.default)("video",{active:"true"===c})},r.default.createElement("a",{className:"img_box",href:n,target:"_blank",rel:"noopener noreferrer",onClick:function(){i()}},r.default.createElement("img",{src:t}),r.default.createElement("i",{className:"play_btn"}),r.default.createElement("p",{className:"time"},function(e){var t=parseInt(e/60,10),n=e%60<10?"0"+e%60:e%60;return"".concat(t,":").concat(n)}(o))))}}]),n}();t.default=f},"./src/pages/pc/home/index/components/LineItem/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=S(n("./node_modules/querystring/index.js")),i=S(n("./node_modules/react/index.js")),c=S(n("./node_modules/classnames/index.js")),l=n("./node_modules/react-redux/es/index.js"),s=S(n("./node_modules/lodash.throttle/index.js")),u=n("./src/common/utils/tea.js"),f=n("./node_modules/byted-dimension-ui/lib/index.js"),d=S(n("./src/common/services/ItemSvc.js")),m=S(n("./src/common/utils/variableCss.js")),p=n("./src/common/components/pc/Share/index.js"),h=S(n("./src/common/components/pc/Login/Dialog.js")),y=S(n("./src/common/components/pc/TextCollapse/index.js")),g=n("./src/pages/pc/home/index/components/Tea/index.js"),_=n("./src/pages/pc/home/index/components/LineItem/svg.js"),v=S(n("./src/pages/pc/home/index/components/LineItem/UserMessage.js")),b=S(n("./src/pages/pc/home/index/components/LineItem/OneImage.js")),w=S(n("./src/pages/pc/home/index/components/LineItem/TwoImage.js")),E=S(n("./src/pages/pc/home/index/components/LineItem/ThreeImage.js")),x=S(n("./src/pages/pc/home/index/components/LineItem/Video.js")),k=S(n("./src/pages/pc/home/index/components/LineItem/Article.js")),O=S(n("./src/pages/pc/home/index/components/LineItem/Ganswer.js")),C=S(n("./src/pages/pc/home/index/components/LineItem/ChannelGanswer.js")),j=n("./src/pages/pc/home/index/components/LineItem/Tag.js");function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}(this,n)}}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/LineItem/style.css");var M=(0,l.connect)(function(e){return{user:e.user,page:e.page}})(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(n,i.default.Component);var t=N(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={isZan:!1,shareActive:!1,discussActive:!1},o.lock=!0;return["reportCollect","handleLike","handleCollect","handleZan","handleShare","getInfo","handleGoDetail","handleEnterhashtag","handleEnterprofile","handleHuoDong","handleDiscuss","handleSvg","goSerialDetail"].forEach(function(e){o[e]=o[e].bind(L(o))}),o.handleResize=(0,s.default)(o.handleResize,200).bind(L(o)),o}return function(e,t,n){t&&A(e.prototype,t),n&&A(e,n)}(n,[{key:"reportCollect",value:function(){var e=this.props.page.type,t=this.props,n=t.item_detail,o=t.sortType,r={current_page:(0,g.getCurrentPage)(e),source_page:(0,u.getSourcePage)(),section:"middle",item_type:n.type,item_id:n.item_id,author_id:n.uid};"circle"===e&&(r.branch_page=1===o?"hot":"new"),window.collectEvent("item_collect",r)}},{key:"handleLike",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=this.props,r=o.item_detail,i=o.sortType,c={current_page:(0,g.getCurrentPage)(t),source_page:(0,u.getSourcePage)(),item_type:r.type,item_id:r.item_id,author_id:r.uid,like_type:"item",comment_id:"",is_hot_comment:r.replies&&r.replies.length>0?"1":"0",hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(r.type){case"ganswer":c=T(T({},c),{},{group_ask_id:r.group.gid});break;case"article":r.post_in_set&&(c=T(T({},c),{},{set_id:r.set_data.item_set_id}))}if("circle"===t&&(c=(0,g.circleEvent)(c,n,i,"branch_page")),"profile"===t){var l=a.default.parse(window.location.search.substr("1")).source_profile_id;l&&(c.source_profile_id=l)}window.collectEvent("like",c)}},{key:"handleCollect",value:function(){var e=this,t=this.props,n=t.item_id,o=t.user,r=t.item_detail,a=t.onToggleCollect,i=r.user_favored?d.default.itemUnCollect:d.default.itemCollect;o.uid>0?this.lock&&(this.lock=!1,i(n).then(function(t){e.lock=!0,0===t.code?(r.user_favored?f.message.success("已取消收藏"):(e.reportCollect(),f.message.success("收藏成功^-^")),a(n)):f.message.error("半次元不小心滑了一跤~")}).catch(function(){e.lock=!0,f.message.error("半次元不小心滑了一跤~")})):h.default.initLoginDialog()}},{key:"handleZan",value:function(){var e=this,t=this.props,n=t.item_detail,o=t.zanItemId,r=n.item_id,a=n.user_liked,i=a?d.default.cancelItemLike:d.default.itemLike;this.props.user.uid>0?this.lock&&(this.lock=!1,i(r).then(function(t){0===t.code?a?(e.setState({isZan:!1},function(){e.lock=!0}),o(r,a)):(e.handleLike(),e.setState({isZan:!0},function(){setTimeout(function(){e.setState({isZan:!1},function(){e.lock=!0}),o(r,a)},480)})):(e.lock=!0,f.message.error("半次元不小心滑了一跤~"))}).catch(function(){e.lock=!0,f.message.error("半次元不小心滑了一跤~")})):h.default.initLoginDialog()}},{key:"handleShare",value:function(e,t){var n=this.props.page,o=n.type,r=n.tagInfo,i=this.props,c=i.item_detail,l=i.shareItemId,s=i.sortType,f=c.item_id,d=t;"wechat"===t?d="weixin_moment":"qq_zone"===t&&(d="qzone");var m={source_page:(0,u.getSourcePage)(),scene_id:1001,platform:d,share_type:"item",item_id:c.item_id,item_type:c.type,author_id:c.uid,hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(l(f),(0,p.shareAction)(e,t),c.type){case"ganswer":m=T(T({},m),{},{group_ask_id:c.group.gid});break;case"article":c.post_in_set&&(m=T(T({},m),{},{set_id:c.set_data.item_set_id}))}if(this.props.user.uid>0?m.current_page=(0,g.getCurrentPage)(o):m.current_page="login","circle"===o&&(m=(0,g.circleEvent)(m,r,s,"branch_page")),"profile"===o){var h=a.default.parse(window.location.search.substr("1")).source_profile_id;h&&(m.source_profile_id=h)}window.collectEvent("share",m)}},{key:"getInfo",value:function(e){var t=this.props,n=t.item_detail,o=t.user,r=n.cover||n.multi&&n.multi[0]&&n.multi[0].path||"";return{type:n.type,uname:n.uname,like_count:n.like_count,pic:25===n.visible_level?o.avatar:r,title:n.title,group:n.group,item_id:n.item_id,url:e}}},{key:"handleGoDetail",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=e.collectionInfo,r=this.props,a=r.item_detail,i=r.profile_id,c=r.sortType,l={source_page:"",item_type:a.type,item_id:a.item_id,action_source:"main",section:"middle",hashtag_name:"",hashtag_id:"",hashtag_type:""};switch(a.type){case"ganswer":l=T(T({},l),{},{group_ask_id:a.group.gid});break;case"article":a.post_in_set&&(l=T(T({},l),{},{set_id:a.set_data.item_set_id}))}this.props.user.uid>0?l.source_page=(0,g.getCurrentPage)(t):l.source_page="login","circle"===t&&(l=(0,g.circleEvent)(l,n,c,"source_branch_page")),"profile"===t&&(l.profile_id=i,l.author_id=i),"collection"===t&&(l.set_id=o.collection.collection_id,l.set_name=o.collection.title),window.collectEvent("go_detail",l)}},{key:"handleEnterhashtag",value:function(e,t,n,o){var r=this.props,a=r.page,i=r.sortType,c={current_page:"hashtag",source_page:"",hashtag_id:e,hashtag_name:t,hashtag_type:n,section:"middle",entrance:o};this.props.user.uid>0?c.source_page=(0,g.getCurrentPage)(a.type):c.source_page="login","circle"===a.type?c.source_branch_page=1===i?"hot":"new":"profile"===a.type&&(c.source_profile_id=a.profile_id),"collection"===a.type&&(c.set_id=a.collectionInfo.collection.collection_id,c.set_name=a.collectionInfo.collection.title),window.collectEvent("enter_hashtag",c)}},{key:"handleEnterprofile",value:function(){var e=this.props.page,t=e.type,n=e.tagInfo,o=this.props,r=o.user,a=o.item_detail,i=o.sortType,c=a.uid,l={source_page:"",author_id:a.uid,user_type:r.uid.toString()===c.toString()?"self":"other",hashtag_name:"",hashtag_id:"",hashtag_type:""};r.uid>0?l.source_page=(0,g.getCurrentPage)(t):l.source_page="login","circle"===t&&(l=(0,g.circleEvent)(l,n,i,"source_branch_page")),window.collectEvent("enter_profile",l)}},{key:"handleHuoDong",value:function(e,t){var n=this.props.page.type,o={event_id:e,event_name:t,section:"middle",source_page:"",hashtag_name:"",hashtag_id:"",hashtag_type:""};this.props.user.uid>0?o.source_page=(0,g.getCurrentPage)(n):o.source_page="login",window.collectEvent("enter_event",o)}},{key:"handleDiscuss",value:function(){var e=this.props.handleDiscuss;e()}},{key:"handleSvg",value:function(e,t){"share"===e?this.setState({shareActive:t}):"discuss"===e&&this.setState({discussActive:t})}},{key:"goSerialDetail",value:function(){var e=this.props,t=e.item_detail,n=e.page.type,o=e.user,r=(0,g.getCurrentPage)(n),a=t.collection,i=a.user.uid,c={current_page:"serial_detail",source_page:r,set_id:a.collection_id,set_name:a.title};"profile"===r&&(c=T(T({},c),{},{user_type:o.uid.toString()===i.toString()?"self":"other"})),window.collectEvent("go_serial_detail",c),window.open("/collection/".concat(a.collection_id,"?_source_page=").concat(r))}},{key:"handleResize",value:function(){if("false"!==this.props.isUseLayOut){var e=window.innerWidth||document.documentElement.clientWidth;e>1719?this.setState({marginRight:"8%"}):e>1520?this.setState({marginRight:"3%"}):e>1380?this.setState({marginRight:"8%"}):this.setState({marginRight:"4%"})}}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props.page,n=t.type,o=t.tagInfo,r="profile"===n?this.props.page.profile_id:void 0,a=this.props,l=a.isShowdiscuss,s=a.item_detail,u=a.showOneFall,d=a.topping,p=this.state,h=p.isZan,S=p.shareActive,I=p.discussActive,T=s.pic_num,D=null,A=l?"收起评论":s.reply_count>0?s.reply_count:"评论",P=(0,g.getCurrentPage)(n),N="".concat(location.origin,"/item/detail/").concat(s.item_id,"?_source_page=").concat(P),L=r?"?source_profile_id=".concat(r,"&_source_page=").concat(P):"?_source_page=".concat(P);D="profile"===n?{uid:s.uid,uname:s.uname,avatar:s.avatar,type:"profile"}:{uid:s.uid,uname:s.uname,avatar:s.avatar,type:"user"};var R={top:"42px",right:"2px",paddingLeft:"18px",color:m.default.$K80};return i.default.createElement("div",{className:(0,c.default)("waterfall-li-item",{active:l,oneFall:"true"===u})},i.default.createElement("div",{className:(0,c.default)("li-item-top",{active:"true"===u})},i.default.createElement(v.default,{avatarAurl:"/u/".concat(D.uid,"?_source_page=").concat(P),avatarImg:"".concat(D.avatar),avatarName:"".concat(D.uname),ctime:s.ctime,isUser:!0,isValueUser:1===s.value_user,handleEnterprofile:this.handleEnterprofile,item_detail:s,showOneFall:u,topping:d}),"ganswer"!==s.type&&"note"!==s.type?i.default.createElement("div",{className:(0,c.default)("desc",{active:"true"===u})},i.default.createElement(y.default,{maxHeight:64,style:{fontSize:"14px"},expandText:"...",expandStyle:R,onlyShowTextCollapse:"true",onExpand:function(){window.open("/item/detail/".concat(s.item_id,"?_source_page=").concat(P))}},i.default.createElement("a",{className:"desc-content",href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),target:"_blank",rel:"noopener noreferrer",onClick:this.handleGoDetail},"article"===s.type?s.summary||"发布文字":s.title))):null,"note"===s.type&&T>0?i.default.createElement("div",{className:(0,c.default)("desc",{active:"true"===u})},i.default.createElement(y.default,{maxHeight:64,style:{fontSize:"14px"},expandText:"...",expandStyle:R,onlyShowTextCollapse:"true",onExpand:function(){window.open("/item/detail/".concat(s.item_id,"?_source_page=").concat(P))}},i.default.createElement("a",{className:"desc-content",href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),target:"_blank",rel:"noopener noreferrer",onClick:this.handleGoDetail},s.plain||"发布图片"))):null,"note"===s.type&&0===T?i.default.createElement("div",{className:(0,c.default)("desc",{active:"true"===u})},i.default.createElement(y.default,{maxHeight:147,style:{fontSize:"14px"},expandText:"查看全部",expandStyle:{backgroundColor:"#fff",top:"128px",left:0,paddingLeft:0},onlyShowTextCollapse:"true",onExpand:function(){window.open("/item/detail/".concat(s.item_id,"?_source_page=").concat(P))}},i.default.createElement("a",{className:"desc-content",href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),target:"_blank",rel:"noopener noreferrer",onClick:this.handleGoDetail},s.plain||"发布图片"))):null,"note"===s.type?s.multi&&T?1===s.multi.length?i.default.createElement(b.default,{href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),srcs:s.multi,handleGoDetail:this.handleGoDetail,showOneFall:u}):2===s.multi.length?i.default.createElement(w.default,{href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),srcs:s.multi,handleGoDetail:this.handleGoDetail,showOneFall:u}):3===s.multi.length?i.default.createElement(E.default,{pic_num:T,href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),srcs:s.multi,handleGoDetail:this.handleGoDetail,showOneFall:u}):null:null:"video"===s.type?i.default.createElement(x.default,{src:s.cover,link:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),duration:s.video_info.duration,handleGoDetail:this.handleGoDetail,showOneFall:u}):"article"===s.type?i.default.createElement(k.default,{item_detail:s,href:"/item/detail/".concat(s.item_id,"?_source_page=").concat(P),title:s.title,content:s.content,handleGoDetail:this.handleGoDetail,showOneFall:u}):"ganswer"===s.type?"true"===u?i.default.createElement(C.default,{item_detail:s,isUser:!(D&&"user"!==D.type),isShowImg:s.multi&&s.multi.length,handleGoDetail:this.handleGoDetail,handleEnterprofile:this.handleEnterprofile}):i.default.createElement("div",{className:"ganswerImg"},i.default.createElement(O.default,{type:n,item_detail:s,isUser:!(D&&"user"!==D.type),isShowImg:s.multi&&s.multi.length,picNum:s.pic_num,handleGoDetail:this.handleGoDetail,showOneFall:u,handleEnterprofile:this.handleEnterprofile})):null,s.collection&&i.default.createElement("p",{className:(0,c.default)("item-collection-info",{active:"true"===u})},"来自合集",i.default.createElement("span",{style:{margin:"0 4px"}},"·"),i.default.createElement("a",{onClick:this.goSerialDetail,className:"item-collection-title"},s.collection.title),i.default.createElement(f.Icon,{type:"arrow-right"})),i.default.createElement("div",{className:(0,c.default)("tag_box",{active:"true"===u})},i.default.createElement(j.Tags,{item_detail:s,tagMessage:o,pageType:n,profile_id_query:L,handleEnterhashtag:this.handleEnterhashtag,handleHuoDong:this.handleHuoDong}))),i.default.createElement("div",{className:(0,c.default)("li-item-bottom",{active:"true"===u})},i.default.createElement("div",{className:"bottom"},i.default.createElement("div",{className:(0,c.default)("control","collect",{"is-collected":s.user_favored,active:"true"===u}),onClick:this.handleCollect},i.default.createElement("i",null),i.default.createElement("span",null,s.user_favored?"已收藏":"收藏")),i.default.createElement("div",{className:(0,c.default)("control share",{active:"true"===u})},i.default.createElement("div",{className:"share-box",onMouseEnter:function(){return e.handleSvg("share",!0)},onMouseLeave:function(){return e.handleSvg("share",!1)}},i.default.createElement(_.Share,{color:S?m.default.$K70:m.default.$K60}),i.default.createElement("span",null,s.share_count||"分享"),i.default.createElement("div",{className:"share-empty-place"}),i.default.createElement("div",{className:"showBox"},i.default.createElement("span",{className:"sina",onClick:function(){return e.handleShare(e.getInfo(N),"weibo")}}),i.default.createElement("span",{className:"qq",onClick:function(){return e.handleShare(e.getInfo(N),"qq")}}),i.default.createElement("span",{className:"wechat",onClick:function(){return e.handleShare(e.getInfo(N),"wechat")}}),i.default.createElement("span",{className:"qzone",onClick:function(){return e.handleShare(e.getInfo(N),"qq_zone")}})))),i.default.createElement("div",{className:(0,c.default)("control discuss",{active:"true"===u}),onClick:this.handleDiscuss,onMouseEnter:function(){return e.handleSvg("discuss",!0)},onMouseLeave:function(){return e.handleSvg("discuss",!1)}},i.default.createElement(_.Comment,{color:I?m.default.$K70:m.default.$K60}),i.default.createElement("span",null,A)),i.default.createElement("div",{className:(0,c.default)("control zan",{active:"true"===u}),onClick:this.handleZan},i.default.createElement("div",{className:(0,c.default)("i-zan-box",{textactive:s.user_liked})},i.default.createElement("i",{className:(0,c.default)({"i-zan-click":h,normal:!s.user_liked&&!h,active:s.user_liked&&!h})}),i.default.createElement("span",null," ",s.like_count||"点赞"))))))}}]),n}())||r;t.default=M},"./src/pages/pc/home/index/components/LineItem/svg.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TopIcon=t.Share=t.Comment=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n("./node_modules/react/index.js"));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Comment=function(e){var t=e.color,n=e.width,r=e.height,i=e.style,c=n?"0 0 ".concat(n," ").concat(r):"0 0 20 20",l=a({marginRight:"4px"},i);return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n||"20",height:r||"20",viewBox:c,style:l},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h20v20H0z"}),o.default.createElement("path",{d:"M0 0h20v20H0z"}),o.default.createElement("g",{transform:"translate(1.429 1.786)"},o.default.createElement("rect",{width:"7.143",height:"1.429",x:"5",y:"6.429",fill:t||"#999",rx:".714"}),o.default.createElement("rect",{width:"7.143",height:"1.429",x:"5",y:"9.643",fill:t||"#999",rx:".714"}),o.default.createElement("path",{stroke:t||"#999",strokeWidth:"1.429",d:"M8.571 16.071a7.5 7.5 0 1 0-7.5-7.5v4.643a2.857 2.857 0 0 0 2.858 2.857H8.57z"}))))};t.Share=function(e){var t=e.color,n=e.width,r=e.height,i=e.style,c=n?"0 0 ".concat(n," ").concat(r):"0 0 20 20",l=a({marginRight:"4px"},i);return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n||"20",height:r||"20",viewBox:c,style:l},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:t||"#999",d:"M17.857 2.857v4.286a.714.714 0 0 1-1.428 0V3.57h-3.572a.714.714 0 1 1 0-1.428h4.286c.394 0 .714.32.714.714z"}),o.default.createElement("path",{stroke:t||"#999",strokeLinecap:"round",strokeWidth:"1.429",d:"M9.643 2.857a7.5 7.5 0 1 0 7.5 7.5"}),o.default.createElement("path",{stroke:t||"#999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.429",d:"M17.143 2.857l-7.5 7.5"})))};t.TopIcon=function(){return o.default.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{fill:"#A1A1A6"},o.default.createElement("g",null,o.default.createElement("g",{transform:"translate(2.000000, 1.000000)"},o.default.createElement("path",{d:"M9.18795482,3.8390704 L14.9130383,10.3820229 C15.1648197,10.6697731 15.3036001,11.0391301 15.3036001,11.4214834 C15.3036001,12.293274 14.5968741,13 13.7250834,13 L12,13 L12,15.4214834 C12,16.293274 11.293274,17 10.4214834,17 L5.57851662,17 C4.70672597,17 4,16.293274 4,15.4214834 L4,13 L2.27491655,13 C1.89256329,13 1.52320624,12.8612196 1.23545608,12.6094382 C0.579366752,12.03536 0.512883565,11.0381122 1.08696173,10.3820229 L6.81204518,3.8390704 C6.8581922,3.78633094 6.90780007,3.73672307 6.96053953,3.69057604 C7.61662886,3.11649788 8.61387666,3.18298106 9.18795482,3.8390704 Z M8,5.51859226 L3.20376823,11 L5,11 C5.55228475,11 6,11.4477153 6,12 L6,15 L10,15 L10,12 C10,11.4477153 10.4477153,11 11,11 L12.7962318,11 L8,5.51859226 Z M13.5,0 C14.0522847,0 14.5,0.44771525 14.5,1 C14.5,1.55228475 14.0522847,2 13.5,2 L13.5,2 L2.5,2 C1.94771525,2 1.5,1.55228475 1.5,1 C1.5,0.44771525 1.94771525,0 2.5,0 L2.5,0 Z",id:"Combined-Shape"}))))))}},"./src/pages/pc/home/index/components/Tea/index.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.circleEvent=t.getCurrentPage=void 0;var o=n("./src/common/utils/tea.js");t.getCurrentPage=function(e){var t="";return"home"===e||"loginHome"===e?t="home":"follow"===e?t="follow":"circle"===e?t="hashtag":"profile"===e?t="profile":"illust"===e?t="draw":"cos"===e?t="cos":"novel"===e?t="article":"group"===e?t="discuss":"collection"===e&&(t="serial_detail"),t};t.circleEvent=function(e,t,n,r){var a=e,i=t.relative_wid;return a.wid=i>0?i:-1,a.hashtag_name=t.circle_name,a.hashtag_id=t.circle_id,a.hashtag_type=(0,o.getHashtagType)(t.circle_type),a[r]=1===n?"hot":"new",a}},"./src/pages/pc/home/index/components/WaterFalls/ActionConfirm.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("./node_modules/react/index.js")),a=i(n("./node_modules/classnames/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/WaterFalls/ActionConfirm.css");var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default.Component);var t=s(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={},o.handleDelete=o.handleDelete.bind(u(o)),o}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(n,[{key:"handleDelete",value:function(){var e=this.props,t=e.onDelete,n=e.handleHiddenConfirm;t(),n()}},{key:"render",value:function(){var e=this.props,t=e.confirmX,n=e.confirmY,o=e.showConfirm,i=e.handleHiddenConfirm;return r.default.createElement("div",{className:(0,a.default)("ui_confirm",{active:o}),style:t?{left:t,top:n}:{left:-500}},r.default.createElement("p",{className:"text"},"确认要删除?"),r.default.createElement("div",{className:"btn_box"},r.default.createElement("input",{className:"confirm",type:"button",value:"确认",onClick:this.handleDelete}),r.default.createElement("input",{className:"cancel",type:"button",value:"取消",onClick:i})))}}]),n}();t.default=d},"./src/pages/pc/home/index/components/WaterFalls/index.js":function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=m(n("./node_modules/react/index.js")),i=n("./node_modules/react-redux/es/index.js"),c=m(n("./node_modules/lodash.debounce/index.js")),l=m(n("./node_modules/classnames/index.js")),s=m(n("./src/common/components/pc/Loading/index.js")),u=m(n("./src/pages/pc/home/index/components/HomeOneFall/index.js")),f=m(n("./src/pages/pc/home/index/components/LiItemBox/index.js")),d=m(n("./src/pages/pc/home/index/components/WaterFalls/ActionConfirm.js"));function m(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n("./src/pages/pc/home/index/components/WaterFalls/style.css");var b=(0,i.connect)(function(e){return{circleType:e.page.type,selectCircle:e.page.selectCircle,isHasData:e.page.isHasData||e.page.hasMore}})(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,a.default.Component);var t=g(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={confirmX:null,confirmY:null,showConfirm:!1,colOneData:[],colTwoData:[],colThreeData:[],minLine:null,minLineNum:null,rowCount:null,listData:[],deleteComment:null,handleItemId:null,deleteSym:null,isFirstRender:!0,showLoading:!1},o.isLoad=!1;return["handleShowConfirm","handleHiddenConfirm","getHandleItemId","confirmDelete","commentAddOne","commentReduceOne","zanItemId","handleToggleCollect","shareItemId","handleScroll","handleResize","getMinLineNum","changeLoadStatus","pushData","renderData","initData","getList"].forEach(function(e){o[e]=o[e].bind(_(o))}),o.handleResizeThrottle=(0,c.default)(o.handleResize,200),o}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"handleShowConfirm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState({showConfirm:!1},function(){e.setState({confirmX:t,confirmY:n,showConfirm:!0})})}},{key:"handleHiddenConfirm",value:function(){this.state.showConfirm&&this.setState({confirmX:-500,confirmY:1e3,showConfirm:!1})}},{key:"getHandleItemId",value:function(e,t){this.setState({handleItemId:e,deleteSym:t})}},{key:"confirmDelete",value:function(){var e=this,t=this.state.deleteSym;"删除评论"===t?this.setState({deleteComment:"删除评论"},function(){e.setState({deleteComment:null})}):"删除回复"===t&&this.setState({deleteComment:"删除回复"},function(){e.setState({deleteComment:null})})}},{key:"commentAddOne",value:function(e){var t=this.state.listData.map(function(t){var n=t;return n.item_detail.item_id===e&&n.item_detail.reply_count++,n});this.setState({listData:t})}},{key:"commentReduceOne",value:function(e){var t=this.state.listData.map(function(t){var n=t;return n.item_detail.item_id===e&&n.item_detail.reply_count--,n});this.setState({listData:t})}},{key:"zanItemId",value:function(e,t){var n=this.state.listData.map(function(n){var o=n;return o.item_detail.item_id===e&&(o.item_detail.user_liked=!o.item_detail.user_liked,t?o.item_detail.like_count--:o.item_detail.like_count++),o});this.setState({listData:n})}},{key:"handleToggleCollect",value:function(e){var t=this.state.listData.map(function(t){var n=t;return n.item_detail.item_id===e&&(n.item_detail.user_favored=!n.item_detail.user_favored),n});this.setState({listData:t})}},{key:"shareItemId",value:function(e){var t=this.state.listData.map(function(t){var n=t;return n.item_detail.item_id===e&&n.item_detail.share_count++,n});this.setState({listData:t})}},{key:"getMaxline",value:function(e,t,n){for(var o=e?e.clientHeight:0,r={maxLineSymbol:"colOneData",height:o},a=[{maxLineSymbol:"colOneData",height:o},{maxLineSymbol:"colTwoData",height:t?t.clientHeight:0},{maxLineSymbol:"colThreeData",height:n?n.clientHeight:0}],i=1;i<a.length;i++)a[i].height>r.height&&(r=a[i]);return r}},{key:"getMinline",value:function(e,t,n,o){var r=e?e.clientHeight:0,a=t?t.clientHeight:0,i=n?n.clientHeight:0;if(3===o){for(var c=[{minLineSymbol:"colOneData",height:r,minLine:e},{minLineSymbol:"colTwoData",height:a,minLine:t},{minLineSymbol:"colThreeData",height:i,minLine:n}],l={minLine:e,minLineSymbol:"colOneData",height:r},s=1;s<c.length;s++)c[s].height<l.height&&(l=c[s]);return l}return 2===o?r>a?{minLine:t,minLineSymbol:"colTwoData"}:{minLine:e,minLineSymbol:"colOneData"}:{minLine:null,minLineSymbol:""}}},{key:"isElementInViewport",value:function(e){return e.getBoundingClientRect().bottom-200<=(window.innerHeight||document.documentElement.clientHeight)}},{key:"getMinLineNum",value:function(){var e=this.state.rowCount,t=this.colOne,n=this.colTwo,o=this.colThree,r=this.getMinline(t,n,o,e).minLineSymbol;"colOneData"===r?this.setState({minLineNum:0}):"colTwoData"===r?this.setState({minLineNum:1}):this.setState({minLineNum:2}),this.setState({showLoading:!0})}},{key:"changeLoadStatus",value:function(){this.isLoad=!1,this.setState({showLoading:!1})}},{key:"pushData",value:function(e,t,n,o,r){var a=this.colOne,i=this.colTwo,c=this.colThree,l=this.getMinline(a,i,c,r).minLineSymbol,s=o.length;if("colOneData"===l){if(2===r)for(var u=0;u<s;u++)u%2==0?e.push(o[u]):t.push(o[u]);else if(3===r)for(var f=0;f<s;f++)f%3==0?e.push(o[f]):f%3==1?t.push(o[f]):n.push(o[f])}else if("colTwoData"===l){if(2===r)for(var d=0;d<s;d++)d%2==0?t.push(o[d]):e.push(o[d]);else if(3===r)for(var m=0;m<s;m++)m%3==0?t.push(o[m]):m%3==1?n.push(o[m]):e.push(o[m])}else for(var p=0;p<s;p++)p%3==0?n.push(o[p]):p%3==1?t.push(o[p]):e.push(o[p]);this.setState({colOneData:e,colTwoData:t,colThreeData:n})}},{key:"handleScroll",value:function(){var e=this,t=this.state,n=t.minLine,o=t.rowCount,r=this.props,a=r.getNewMoreFollowFeed,i=r.getNewMoreDiscoverFeed,c=r.getMoreDiscoverFeed,l=r.getMoreDisplayCircle,s=r.getMoreSelfPosts,u=r.getMoreIllustFeed,f=r.getMoreNovelFeed,d=r.getMoreCollection,m=r.circleType,p=r.showOneFall,h=this.colOne,y=this.colTwo,g=this.colThree,_={home:c,loginHome:i,follow:a,circle:l,profile:s,illust:u,cos:u,novel:f,collection:d};if(n){if(this.isElementInViewport(n)&&"true"!==p&&!this.isLoad){this.getMinLineNum(),this.isLoad=!0;var v=_[m];v&&v().then(function(){e.changeLoadStatus()})}}else{var b=this.getMinline(h,y,g,o).minLine;this.setState({minLine:b})}}},{key:"handleResize",value:function(){var e=window.innerWidth||document.documentElement.clientWidth,t=this.state,n=t.rowCount,o=t.colOneData,r=t.colTwoData,a=t.colThreeData,i=this.colOne,c=this.colTwo,l=this.colThree;if(e>1520&&3!==n){this.setState(function(){return{rowCount:3}});var s=this.getMinline(i,c,l,this.state.rowCount).minLineSymbol,u=this.getMaxline(i,c,l).maxLineSymbol,f=o.length,d=r.length;if(f>1&&d>1)for(;"colThreeData"===s;){if("colOneData"===u){var m=o.pop();a.push(m),this.setState({colOneData:o,colThreeData:a})}else{var p=r.pop();a.push(p),this.setState({colTwoData:r,colThreeData:a})}s=this.getMinline(i,c,l,this.state.rowCount).minLineSymbol,u=this.getMaxline(i,c,l).maxLineSymbol}}else if(e<=1520&&2!==n)for(this.setState(function(){return{rowCount:2}});a.length;){var h=this.getMinline(i,c,l,this.state.rowCount).minLineSymbol,y=a.pop();"colOneData"===h?(o.push(y),this.setState({colOneData:o,colThreeData:a})):(r.push(y),this.setState({colTwoData:r,colThreeData:a}))}}},{key:"renderData",value:function(e){if(e){var t=this.state,n=t.listData,o=t.rowCount,r=n.length,a=e.slice(r),i=this.state,c=i.colOneData,l=i.colTwoData,s=i.colThreeData;this.setState({listData:e}),this.pushData(c,l,s,a,o)}}},{key:"initData",value:function(){var e=this;this.setState({colOneData:[],colTwoData:[],colThreeData:[],listData:[]},function(){e.isLoad=!1})}},{key:"getList",value:function(){var e=this,t=this.props,n=t.circleType,o=t.getNewMoreDiscoverFeed,r=t.getNewMoreFollowFeed,a=t.getNewMoreGroupFeed,i=t.getMoreSelfPosts,c=t.isHasData;if(!this.isLoad&&c)switch(this.isLoad=!0,n){case"loginHome":o().then(function(){e.isLoad=!1});break;case"follow":r().then(function(){e.isLoad=!1});break;case"group":a().then(function(){e.isLoad=!1});break;default:i().then(function(){e.isLoad=!1})}}},{key:"componentDidMount",value:function(){var e=this,t=null,n=this.props,o=n.columns,r=n.list;"2"===o?this.setState({rowCount:2},function(){e.renderData(r)}):(window.innerWidth||document.documentElement.clientWidth)<=1520?this.setState({rowCount:2},function(){e.renderData(r)}):this.setState({rowCount:3},function(){e.renderData(r)});window.addEventListener("scroll",function(){var n=e.props.setWaterHeight;n&&e.fallsBox&&n(Math.abs(e.fallsBox.getBoundingClientRect().top)),t&&clearTimeout(t),t=setTimeout(function(){e.handleScroll()},40)},!1),o&&"2"===o||window.addEventListener("resize",this.handleResizeThrottle,!1),this.getMinLineNum()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll,!1),window.removeEventListener("resize",this.handleResizeThrottle,!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.circleType,o=t.selectCircle;n!==e.circleType||o&&o.circle_name!==e.selectCircle.circle_name?this.initData():this.state.isFirstRender?this.setState({isFirstRender:!1}):this.renderData(e.list)}},{key:"render",value:function(){var e=this,t=this.props,n=t.columns,o=t.style,r=t.isHasData,i=t.isUseLayOut,c=t.showOneFall,m=this.state,h=m.confirmX,y=m.confirmY,g=m.showConfirm,_=m.colOneData,v=m.colTwoData,b=m.colThreeData,w=m.listData,E=m.minLineNum,x=m.handleItemId,k=m.deleteComment,O=m.showLoading,C=[[_,"colOne"],[v,"colTwo"],[b,"colThree"]];return a.default.createElement(a.default.Fragment,null,"true"===c?a.default.createElement(u.default,p({},this.props,{loadMore:this.getList,hasMore:r,renderData:w,handleItemId:x,deleteComment:k,handleShowConfirm:function(t,n){e.handleShowConfirm(t,n)},getHandleItemId:function(t,n){e.getHandleItemId(t,n)},commentAddOne:function(t){e.commentAddOne(t)},commentReduceOne:function(t){e.commentReduceOne(t)},zanItemId:function(t,n){e.zanItemId(t,n)},shareItemId:function(t){e.shareItemId(t)},onToggleCollect:this.handleToggleCollect})):a.default.createElement("div",{className:(0,l.default)({ul_box:!n||"2"!==n,twoColumn:"2"===n}),ref:function(t){return e.fallsBox=t}},C.map(function(t,c){var u=null;if(o&&"2"===n){var d=c===parseInt(n,10)-1?"0":o.marginRight;u={width:o.width,marginRight:d}}return a.default.createElement("ul",{className:(0,l.default)("li_wrap",{displayNone:"2"===n&&c===parseInt(n,10)}),style:u,key:t[1],ref:function(n){return e[t[1]]=n}},0===c?a.default.createElement("div",null,e.props.children):null,!!t[0].length&&t[0].map(function(t){return a.default.createElement(f.default,p({},e.props,{isUseLayOut:i,key:t.item_detail.item_id,handleItemId:x,item_id:t.item_detail.item_id,item_detail:t.item_detail,deleteComment:k,handleShowConfirm:function(t,n){e.handleShowConfirm(t,n)},getHandleItemId:function(t,n){e.getHandleItemId(t,n)},commentAddOne:function(t){e.commentAddOne(t)},commentReduceOne:function(t){e.commentReduceOne(t)},zanItemId:function(t,n){e.zanItemId(t,n)},shareItemId:function(t){e.shareItemId(t)},onToggleCollect:e.handleToggleCollect}))}),E===c&&r&&O?a.default.createElement(s.default,null):null)})),a.default.createElement(d.default,{isUseLayOut:i,confirmX:h,confirmY:y,showConfirm:g,handleHiddenConfirm:this.handleHiddenConfirm,onDelete:this.confirmDelete}))}}]),n}())||r;t.default=b},"./src/common/components/pc/TextCollapse/style.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/Comment/CommentList.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/Comment/Publishitem.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/Comment/style.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/HomeOneFall/style.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LiItemBox/style.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/Article.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/ChannelGanswer.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/Ganswer.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/OneImage.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/ThreeImage.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/ThreeRowImage.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/TwoImage.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/UserMessage.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/Video.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/LineItem/style.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/WaterFalls/ActionConfirm.css":function(e,t,n){n.r(t)},"./src/pages/pc/home/index/components/WaterFalls/style.css":function(e,t,n){n.r(t)}}]);
//# sourceMappingURL=src_pages_pc_home_index_components_WaterFalls_index_js-src_common_components_pc_EmojiSelector-b22cfa.4246a37aa0359efb9690.js.map
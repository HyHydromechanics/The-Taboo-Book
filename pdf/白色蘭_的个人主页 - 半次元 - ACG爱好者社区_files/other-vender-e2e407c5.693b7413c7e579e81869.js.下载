(self.webpackChunkfe_banciyuan_web=self.webpackChunkfe_banciyuan_web||[]).push([["other-vender-e2e407c5"],{"./node_modules/xgplayer/dist/index.min.js":function(module,__unused_webpack_exports,__webpack_require__){module.exports=function(){"use strict";function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getHandler(e,t){return function(n){var i=e,o="on"+e.charAt(0).toUpperCase()+e.slice(1);n.player=t,"error"===i?(t.errorHandler(i),t[o]&&"function"==typeof t[o]&&t[o](n)):(t.emit(i,n),t[o]&&"function"==typeof t[o]&&t[o](n)),"timeupdate"===i&&(t._currentTime=t.video&&t.video.currentTime),"durationchange"===e&&(t._duration=t.video.duration)}}function match(e,t){if(vendor)return vendor.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}function detect(){bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":""}function isUrl(e){return!!e&&e.indexOf&&/^http/.test(e)}function mergeIconClass(e,t){return"object"===(void 0===e?"undefined":_typeof(e))&&e.class&&"string"==typeof e.class?t+" "+e.class:t}function mergeIconAttr(e,t){return"object"===(void 0===e?"undefined":_typeof(e))&&e.attr&&"object"===_typeof(e.attr)&&Object.keys(e.attr).map(function(n){t[n]=e.attr[n]}),t}function createIcon(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=null;if(e instanceof window.Element)return util.addClass(e,n),Object.keys(i).map(function(t){e.setAttribute(t,i[t])}),e;if(isUrl(e)||isUrl(e.url))return i.src=isUrl(e)?e:e.url||"",o=util.createDom(e.tag||"img","",i,"xg-img "+n);if("function"==typeof e)try{return(o=e())instanceof window.Element?(util.addClass(o,n),Object.keys(i).map(function(e){o.setAttribute(e,i[e])}),o):(console.warn("[xgplayer]warn>>config of icons."+t+" is a function mast return an Element Object"),null)}catch(e){return null}return"string"==typeof e?util.createDomFromHtml(e,i,n):(console.warn("[xgplayer]warn>>config of icons."+t+" is invalid"),null)}function registerIconsObj(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map(function(i){var o=e[i]||{},r=o.class||"",s=o.attr||{},a=null;n&&n[i]&&(r=mergeIconClass(n[i],r),s=mergeIconAttr(n[i],s),a=createIcon(n[i],i,r,s)),a||(a=(a=o.icon?o.icon:o)instanceof window.Element?a:util.createDomFromHtml(a,s,r)),t.icons[i]=a})}function registerTextObj(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.langText,n,{get:function(){var i=t.lang;return e[n][i]||e[n].zh}})})}function getDefaultConfig(){return{id:"",el:null,url:"",width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,videoInit:!1,poster:"",defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,leavePlayerTime:0,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttrbutes:{},disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,controlsList:[],screenShot:!1,rotate:!1,pip:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],playbackRate:[.5,.75,1,1.5,2],icons:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:"",volumeColor:""}}}function addAnimate(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};AnimateMap[e]&&window.clearTimeout(AnimateMap[e].id),AnimateMap[e]={},n.start&&n.start(),AnimateMap[e].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(AnimateMap[e].id),delete AnimateMap[e]},t)}function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}function isUrl$1(e){return!!e&&e.indexOf&&/^http/.test(e)}function mergeIconClass$1(e,t){return"object"===(void 0===e?"undefined":_typeof(e))&&e.class&&"string"==typeof e.class?t+" "+e.class:t}function mergeIconAttr$1(e,t){return"object"===(void 0===e?"undefined":_typeof(e))&&e.attr&&"object"===_typeof(e.attr)&&Object.keys(e.attr).map(function(n){t[n]=e.attr[n]}),t}function createIcon$1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=null;if(e instanceof window.Element)return util.addClass(e,n),Object.keys(i).map(function(t){e.setAttribute(t,i[t])}),e;if(isUrl$1(e)||isUrl$1(e.url))return i.src=isUrl$1(e)?e:e.url||"",o=util.createDom(e.tag||"img","",i,"xg-img "+n);if("function"==typeof e)try{return(o=e())instanceof window.Element?(util.addClass(o,n),Object.keys(i).map(function(e){o.setAttribute(e,i[e])}),o):(console.warn("[xgplayer]warn>>config of icons."+t+" is a function mast return an Element Object"),null)}catch(e){return null}return"string"==typeof e?util.createDomFromHtml(e,i,n):(console.warn("[xgplayer]warn>>config of icons."+t+" is invalid"),null)}function registerIconsObj$1(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map(function(i){var o=e[i]||{},r=o.class||"",s=o.attr||{},a=null;n&&n[i]&&(r=mergeIconClass$1(n[i],r),s=mergeIconAttr$1(n[i],s),a=createIcon$1(n[i],i,r,s)),a||(a=(a=o.icon?o.icon:o)instanceof window.Element?a:util.createDomFromHtml(a,s,r)),t.icons[i]=a})}function registerTextObj$1(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.langText,n,{get:function(){var i=t.lang;return e[n][i]||e[n].zh}})})}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},_undefined=void 0,is=function(e){return void 0!==e&&null!==e},possibleTypes={object:!0,function:!0,undefined:!0},is$1=function(e){return!!is(e)&&hasOwnProperty.call(possibleTypes,typeof e)},is$2=function(e){if(!is$1(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},is$3=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!is$2(e)},classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString,is$4=function(e){return!!is$3(e)&&!classRe.test(functionToString.call(e))},isImplemented=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},isImplemented$1=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}},noop=function(){},_undefined$1=void 0,isValue=function(e){return void 0!==e&&null!==e},keys=Object.keys,shim=function(e){return keys(isValue(e)?Object(e):e)},keys$1=isImplemented$1()?Object.keys:shim,validValue=function(e){if(!isValue(e))throw new TypeError("Cannot use null or undefined");return e},max=Math.max,shim$1=function(e,t){var n,i,o,r=max(arguments.length,2);for(e=Object(validValue(e)),o=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},i=1;i<r;++i)t=arguments[i],keys$1(t).forEach(o);if(void 0!==n)throw n;return e},assign=isImplemented()?Object.assign:shim$1,forEach=Array.prototype.forEach,create=Object.create,process=function(e,t){var n;for(n in e)t[n]=e[n]},normalizeOptions=function(e){var t=create(null);return forEach.call(arguments,function(e){isValue(e)&&process(Object(e),t)}),t},str="razdwatrzy",isImplemented$2=function(){return"function"==typeof str.contains&&!0===str.contains("dwa")&&!1===str.contains("foo")},indexOf=String.prototype.indexOf,shim$2=function(e){return indexOf.call(this,e,arguments[1])>-1},contains=isImplemented$2()?String.prototype.contains:shim$2,d_1=createCommonjsModule(function(e){(e.exports=function(e,t){var n,i,o,r,s;return arguments.length<2||"string"!=typeof e?(r=t,t=e,e=null):r=arguments[2],is(e)?(n=contains.call(e,"c"),i=contains.call(e,"e"),o=contains.call(e,"w")):(n=o=!0,i=!1),s={value:t,configurable:n,enumerable:i,writable:o},r?assign(normalizeOptions(r),s):s}).gs=function(e,t,n){var i,o,r,s;return"string"!=typeof e?(r=n,n=t,t=e,e=null):r=arguments[3],is(t)?is$4(t)?is(n)?is$4(n)||(r=n,n=void 0):n=void 0:(r=t,t=n=void 0):t=void 0,is(e)?(i=contains.call(e,"c"),o=contains.call(e,"e")):(i=!0,o=!1),s={get:t,set:n,configurable:i,enumerable:o},r?assign(normalizeOptions(r),s):s}}),validCallable=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},eventEmitter=createCommonjsModule(function(e,t){var n,i,o,r,s,a,l,u=Function.prototype.apply,c=Function.prototype.call,h=Object.create,d=Object.defineProperty,f=Object.defineProperties,g=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0};s={on:n=function(e,t){var n;return validCallable(t),g.call(this,"__ee__")?n=this.__ee__:(n=p.value=h(null),d(this,"__ee__",p),p.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i=function(e,t){var i,r;return validCallable(t),r=this,n.call(this,e,i=function(){o.call(r,e,i),u.call(t,this,arguments)}),i.__eeOnceListener__=t,this},off:o=function(e,t){var n,i,o,r;if(validCallable(t),!g.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(i=n[e]))for(r=0;o=i[r];++r)o!==t&&o.__eeOnceListener__!==t||(2===i.length?n[e]=i[r?0:1]:i.splice(r,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:r=function(e){var t,n,i,o,r;if(g.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"==typeof o){for(n=arguments.length,r=new Array(n-1),t=1;t<n;++t)r[t-1]=arguments[t];for(o=o.slice(),t=0;i=o[t];++t)u.call(i,this,r)}else switch(arguments.length){case 1:c.call(o,this);break;case 2:c.call(o,this,arguments[1]);break;case 3:c.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,r=new Array(n-1),t=1;t<n;++t)r[t-1]=arguments[t];u.call(o,this,r)}}},a={on:d_1(n),once:d_1(i),off:d_1(o),emit:d_1(r)},l=f({},a),e.exports=t=function(e){return null==e?h(l):f(Object(e),a)},t.methods=s}),eventEmitter_1=eventEmitter.methods,map={function:!0,object:!0},isObject=function(e){return isValue(e)&&map[typeof e]||!1},validObject=function(e){if(!isObject(e))throw new TypeError(e+" is not an Object");return e},hasOwnProperty$1=Object.prototype.hasOwnProperty,allOff=function(e){var t,n=arguments[1];if(validObject(e),void 0===n)hasOwnProperty$1.call(e,"__ee__")&&delete e.__ee__;else{if(!(t=hasOwnProperty$1.call(e,"__ee__")&&e.__ee__))return;t[n]&&delete t[n]}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},set=function e(t,n,i,o){var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var s=Object.getPrototypeOf(t);null!==s&&e(s,n,i,o)}else if("value"in r&&r.writable)r.value=i;else{var a=r.set;void 0!==a&&a.call(o,i)}return i},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},util={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(e);return o.className=i,o.innerHTML=t,Object.keys(n).forEach(function(t){var i=t,r=n[t];"video"===e||"audio"===e||"mobile-video"===e?r&&o.setAttribute(i,r):o.setAttribute(i,r)}),o},createDomFromHtml:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var o=i.children;return i=null,o.length>0?(o=o[0],n&&util.addClass(o,n),t&&Object.keys(t).forEach(function(e){o.setAttribute(e,t[e])}),o):null}catch(e){return null}},hasClass:function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},addClass:function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)}):util.hasClass(e,t)||(e.className+=" "+t))},removeClass:function(e,t){e&&(e.classList?t.split(/\s+/g).forEach(function(t){e.classList.remove(t)}):util.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}))},toggleClass:function(e,t){e&&t.split(/\s+/g).forEach(function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)})},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(i){0===t.indexOf("#")&&(n=e.getElementById(t.slice(1)))}return n},getCss:function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},padStart:function(e,t,n){for(var i=String(n),o=t>>0,r=Math.ceil(o/i.length),s=[],a=String(e);r--;)s.push(i);return s.join("").substring(0,o-a.length)+a},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),i=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:util.deepCopy(e[n],t[n])}),e},deepMerge:function(e,t){return Object.keys(t).map(function(n){util.typeOf(e[n])!==util.typeOf(t[n])||null===e[n]||"object"!==_typeof(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):util.deepMerge(e[n],t[n])}),e},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},clearInterval:function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},createImgBtn:function(e,t,n,i){var o=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(o.style.backgroundImage='url("'+t+'")',n&&i){var r=void 0,s=void 0,a=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=e,1))}),o.style.width=""+r+a,o.style.height=""+s+a,o.style.backgroundSize=""+r+a+" "+s+a,o.style.margin="start"===e?"-"+s/2+a+" auto auto -"+r/2+a:"auto 5px auto 5px"}return o},Hex2RGBA:function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},getFullScreenEl:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},checkIsFunction:function(e){return e&&"function"==typeof e},checkIsObject:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))},hide:function(e){e.style.display="none"},show:function(e,t){e.style.display=t||"block"},isUndefined:function(e){if(void 0===e||null===e)return!0},setStyleFromCsstext:function(e,t){t.replace(/\s+/g,"").split(";").map(function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})}},version="3.0.0-alpha.29-28",ErrorTypes={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}},Errors=function e(t,n,i,o,r,s,a,l){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""},c=arguments[9],h=arguments[10];classCallCheck(this,e);var d={};if(arguments.length>1)d.playerVersion="3.0.0-alpha.29-28",d.errorType=t,d.domain=document.domain,d.duration=i,d.currentTime=n,d.networkState=o,d.readyState=r,d.currentSrc=a,d.src=s,d.ended=l,d.errd=u,d.ex=(ErrorTypes[t]||{}).msg,d.errorCode=c,d.mediaError=h;else{var f=arguments[0];Object.keys(f).map(function(e){d[e]=f[e]}),d.ex=(f.type&&ErrorTypes[f.type]||{}).msg}return d},PLAY="play",PLAYING="playing",ENDED="ended",PAUSE="pause",ERROR="error",SEEKING="seeking",SEEKED="seeked",TIME_UPDATE="timeupdate",WAITING="waiting",CANPLAY="canplay",CANPLAY_THROUGH="canplaythrough",DURATION_CHANGE="durationchange",VOLUME_CHANGE="volumechange",LOADED_DATA="loadeddata",RATE_CHANGE="rateChange",PROGRESS="progress",LOAD_START="loadstart",EMPTIED="emptied",STALLED="stalled",SUSPEND="suspend",ABORT="abort",BUFFER_CHANGE="bufferedChange",PLAYER_FOCUS="focus",PLAYER_BLUR="blur",READY="ready",URL_NULL="urlNull",AUTOPLAY_STARTED="autoplay_started",AUTOPLAY_PREVENTED="autoplay_was_prevented",COMPLETE="complete",REPLAY="replay",DESTROY="destroy",URL_CHANGE="urlchange",FULLSCREEN_CHANGE="fullscreen_change",CSS_FULLSCREEN_CHANGE="cssFullscreen_change",MINI_STATE_CHANGE="mini_state_change",DIFINITION_CHANGE="definition_change",BEFORE_DIFINITION_CHANGE="before_definition_change",AFTER_DIFINITION_CHANGE="after_definition_change",SEI_PARSED="SEI_PARSED",Events=Object.freeze({__proto__:null,PLAY:"play",PLAYING:"playing",ENDED:"ended",PAUSE:"pause",ERROR:"error",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",WAITING:"waiting",CANPLAY:"canplay",CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange",LOADED_DATA:"loadeddata",RATE_CHANGE:"rateChange",PROGRESS:"progress",LOAD_START:"loadstart",EMPTIED:"emptied",STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:"focus",PLAYER_BLUR:"blur",READY:READY,URL_NULL:"urlNull",AUTOPLAY_STARTED:"autoplay_started",AUTOPLAY_PREVENTED:"autoplay_was_prevented",COMPLETE:"complete",REPLAY:"replay",DESTROY:"destroy",URL_CHANGE:"urlchange",FULLSCREEN_CHANGE:"fullscreen_change",CSS_FULLSCREEN_CHANGE:"cssFullscreen_change",MINI_STATE_CHANGE:"mini_state_change",DIFINITION_CHANGE:"definition_change",BEFORE_DIFINITION_CHANGE:"before_definition_change",AFTER_DIFINITION_CHANGE:"after_definition_change",SEI_PARSED:"SEI_PARSED"}),VIDEO_EVENTS=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort"],Proxy=function(){function e(t){classCallCheck(this,e),this._hasStart=!1,this._currentTime=0,this._duration=0,this.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"]||t.x5VideoPlayerType,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttrbutes),t.loop&&(this.videoConfig.loop="loop"),t.defaultPlaybackRate&&(this.videoConfig.defaultPlaybackRate=t.defaultPlaybackRate),this.video=util.createDom(this.videoConfig.mediaType,"",this.videoConfig,""),t.autoplayMuted&&(this.video.muted=!0),t.autoplay&&(this.video.autoplay=!0),eventEmitter(this),this._interval={},this.attachVideoEvents()}return createClass(e,[{key:"attachVideoEvents",value:function(e){var t=this;this.evHandlers||(this._evHandlers=VIDEO_EVENTS.map(function(e){return defineProperty({},e,getHandler(e,t))})),e||(e=this.video),this._evHandlers.map(function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)})}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map(function(t){var n=Object.keys(t)[0];e.removeEventListener(Object.keys(t)[0],t[n],!1)})}},{key:"errorHandler",value:function(e){this.video&&this.video.error&&this.emit(e,new Errors("other",this.currentTime,this.duration,this.networkState,this.readyState,this.currentSrc,this.src,this.ended,{line:162,msg:this.error,handle:"Constructor"},this.video.error.code,this.video.error))}},{key:"destroy",value:function(){for(var e in this.pause(),this.video.removeAttribute("src"),this.video.load(),this._currentTime=0,this._duration=0,this._interval)clearInterval(this._interval[e]),this._interval[e]=null;this.emit("destroy"),this.detachVideoEvents(),allOff(this)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,n=t.buffered,i=t.currentTime;if(n)for(var o=0,r=n.length;o<r&&(e[0]=n.start(o),e[1]=n.end(o),!(e[0]<=i&&i<=e[1]));o++);return e[0]-i<=0&&i-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"bufferedPoint",get:function(){var e=this.video.buffered,t={start:0,end:0};if(!e||0===e.length)return t;for(var n=0;n<e.length;n++)if(e.start(n)<=this.currentTime&&e.end(n)>=this.currentTime)return{start:e.start(n),end:e.end(n)};return t}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this._currentTime},set:function(e){this.video.currentTime=e}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].cn}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.defaultPlaybackRate=e,this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){this.ended||this.emit("urlchange",e),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)?this.onWaiting():this.video.src=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}}]),e}(),sniffer={get device(){return sniffer.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r;return{isTablet:r,isPhone:s,isAndroid:i,isPc:!(s||i||n||r),isSymbian:n,isWindowsPhone:t,isFireFox:o}}},BasePlugin=function(){function e(t){classCallCheck(this,e),util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),this.__args=t,this.__events={},this.config=t.config||{},this.__init(t)}return createClass(e,null,[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}}]),createClass(e,[{key:"onPluginsReady",value:function(){}},{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{player:{get:function(){return t.player}},playerConfig:{get:function(){return t.player&&t.player.config}},pluginName:{get:function(){return t.pluginName?t.pluginName:n.constructor.pluginName}},logger:{get:function(){return t.player.logger}}})}},{key:"on",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(i){delete n.__events[e],n.player.off(i,t)})}},{key:"offAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=Object.keys(this.__events)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;this.__events[r]&&this.off(r,this.__events[r])}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"emit",value:function(e,t){this.player.emit(e,t)}},{key:"__destroy",value:function(){this.offAll(),util.checkIsFunction(this.destroy)&&this.destroy()}}]),e}();BasePlugin.Util=util,BasePlugin.Sniffer=sniffer,BasePlugin.Errors=Errors,BasePlugin.Events=Events;var pluginsManager={init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),this.pluginGroup||(this.pluginGroup={}),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{}}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then(function(t){var i=void 0;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},i)})])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var o=this.pluginGroup[i]._plugins,r=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported())return void console.warn("not supported plugin ["+s+"]");n.config||(n.config={}),t.defaultConfig&&Object.keys(t.defaultConfig).map(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])});var a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(r)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var d=c.value;if(s.toLowerCase()===d.toLowerCase()){n.config=Object.assign({},n.config,r[d]);break}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{o[s.toLowerCase()]&&(o[s.toLowerCase()].__destroy&&o[s.toLowerCase()].__destroy(),o[s.toLowerCase()]=null,console.warn("the is one plugin with same pluginName ["+s+"] exist, destroy the old instance"));var f=new t(n);return o[s.toLowerCase()]=f,o[s.toLowerCase()].func=t,f&&"function"==typeof f.afterCreate&&f.afterCreate(),f}catch(e){throw console.error(e),e}}},unRegister:function(e,t){try{this.pluginGroup[e]._plugins[t].__destroy(),this.pluginGroup[e]._plugins[t]=null}catch(n){this.pluginGroup[e]._plugins[t]=null}},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){if(!this.pluginGroup)return null;var n=e._pluginInfoId,i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){function t(e){return e&&e.then?e:new Promise(function(e){e()})}var n=this;return new Promise(function(i){if(n.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then(function(){var o=e._pluginInfoId,r=n.pluginGroup[o]._plugins,s=[],a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(r)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var d=c.value;if(r[d]&&r[d].beforePlayerInit)try{var f=r[d].beforePlayerInit();s.push(t(f))}catch(e){throw s.push(t(null)),e}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}Promise.all([].concat(s)).then(function(){i()}).catch(function(e){console.error(e),i()})})})},afterInit:function(e){if(this.pluginGroup){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n[l]&&n[l].afterPlayerInit&&n[l].afterPlayerInit()}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}},setLang:function(e,t){if(this.pluginGroup){var n=t._pluginInfoId,i=this.pluginGroup[n]._plugins,o=!0,r=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(o=(a=l.next()).done);o=!0)i[a.value].lang=e}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}}},reRender:function(e){var t=e._pluginInfoId,n={},i=this.pluginGroup[t]._plugins,o=!0,r=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;n[u]={plugin:i[u].func,options:i[u]._args},this.unRegister(t,u)}}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}var c=!0,h=!1,d=void 0;try{for(var f,g=Object.keys(n)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var p=f.value;this.register(t,p,n[p].plugin,n[p].options)}}catch(e){h=!0,d=e}finally{try{!c&&g.return&&g.return()}finally{if(h)throw d}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map(function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()})},destroy:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.unRegister(t,l)}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}delete this.pluginGroup[t]}},proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector,matchesSelector=match,closest=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(matchesSelector(i,t))return i;i=i.parentNode}},bind,unbind,prefix,bind_1,unbind_1,componentEvent={bind:function(e,t,n,i){return bind||detect(),e[bind](prefix+t,n,i||!1),n},unbind:function(e,t,n,i){return unbind||detect(),e[unbind](prefix+t,n,i||!1),n}},forceCaptureEvents=["focus","blur"],bind$1=function(e,t,n,i,o){return-1!==forceCaptureEvents.indexOf(n)&&(o=!0),componentEvent.bind(e,n,function(n){var o=n.target||n.srcElement;n.delegateTarget=closest(o,t,!0),n.delegateTarget&&i.call(e,n)},o)},unbind$1=function(e,t,n,i){-1!==forceCaptureEvents.indexOf(t)&&(i=!0),componentEvent.unbind(e,t,n,i)},Plugin=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return inherits(t,e),createClass(t,null,[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,o=Number(n),r=e instanceof window.Node;if(i){for(var s=0,a=null,l="";s<i;s++){a=t.children[s];var u=Number(a.getAttribute("data-index"));if(u>=o){l="beforebegin";break}u<o&&(l="afterend")}return r?"afterend"===l?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(l,e),"afterend"===l?t.children[t.children.length-1]:t.children[s]}return r?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"delegate",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.bindEL(e,t)}):this.bindEL(e,t);else if(3===arguments.length&&"function"==typeof n){if(!this.root)return;Array.isArray(t)?t.forEach(function(t){bind$1(i.root,e,t,n,!1)}):bind$1(this.root,e,t,n,!1)}}},{key:"removeDelegate",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t):"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){unbind$1(i.root,e,t,n)}):unbind$1(this.root,e,t,n))}},{key:"defaultConfig",get:function(){return{}}}]),createClass(t,[{key:"__init",value:function(e){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__init",this).call(this,e);var n=e.root,i=null;this.icons={},registerIconsObj(this.registerIcons()||{},this),this.langText={},registerTextObj(this.registerLangauageTexts()||{},this);var o="";try{o=this.render()}catch(e){throw new Error("Plugin:"+this.pluginName+":render:"+e.message)}if(o)i=t.insert(o,n,e.index);else{if(!e.tag)return;i=util.createDom(e.tag,"",e.attr,e.name),n.appendChild(i)}t.defineGetterOrSetter(this,{root:{get:function(){return i}},parent:{get:function(){return n}}});var r=this.config.attr||{},s=this.config.style||{};this.setAttr(r),this.setStyle(s),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registeChildren()}},{key:"__registeChildren",value:function(){if(this.root){var e=this.children();if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&(this._children||(this._children=[]),Object.keys(e).length>0)){var t=!0,n=!1,i=void 0;try{for(var o,r=Object.keys(e)[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,a=e[s],l={root:this.root},u=void 0,c=void 0;"function"==typeof a?(u=this.config[s]||{},c=a):"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof a.plugin&&(u=a.options?BasePlugin.Util.deepCopy(this.config[s]||{},a.options):this.config[s]||{},c=a.plugin),l.config=u,void 0!==u.index&&(l.index=u.index),u.root&&(l.root=u.root);var h=this.registerPlugin(c,l,s);this._children.push(h)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}}},{key:"changeLangTextKey",value:function(e,t){e.getAttribute&&e.setAttribute("lang-key",t),e.innerHTML=this.langText[t]}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root,n&&(t.pluginName=n);var i=pluginsManager.register(this.player,e,t);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLangauageTexts",value:function(){return{}}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this.player,e)}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,n,i){var o;(o=t.delegate).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"unbind",value:function(e,n,i){var o;(o=t.removeDelegate).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setStyle",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.style[e]=t;if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.style[l]=n[l]}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}}},{key:"setAttr",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.setAttribute(e,t);if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.setAttribute(l,n[l])}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHtml=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return console.warn(e),null}}},{key:"render",value:function(){return""}},{key:"__destroy",value:function(){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__destroy",this).call(this),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root))}},{key:"lang",set:function(e){var t=this;e!==this.config.lang&&(this.config.lang=e,this.root&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(this.root,function(n){var i=n.getAttribute&&n.getAttribute("lang-key");if(i&&t.langText[i]){var o=t.langText[i];n.innerHTML="function"==typeof o?o(e):o}}))},get:function(){return this.config.lang||this.playerConfig.lang||"zh"}}]),t}(BasePlugin);Plugin.ROOT_TYPES={CONTROLS:"controls",ROOT:"root"},Plugin.POSITIONS={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};var STATE_CLASS={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",NO_CONTROLS:"no-controls",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},usePreset=function(e,t){var n,i,o=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),r=o.plugins,s=void 0===r?[]:r,a=o.ignores,l=void 0===a?[]:a,u=o.icons,c=void 0===u?{}:u;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,toConsumableArray(s)),(i=e.config.ignores).push.apply(i,toConsumableArray(l)),Object.keys(c).map(function(t){e.config.icons[t]||(e.config.icons[t]=c[t])})},Events$1=Plugin.Events,Util=Plugin.Util,POSITIONS=Plugin.POSITIONS,Sniffer=Plugin.Sniffer,Controls=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls),e.config.mode||"mobile"!==Sniffer.device||(e.config.mode="flex")}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){var t={height:this.config.height+"px"};Object.keys(t).map(function(n){e.root.style[n]=t[n]}),this.left=this.find("left-grid"),this.center=this.find("center"),this.right=this.find("right-grid"),this.innerRoot=this.find("inner-controls"),this.on(Events$1.MINI_STATE_CHANGE,function(t){t?Util.addClass(e.root,"mini-controls"):Util.removeClass(e.root,"mini-controls")}),this.bind("mouseenter",function(t){e.mouseEnter(t)}),this.bind("mouseleave",function(t){e.mouseOut(t)}),this.bind(["click","touchend","touchmove"],function(e){e.preventDefault(),e&&e.stopPropagation()})}}},{key:"mouseEnter",value:function(){}},{key:"mouseOut",value:function(){}},{key:"focus",value:function(){this.player.emit(Events$1.PLAYER_FOCUS,{autoHide:!1})}},{key:"unFocus",value:function(){this.player.emit(Events$1.PLAYER_FOCUS,{autoHide:!0})}},{key:"blur",value:function(){this.player.emit(Events$1.PLAYER_BLUR,{ignoreStatus:!0})}},{key:"show",value:function(){this.root&&(this.root.style.display="inline-block")}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(this.root){var o=e.defaultConfig||{};if(!n.root){switch(n.config&&n.config.position?n.config.position:o.position){case POSITIONS.CONTROLS_LEFT:n.root=this.left;break;case POSITIONS.CONTROLS_RIGTH:n.root=this.right;break;case POSITIONS.CONTROLS_CENTER:n.root=this.center;break;case POSITIONS.CONTROLS:n.root=this.root;break;default:n.root=this.left}return get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"registerPlugin",this).call(this,e,n,i)}}}},{key:"render",value:function(){if(!this.config.disable){var e="flex"===this.config.mode?"flex-controls ":"";return'<xg-controls class="xgplayer-controls '+(e+=this.config.autoHide?"control_autohide":"")+'" unselectable="on" onselectstart="return false">\n    <inner-controls class="inner-controls">\n      <left-grid class="left-grid">\n      </Left-grid>\n      <center class="center"></center>\n      <right-grid class="right-grid">\n      </right-grid>\n    </inner-controls>\n    </xg-controls>'}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:""}}}]),t}(Plugin),FULLSCREEN_EVENTS=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Player=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.config=util.deepMerge(getDefaultConfig(),e),n.config.presets.length){var i=n.config.presets.indexOf("default");i>=0&&t.defaultPreset&&(n.config.presets[i]=t.defaultPreset)}else t.defaultPreset&&n.config.presets.push(t.defaultPreset);return n.userTimer=null,n.waitTimer=null,n.isReady=!1,n.isPlaying=!1,n.isSeeking=!1,n.isActive=!0,n.isCssfullScreen=!1,n._fullscreenEl=null,n._originCssText="",n._initDOM(),n._bindEvents(),n._registerPresets(),n._registerPlugins(),pluginsManager.onPluginsReady(n),setTimeout(function(){n.emit(READY),n.onReady&&n.onReady(),n.isReady=!0},0),(n.config.videoInit||n.config.autoplay)&&(n.hasStart||n.start()),n}return inherits(t,e),createClass(t,[{key:"_initDOM",value:function(){var e=this;if(this.root=util.findDom(document,"#"+this.config.id),!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit("error",new Errors("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),!1;this.root=t}this._initBars();var n=pluginsManager.register(this,Controls);if(this.controls=n,this.addClass(STATE_CLASS.DEFAULT+" xgplayer-"+sniffer.device+" "+STATE_CLASS.NO_START+" "+(this.config.controls?"":STATE_CLASS.NO_CONTROLS)),this.config.autoplay&&this.addClass(STATE_CLASS.ENTER),this.config.fluid){var i={"max-width":"100%",width:"100%",height:"0","padding-top":100*this.config.height/this.config.width+"%",position:"position",top:"0",left:"0"};Object.keys(i).map(function(t){e.root.style[t]=i[t]})}else["width","height"].map(function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]=e.config[t]+"px")})}},{key:"_initBars",value:function(){var e=this;this.topBar=util.createDom("xg-bar","","","xg-top-bar"),this.leftBar=util.createDom("xg-bar","","","xg-left-bar"),this.rightBar=util.createDom("xg-bar","","","xg-right-bar"),["click","touchend"].forEach(function(t){e.topBar.addEventListener(t,function(e){e&&e.stopPropagation()})}),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}),this.onFullscreenChange=function(){var t=util.getFullScreenEl();!t||t!==e._fullscreenEl&&"VIDEO"!==t.tagName?(e.fullscreen=!1,e._fullscreenEl=null,e._originCssText&&(util.setStyleFromCsstext(e.root,e._originCssText),e._originCssText=""),e.removeClass(STATE_CLASS.FULLSCREEN),e.emit("fullscreen_change",!1)):(e.fullscreen=!0,e.addClass(STATE_CLASS.FULLSCREEN),e.emit("fullscreen_change",!0))},FULLSCREEN_EVENTS.forEach(function(t){document&&document.addEventListener(t,e.onFullscreenChange)}),this.once("loadeddata",this.getVideoSize),this.mousemoveFunc=function(){e.config.closeFocusVideoFocus||(e.emit("focus"),e.video.focus())},"mobile"!==sniffer.device&&this.root.addEventListener("mousemove",this.mousemoveFunc),this.playFunc=function(){e.config.closePlayVideoFocus||(e.emit("focus"),e.video.focus())},this.once("play",this.playFunc);var t=this;t.once("destroy",function e(){var n=this;t.root.removeEventListener("mousemove",t.mousemoveFunc),FULLSCREEN_EVENTS.forEach(function(e){document.removeEventListener(e,n.onFullscreenChange)}),t.off("destroy",e)})}},{key:"_startInit",value:function(e){var t=this,n=this.root;e&&""!==e||this.emit("urlNull"),this.canPlayFunc=function(){t.volume="number"==typeof t.config.volume?t.config.volume:.6,t.off("canplay",t.canPlayFunc),t.removeClass(STATE_CLASS.ENTER)},"String"===util.typeOf(e)?this.video.src=e:e.forEach(function(e){t.video.appendChild(util.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))}),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc),n.firstChild!==this.video&&n.insertBefore(this.video,n.firstChild),this.config.autoplay&&(this.once("canplay",this.canPlayFunc),this.load(),!this.isPlaying&&this.play()),setTimeout(function(){t.emit("complete")},1),this.hasStart||pluginsManager.afterInit(this),this.hasStart=!0}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[],i=t.join("||").toLowerCase().split("||");n.map(function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return null;if(t.lazy&&t.loader){var o=pluginsManager.lazyRegister(e,t);return void(t.forceBeforeInit&&(o.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)}).catch(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)}),e._loadingPlugins.push(o)))}return e.registerPlugin(t)}catch(e){return console.error(e),null}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(t){usePreset(e,t)})}},{key:"registerPlugin",value:function(e){var t=null,n=null;e.plugin&&"function"==typeof e.plugin?(t=e.plugin,n=e.options):(t=e,n={});var i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(this.config)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(t.pluginName.toLowerCase()===l.toLowerCase()){n.config=Object.assign({},n.config,this.config[l]);break}}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}var u=n.position?n.position:n.config&&n.config.position||t.defaultConfig&&t.defaultConfig.position,c=Plugin.POSITIONS;if(!n.root&&"string"==typeof u&&u.indexOf("controls")>-1)return this.controls.registerPlugin(t,n,t.pluginName);if(!n.root)switch(u){case c.ROOT_RIGHT:n.root=this.rightBar;break;case c.ROOT_LEFT:n.root=this.leftBar;break;case c.ROOT_TOP:n.root=this.topBar;break;default:n.root=this.root}return pluginsManager.register(this,t,n)}},{key:"unRegistePlugin",value:function(){}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this,e)}},{key:"addClass",value:function(e){this.root&&(util.hasClass(this.root,e)||util.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&util.removeClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!this.hasStart)return this.hasStart=!0,pluginsManager.beforeInit(this).then(function(){return e||(e=t.url||t.config.url),t._startInit(e)}).catch(function(e){throw e.fileName="player",e.lineNumber="236",e})}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"play",value:function(){var e=this;if(this.hasStart){var n=get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this);return void 0!==n&&n&&n.then&&n.then(function(){console.log(">>>>playPromise.then"),e.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),e.removeClass(STATE_CLASS.NO_START),e.addClass(STATE_CLASS.PLAYING),e.config.closePlayVideoFocus&&!e.isPlaying&&e.emit("blur"),e.isPlaying=!0,e.emit("autoplay_started")}).catch(function(t){if(console.error(">>>>playPromise.catch",t),e.video.error)return e.onError(),void e.errorHandler("error");setTimeout(function(){e.emit("autoplay_was_prevented"),e.addClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),e.pause()},0)}),n}this.start().then(function(t){e.play()})}},{key:"seek",value:function(e){var t=this;this.video&&!isNaN(Number(e))&&(e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once("canplay",function(){t.isSeeking=!1,t.paused&&t.play()}),this.currentTime=e)}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play().catch(function(e){console.log(e)})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(pluginsManager.destroy(this),this.root.removeChild(this.topBar),this.root.removeChild(this.leftBar),this.root.removeChild(this.rightBar),get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.root.removeChild(this.video),e){var n=this.root.className.split(" ");n.length>0?this.root.className=n.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):this.root.className="",this.removeAttribute("data-xgfill")}for(var i in this)delete this[i]}},{key:"replay",value:function(){var e=this;this.removeClass(STATE_CLASS.ENDED),this.once("canplay",function(){var t=e.play();t&&t.catch&&t.catch(function(e){console.log(e)})}),this.currentTime=0,this.isSeeking=!1,this.play(),this.emit("replay")}},{key:"getFullscreen",value:function(e){var t=this.root,n=this.video;e||(e=t),sniffer.os.isPhone||(this._originCssText=t.style.cssText,t.removeAttribute("style")),this._fullscreenEl=e,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):n.webkitSupportsFullscreen?n.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():this.addClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"exitFullscreen",value:function(e){var t=this.root,n=this._originCssText;n&&util.setStyleFromCsstext(t,n),this._originCssText="",document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.removeClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"getCssFullscreen",value:function(){this.addClass(STATE_CLASS.CSS_FULLSCREEN),this._originCssText=this.root.style.cssText,this.root.removeAttribute("style"),this.isCssfullScreen=!0,this.emit("cssFullscreen_change",!0)}},{key:"exitCssFullscreen",value:function(){this.removeClass(STATE_CLASS.CSS_FULLSCREEN),this._originCssText&&util.setStyleFromCsstext(this.root,this._originCssText),this._originCssText="",this.emit("cssFullscreen_change",!1)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0};this.isActive=!0,this.removeClass(STATE_CLASS.ACTIVE),this.userTimer&&clearTimeout(this.userTimer),t.autoHide&&(this.userTimer=setTimeout(function(){e.emit("blur")},this.config.inactive))}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignoreStatus:!1};if(this.isActive){var t=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignoreStatus||t||!this.paused&&!this.ended)&&this.addClass(STATE_CLASS.ACTIVE)}}},{key:"onPlay",value:function(){this.removeClass(STATE_CLASS.PAUSED),this.ended&&this.removeClass(STATE_CLASS.ENDED),!this.config.closePlayVideoFocus&&this.emit("focus")}},{key:"onPause",value:function(){this.addClass(STATE_CLASS.PAUSED),this.userTimer&&clearTimeout(this.userTimer),!this.config.closePauseVideoFocus&&this.emit("focus")}},{key:"onEnded",value:function(){this.addClass(STATE_CLASS.ENDED),this.removeClass(STATE_CLASS.PLAYING)}},{key:"onError",value:function(){this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),this.removeClass(STATE_CLASS.NO_START),this.removeClass(STATE_CLASS.ENTER),this.addClass(STATE_CLASS.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking=!0,this.addClass(STATE_CLASS.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),this.removeClass(STATE_CLASS.LOADING),this.removeClass(STATE_CLASS.SEEKING),this.isPlaying||(this.addClass(STATE_CLASS.PLAYING),this.isPlaying=!0)}},{key:"onWaiting",value:function(){var e=this,t=this;t.waitTimer&&clearTimeout(t.waitTimer),t.waitTimer=setTimeout(function(){e.addClass(STATE_CLASS.LOADING)},500)}},{key:"onPlaying",value:function(){var e=this;this.waitTimer&&clearTimeout(this.waitTimer),[STATE_CLASS.NO_START,STATE_CLASS.PAUSED,STATE_CLASS.ENDED,STATE_CLASS.ERROR,STATE_CLASS.REPLAY,STATE_CLASS.LOADING].forEach(function(t){e.removeClass(t)})}},{key:"onTimeupdate",value:function(){this.waitTimer&&(clearTimeout(this.waitTimer),this.removeClass(STATE_CLASS.LOADING))}},{key:"getVideoSize",value:function(){var e=this.video.videoWidth,t=this.video.videoHeight,n=this.config,i=n.fitVideoSize,o=n.videoFillMode;if(t&&e){var r=this.root.getBoundingClientRect(),s=r.width,a=r.height,l=parseInt(e/t*1e3,10),u=parseInt(s/a*1e3,10);"auto"===i?u>l?this.root.style.height=s/l*1e3+"px":this.root.style.width=l*a/1e3+"px":"fixWidth"===i?this.root.style.height=s/l*1e3+"px":"fixHeight"===i&&(this.root.style.width=l*a/1e3+"px"),"fill"===o?this.setAttribute("data-xgfill","fill"):"fillHeight"===o&&u<l||"fillWidth"===o&&u>l||"cover"===o?this.setAttribute("data-xgfill","cover"):this.removeAttribute("data-xgfill")}}},{key:"plugins",get:function(){return pluginsManager.getPlugins(this)}},{key:"lang",set:function(e){this.config.lang=e,pluginsManager.setLang(e,this)},get:function(){return this.config.lang}},{key:"version",get:function(){return"3.0.0-alpha.29-28"}},{key:"url",set:function(e){this.__url=e},get:function(){return this.__url||this.config.url}},{key:"poster",set:function(e){var t=util.findDom(this.root,".xgplayer-poster");t&&(t.style.backgroundImage="url("+e+")")}},{key:"fullscreen",get:function(){return this._isFullScreen},set:function(e){this._isFullScreen=e}},{key:"bullet",get:function(){return!!util.findDom(this.root,"xg-bullet")&&util.hasClass(util.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function(){return util.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function(){return util.hasClass(this.root,"xgplayer-pip-active")}}],[{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}]),t}(Proxy);Player.Util=util,Player.Sniffer=sniffer,Player.Errors=Errors,Player.Events=Events,Player.Plugin=Plugin,Player.BasePlugin=BasePlugin;var ReplaySvg='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',Replay=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{replay:{jp:"リプレイ",en:"rePlay",zh:"重播"}}}},{key:"afterCreate",value:function(){var e=this;Plugin.insert(this.icons.replay,this.root,0);var t=function(t){t.preventDefault(),t.stopPropagation(),e.player.replay(),Plugin.Util.removeClass(e.player.root,"replay")};this.bind("svg","click",t),this.bind(".xgplayer-replay-txt","click",t),this.on(Plugin.Events.ENDED,function(){if(e.playerConfig.loop||Plugin.Util.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}}),this.on(Plugin.Events.PLAY,function(){e.hide()})}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="replay">'+(this.langText.replay||"重播")+"</xg-replay-txt>\n    </xg-replay>"}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),t}(Plugin),Events$2=Plugin.Events,Util$1=Plugin.Util,Poster=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"object"===_typeof(e.player.config.poster)?e.config=e.player.config.poster:e.config={poster:e.player.config.poster}}},{key:"afterCreate",value:function(){var e=this;this.on(Events$2.ENDED,function(){e.isEndedShow||Util$1.addClass(e.root,"hide")}),this.on(Events$2.Play,function(){Util$1.removeClass(e.root,"hide")})}},{key:"render",value:function(){var e=this.config.poster;return e?'<xg-poster class="xgplayer-poster" style="background-image:url('+e+')">\n    </xg-poster>':""}},{key:"isEndedShow",set:function(e){this.config.isEndedShow=e},get:function(){return this.config.isEndedShow}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,poster:""}}}]),t}(Plugin),PlaySvg='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',PauseSvg='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',Util$2=Plugin.Util,Events$3=Plugin.Events,AnimateMap={},Start=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.autoPlayStart=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAmimate:!1,mode:"hide"}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(Events$3.READY,function(){n&&(n.lang&&"en"===n.lang?Util$2.addClass(t.root,"lang-is-en"):"jp"===n.lang&&Util$2.addClass(t.root,"lang-is-jp"))}),this.on(Events$3.AUTOPLAY_STARTED,function(){e.autoPlayStart=!0,e.onPlayPause("play")}),n.autoplay||this.show(),this.on(Events$3.AUTOPLAY_PREVENTED,function(){e.setAttr("data-state","play"),e.show()}),this.on(Events$3.PLAY,function(){e.onPlayPause("play")}),this.on(Events$3.PAUSE,function(){e.onPlayPause("pause")}),this.onClick=this.onClick.bind(this),this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{startPlay:{icon:PlaySvg,class:"xg-icon-play"},startPause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".icon",e.startPlay),this.appendChild(".icon",e.startPause)}},{key:"hide",value:function(){Util$2.addClass(this.root,"hide")}},{key:"show",value:function(){Util$2.removeClass(this.root,"hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;if(this.config.isShowPause&&this.player.paused&&!this.player.ended||this.config.isShowEnd&&this.player.ended)return this.show(),void this.switchStatus();this.player.disableAmimate||this.config.disableAnimate||addAnimate("pauseplay",400,{start:function(){Util$2.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){Util$2.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"onClick",value:function(e){var t=this.player;e.preventDefault(),e.stopPropagation(),t.isReady&&(!this.player.paused&&t.isPlaying?t.pause():t.play())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(n.isPlaying&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"===t.mode)return void this.switchStatus();if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.show(),void this.switchStatus();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClick)}},{key:"render",value:function(){return'\n    <xg-start class="xgplayer-start '+("auto"===this.config.mode?"auto-hide":"hide")+'">\n      <div class="icon">\n      </div>\n    </xg-start>'}}]),t}(Plugin),Events$4=Plugin.Events,Util$3=Plugin.Util,Enter=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterPlayerInit",value:function(){var e=this,t=this.player,n=this.playerConfig;n.autoplay&&n.videoInit||(this.once(Events$4.CANPLAY,function(){e.isCanPlay=!0}),this.on(Events$4.PLAY,function(){e.isCanPlay||t.addClass("xgplayer-is-enter")}))}},{key:"show",value:function(){Util$3.addClass(this.bindEL,"show")}},{key:"hide",value:function(){Util$3.removeClass(this.bindEL,"show")}},{key:"render",value:function(){var e=this.config.innerHtml,t=Util$3.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'+i+'"></div>';t.innerHTML='<div class="xgplayer-enter-spinner">'+n+"</div>"}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),t}(Plugin),css_248z='.xgplayer.xgplayer-mini {\n  position: fixed;\n  width: 320px;\n  height: 180px;\n  z-index: 91; }\n  .xgplayer.xgplayer-mini:hover {\n    cursor: move; }\n    .xgplayer.xgplayer-mini:hover .xg-mini-layer {\n      display: block; }\n\n.xgplayer.xgplayer-ended .xg-mini-layer {\n  display: none; }\n\n.xgplayer .xg-mini-layer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .xgplayer .xg-mini-layer .mask {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, .4); }\n  .xgplayer .xg-mini-layer xg-mini-header {\n    display: -webkit-flex;\n    display: -moz-box;\n    display: flex;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 40px;\n    -moz-box-sizing: border-box;\n         box-sizing: border-box;\n    padding: 10px 3px 0 8px;\n    -webkit-justify-content: space-between;\n       -moz-box-pack: justify;\n            justify-content: space-between;\n    color: #ffffff;\n    font-size: 14px;\n    position: absolute;\n    z-index: 22; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-pip-disableBtn {\n      pointer-events: all; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini {\n      display: none;\n      position: relative; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label {\n      cursor: pointer;\n      position: relative;\n      display: -webkit-flex;\n      display: -moz-box;\n      display: flex;\n      -webkit-align-items: center;\n         -moz-box-align: center;\n              align-items: center; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label::before {\n      content: "";\n      color: #ff142b;\n      background-color: transparent;\n      border-radius: 2px;\n      border: solid 1px #cdcdcd;\n      width: 16px;\n      height: 16px;\n      display: inline-block;\n      text-align: center;\n      vertical-align: middle;\n      line-height: 16px;\n      margin-right: 7px; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label:after {\n      content: "";\n      position: absolute;\n      width: 4px;\n      height: 8px;\n      border-color: #ff142b;\n      border-style: solid;\n      border-width: 0px 2px 2px 0px;\n      -webkit-transform: rotate(45deg);\n          -ms-transform: rotate(45deg);\n              transform: rotate(45deg);\n      left: 6px;\n      top: 5px; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn xg-tips {\n      position: absolute;\n      padding: 4px 6px;\n      white-space: nowrap;\n      bottom: -30px;\n      right: 15px;\n      border-radius: 4px;\n      background-color: rgba(0, 0, 0, .54);\n      display: none; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover xg-tips {\n      display: block; }\n  .xgplayer .xg-mini-layer .mini-cancel-btn {\n    cursor: pointer;\n    display: block;\n    color: #fff;\n    width: 40px;\n    height: 38px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    text-align: center;\n    line-height: 38px; }\n  .xgplayer .xg-mini-layer .play-icon {\n    cursor: pointer;\n    height: 48px;\n    width: 48px;\n    position: absolute;\n    background: rgba(0, 0, 0, .54);\n    border-radius: 24px;\n    top: 50%;\n    left: 50%;\n    margin: -24px 0 0 -24px; }\n    .xgplayer .xg-mini-layer .play-icon svg {\n      width: 50px;\n      height: 50px;\n      fill: #faf7f7; }\n  .xgplayer .xg-mini-layer .xg-icon-play {\n    display: none; }\n  .xgplayer .xg-mini-layer .xg-icon-pause {\n    display: block; }\n  .xgplayer .xg-mini-layer[data-state=pause] .xg-icon-play {\n    display: block; }\n  .xgplayer .xg-mini-layer[data-state=pause] .xg-icon-pause {\n    display: none; }\n\n.xgplayer .xgplayer-miniicon {\n  position: relative;\n  outline: none;\n  display: block; }\n  .xgplayer .xgplayer-miniicon .name {\n    text-align: center;\n    font-size: 13px;\n    line-height: 20px;\n    height: 20px;\n    color: rgba(255, 255, 255, .8);\n    line-height: 40px; }\n    .xgplayer .xgplayer-miniicon .name span {\n      font-size: 13px;\n      width: 60px;\n      height: 20px;\n      line-height: 20px;\n      background: rgba(0, 0, 0, .38);\n      border-radius: 10px;\n      display: inline-block;\n      vertical-align: middle; }\n';styleInject('.xgplayer.xgplayer-mini {\n  position: fixed;\n  width: 320px;\n  height: 180px;\n  z-index: 91; }\n  .xgplayer.xgplayer-mini:hover {\n    cursor: move; }\n    .xgplayer.xgplayer-mini:hover .xg-mini-layer {\n      display: block; }\n\n.xgplayer.xgplayer-ended .xg-mini-layer {\n  display: none; }\n\n.xgplayer .xg-mini-layer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .xgplayer .xg-mini-layer .mask {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, .4); }\n  .xgplayer .xg-mini-layer xg-mini-header {\n    display: -webkit-flex;\n    display: -moz-box;\n    display: flex;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 40px;\n    -moz-box-sizing: border-box;\n         box-sizing: border-box;\n    padding: 10px 3px 0 8px;\n    -webkit-justify-content: space-between;\n       -moz-box-pack: justify;\n            justify-content: space-between;\n    color: #ffffff;\n    font-size: 14px;\n    position: absolute;\n    z-index: 22; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-pip-disableBtn {\n      pointer-events: all; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini {\n      display: none;\n      position: relative; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label {\n      cursor: pointer;\n      position: relative;\n      display: -webkit-flex;\n      display: -moz-box;\n      display: flex;\n      -webkit-align-items: center;\n         -moz-box-align: center;\n              align-items: center; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label::before {\n      content: "";\n      color: #ff142b;\n      background-color: transparent;\n      border-radius: 2px;\n      border: solid 1px #cdcdcd;\n      width: 16px;\n      height: 16px;\n      display: inline-block;\n      text-align: center;\n      vertical-align: middle;\n      line-height: 16px;\n      margin-right: 7px; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label:after {\n      content: "";\n      position: absolute;\n      width: 4px;\n      height: 8px;\n      border-color: #ff142b;\n      border-style: solid;\n      border-width: 0px 2px 2px 0px;\n      -webkit-transform: rotate(45deg);\n          -ms-transform: rotate(45deg);\n              transform: rotate(45deg);\n      left: 6px;\n      top: 5px; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn xg-tips {\n      position: absolute;\n      padding: 4px 6px;\n      white-space: nowrap;\n      bottom: -30px;\n      right: 15px;\n      border-radius: 4px;\n      background-color: rgba(0, 0, 0, .54);\n      display: none; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover xg-tips {\n      display: block; }\n  .xgplayer .xg-mini-layer .mini-cancel-btn {\n    cursor: pointer;\n    display: block;\n    color: #fff;\n    width: 40px;\n    height: 38px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    text-align: center;\n    line-height: 38px; }\n  .xgplayer .xg-mini-layer .play-icon {\n    cursor: pointer;\n    height: 48px;\n    width: 48px;\n    position: absolute;\n    background: rgba(0, 0, 0, .54);\n    border-radius: 24px;\n    top: 50%;\n    left: 50%;\n    margin: -24px 0 0 -24px; }\n    .xgplayer .xg-mini-layer .play-icon svg {\n      width: 50px;\n      height: 50px;\n      fill: #faf7f7; }\n  .xgplayer .xg-mini-layer .xg-icon-play {\n    display: none; }\n  .xgplayer .xg-mini-layer .xg-icon-pause {\n    display: block; }\n  .xgplayer .xg-mini-layer[data-state=pause] .xg-icon-play {\n    display: block; }\n  .xgplayer .xg-mini-layer[data-state=pause] .xg-icon-pause {\n    display: none; }\n\n.xgplayer .xgplayer-miniicon {\n  position: relative;\n  outline: none;\n  display: block; }\n  .xgplayer .xgplayer-miniicon .name {\n    text-align: center;\n    font-size: 13px;\n    line-height: 20px;\n    height: 20px;\n    color: rgba(255, 255, 255, .8);\n    line-height: 40px; }\n    .xgplayer .xgplayer-miniicon .name span {\n      font-size: 13px;\n      width: 60px;\n      height: 20px;\n      line-height: 20px;\n      background: rgba(0, 0, 0, .38);\n      border-radius: 10px;\n      display: inline-block;\n      vertical-align: middle; }\n');var POSITIONS$1=Plugin.POSITIONS,MiniScreenIcon=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"registerLangauageTexts",value:function(){return{miniscreen:{jp:"日文text",en:"miniscreen",zh:"小屏幕"}}}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="miniscreen">'+this.langText.miniscreen+"</span></div>\n      </xg-icon>"}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$1.CONTROLS_RIGTH,index:10}}}]),t}(Plugin),Util$4=Plugin.Util,Events$5=Plugin.Events,MiniScreen=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.isMini=!1;var i=n.config;return n.pos={left:i.left<0?window.innerWidth-i.width-20:i.left,top:i.top<0?window.innerHeight-i.height-20:i.top,height:n.config.height,width:n.config.width},n.coordinate={currentX:0,currentY:0,scrollY:window.scrollY||0},n.lastStyle=null,n.isMoveing=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;["onMousemove","onMousedown","onMouseup","onCancelClick","onCenterClick","onScroll"].map(function(t){e[t]=e[t].bind(e)}),this.initIcons(),this.on(Events$5.PAUSE,function(){e.setAttr("data-state","pause")}),this.on(Events$5.PLAY,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};this.miniIcon=t.controls.registerPlugin(MiniScreenIcon,n,MiniScreenIcon.pluginName)}this.bind(".mini-cancel-btn","click",this.onCancelClick),this.bind(".play-icon","click",this.onCenterClick),this.config.disableDrag||this.bind("mousedown",this.onMousedown),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:PlaySvg,class:"xg-icon-play"},pause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"onCancelClick",value:function(e){this.exitMini()}},{key:"onCenterClick",value:function(e){var t=this.player;t.paused?t.play():t.pause()}},{key:"onScroll",value:function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-this.coordinate.scrollY)<50)){var t=parseInt(Util$4.getCss(this.player.root,"height"));t+=this.config.scrollTop,this.coordinate.scrollY=window.scrollY,window.scrollY>t+5&&!this.isMini?this.getMini():window.scrollY<=t&&this.isMini&&this.exitMini()}}},{key:"onMousedown",value:function(e){e.target!==this.root||this.isMoveing||(this.isMoveing=!0,this.coordinate.currentX=e.clientX,this.coordinate.currentY=e.clientY,this.bind("mouseup",this.onMouseup),this.bind("mousemove",this.onMousemove))}},{key:"onMouseup",value:function(e){if(e.target===this.root&&this.isMoveing){this.isMoveing=!1,this.clientWidth=window.innerWidth;var t=this.config.target||this.player.root;this.pos.top=parseInt(Util$4.getCss(t,"top")),this.pos.left=parseInt(Util$4.getCss(t,"left")),this.unbind("mousemove",this.onMousemove),this.unbind("mouseup",this.onMouseup)}}},{key:"onMousemove",value:function(e,t){e=e||window.event;var n=this.config.target||this.player.root,i=window.innerHeight-parseInt(Util$4.getCss(n,"height")),o=window.innerWidth-parseInt(Util$4.getCss(n,"width"));if(this.isMoveing){var r=e.clientX,s=e.clientY,a=r-this.coordinate.currentX,l=s-this.coordinate.currentY,u=parseInt(this.pos.top)+l,c=parseInt(this.pos.left)+a;return c<0?c=0:c>o&&(c=o),u<0?u=0:u>i&&(u=i),n.style.left=c+"px",n.style.top=u+"px","function"==typeof t&&t(c,u),e.preventDefault&&e.preventDefault(),!1}}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Util$4.addClass(t.root,"xgplayer-mini"),Object.keys(this.pos).map(function(t){e.lastStyle[t]=i.style[t],i.style[t]=e.pos[t]+"px"}),n.fluid&&(i.style["padding-top"]=""),this.emit(Events$5.MINI_STATE_CHANGE,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Util$4.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(t){i.style[t]=e.lastStyle[t]}),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]=100*n.height/n.width+"%"),this.emit(Events$5.MINI_STATE_CHANGE,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){this.unbind("mousedown",this.onMousedown),window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <div class="mask"></div>\n      <xg-mini-header class="xgplayer-mini-header">\n        <div>按住画面可移动小窗</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">X</div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>'}}]),t}(Plugin),Events$6=BasePlugin.Events,Util$5=BasePlugin.Util,PCPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;["onVideoClick","onVideoDblClick","onContextmenu"].map(function(t){e[t]&&(e[t]=e[t].bind(e))}),this.initEvents(),this.playerConfig.autoplay&&this.onEnter()}},{key:"initEvents",value:function(){var e=this,t=this.player;t.root.addEventListener("click",this.onVideoClick,!1),t.video.addEventListener("dblclick",this.onVideoDblClick,!1),t.video.addEventListener("contextmenu",this.onContextmenu,!1),this.once(Events$6.CANPLAY,this.onEntered.bind(this)),this.once(Events$6.AUTOPLAY_PREVENTED,function(){e.onAutoPlayPrevented()})}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"onEnter",value:function(){var e=this.player;Util$5.addClass(e.root,"xgplayer-is-enter")}},{key:"onEntered",value:function(){var e=this.player;Util$5.removeClass(e.root,"xgplayer-is-enter")}},{key:"onAutoPlayPrevented",value:function(){var e=this,t=this.player;Util$5.removeClass(t.root,"xgplayer-is-enter"),this.once(Events$6.PLAY,function(){Util$5.addClass(t.root,"xgplayer-is-enter"),e.once(Events$6.TIME_UPDATE,function(){Util$5.removeClass(t.root,"xgplayer-is-enter")})})}},{key:"onVideoClick",value:function(e){e.preventDefault(),this.config.closeVideoStopPropagation||e.stopPropagation();var t=this.player,n=0,i=void 0;t.config.closeVideoClick||(n++,i&&clearTimeout(i),1===n?i=setTimeout(function(){if(Util$5.hasClass(t.root,"xgplayer-nostart"))return!1;t.ended||(t.paused?t.play():t.pause()),n=0},200):n=0)}},{key:"onVideoDblClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;t.config.closeVideoDblclick||(t.fullscreen?t.exitFullscreen():t.getFullscreen())}},{key:"onControlMouseEnter",value:function(){var e=this.player;e.userTimer&&clearTimeout(e.userTimer)}},{key:"onControlMouseLeave",value:function(){var e=this.player;e.config.closeControlsBlur||e.emit("focus",e)}},{key:"destroy",value:function(){var e=this.player;e.root.removeEventListener("click",this.onVideoClick,!1),e.video.removeEventListener("dblclick",this.onVideoDblClick,!1),e.video.removeEventListener("contextmenu",this.onContextmenu,!1),e.off("ready",this.onReady)}}],[{key:"pluginName",get:function(){return"pc"}}]),t}(BasePlugin),Util$6=Plugin.Util,Thumbnail=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.interval=null,n.rowIndex=0,n.colIndex=0,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:0,width:0,scale:1,className:"",hidePortrait:!1}}}]),createClass(t,[{key:"afterCreate",value:function(){this.initThumbnail()}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.scale,o=e.className,r=e.hidePortrait;o&&Util$6.addClass(this.root,o),r&&Util$6.addClass(this.root,"portrait"),t&&(this.root.style.width=t*i+"px"),n&&(this.root.style.height=n*i+"px")}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(this.playerConfig.thumbnail){var r=this.root.getBoundingClientRect(),s=r.width,a=r.height,l=this.config,u=l.pic_num,c=l.urls,h=l.row,d=l.col,f=l.scale;if(!(u<=0)&&c&&0!==c.length){this.interval=this.player.duration/u;var g=Math.floor(e/this.interval),p=g+1-d*h*(Math.ceil((g+1)/(d*h))-1),y=Math.ceil(p/h)-1,v=p-y*h-1,m=null;t&&i&&(m=(m=(m=t-s*f/2)>0?m:0)<i-s*f?m:i-s*f);var b={backgroundImage:"url("+c[Math.ceil((g+1)/(d*h))-1]+")","background-position":"-"+v*s+"px -"+y*a+"px"};null!==m&&(b.left=m+"px"),Object.keys(b).map(function(e){n.root.style[e]=b[e]}),Object.keys(o).map(function(e){n.root.style[e]=o[e]}),this.show()}}}},{key:"show",value:function(){Util$6.addClass(this.root,"show")}},{key:"hide",value:function(){Util$6.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-thumbnail class="thumbnail">\n    </div>'}}]),t}(Plugin),Events$7=Plugin.Events,Util$7=Plugin.Util,ACTIONS={AUTO:"auto",SEEKING:"seeking"},MobilePlugin=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isTouchMove=!1,n.isTouchStart=!1,n.pos={x:0,y:0,time:0,volume:0,light:0,width:0,height:0,scopeL:0,scopeR:0,op:0},n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:10,scopeL:.4,scopeR:.4,darkness:!0,maxDarkness:.6,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!0,hideControlsEnd:!1}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;if(Util$7.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.xgMask=Util$7.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail(),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.root.addEventListener("touchstart",this.onTouchStart),this.once(Events$7.AUTOPLAY_PREVENTED,function(){e.onAutoPlayPrevented()}),this.once(Events$7.CANPLAY,this.onEntered.bind(this)),t.autoplay&&this.onEnter(),!n.disableActive){var o=i.plugins.progress;o&&(o.addDragCallBack("drag",function(t){e.activeSeekNote(t.currentTime)}),o.addDragCallBack("dragend",function(){e.changeAction(ACTIONS.AUTO)}))}}},{key:"registerThumbnail",value:function(){this.playerConfig.thumbnail&&(this.thumbnailPlugin=this.registerPlugin(Thumbnail,{root:this.find(".time-preview")}))}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".curbar").style.backgroundColor=t,this.find(".cur").style.color=t),n&&(this.find(".bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Util$7.addClass(this.find(".bar"),"hide")}},{key:"changeAction",value:function(e){this.root.setAttribute("data-xg-action",e)}},{key:"onEnter",value:function(){var e=this.player;Util$7.addClass(e.root,"xgplayer-is-enter")}},{key:"onEntered",value:function(){var e=this.player;Util$7.removeClass(e.root,"xgplayer-is-enter")}},{key:"onAutoPlayPrevented",value:function(){var e=this,t=this.player;Util$7.removeClass(t.root,"xgplayer-is-enter"),this.once(Events$7.PLAY,function(){Util$7.addClass(t.root,"xgplayer-is-enter"),e.once(Events$7.TIME_UPDATE,function(){Util$7.removeClass(t.root,"xgplayer-is-enter")})})}},{key:"getTouche",value:function(e){return e&&e.length>0?e[e.length-1]:null}},{key:"onTouchStart",value:function(e){var t=this.player,n=this.config,i=this.pos,o=this.playerConfig;if(!(t.duration!==1/0&&t.duration>0)||this.isTouchStart)return!0;Util$7.checkIsFunction(o.disableSwipeHandler)&&o.disableSwipeHandler(),this.find(".dur").innerHTML=Util$7.format(t.duration),this.isTouchStart=!0,n.stopPropagation||(e.preventDefault(),e.stopPropagation());var r=this.getTouche(e.touches);r&&(i.x=parseInt(r.pageX,10),i.y=parseInt(r.pageY,10),i.time=1e3*t.currentTime,i.volume=100*t.volume,i.width=parseInt(Util$7.getCss(this.root,"width"),10),i.height=parseInt(Util$7.getCss(this.root,"height"),10)-48,i.scopeL=n.scopeL*i.width,i.scopeR=(1-n.scopeR)*i.width,this.root.addEventListener("touchmove",this.onTouchMove,!1),this.root.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"onTouchMove",value:function(e){var t=this.getTouche(e.touches),n=this.pos,i=this.config,o=this.player;if(t&&!i.disableGesture&&(Math.abs(t.pageX-this.pos.x)>this.config.miniMoveStep||Math.abs(t.pageY-n.y)>this.config.miniMoveStep)){i.hideControlsActive?o.emit(Events$7.PLAYER_BLUR):o.emit(Events$7.PLAYER_FOCUS,{autoHide:!1});var r=parseInt(t.pageX,10),s=parseInt(t.pageY,10),a=r-n.x,l=s-n.y,u=Math.abs(l)/Math.abs(a);i.gestureY&&u>1.73&&(r<n.scopeL||r>n.scopeR)?(e.preventDefault(),e.stopPropagation(),r<n.scopeL&&i.darkness?(n.op=3,this.updateBrightness(l/n.height)):(n.op=2,this.updateVolume(l/n.height))):i.gestureX&&u<.27&&(e.preventDefault(),e.stopPropagation(),n.op=1,this.updateTime(a/n.width)),n.x=r,n.y=s,i.updateGesture&&"function"==typeof i.updateGesture&&i.updateGesture({diffx:a,diffy:l,x:r,y:s},n),this.isTouchMove=!0}}},{key:"onTouchEnd",value:function(e){var t=this.root,n=this.player,i=this.pos,o=this.config,r=this.playerConfig;if(t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),Util$7.checkIsFunction(r.enableSwipeHandler)&&r.enableSwipeHandler(),this.isTouchMove){e.preventDefault(),e.stopPropagation();var s=i.time/1e3;1===i.op&&n.seek(Number(s).toFixed(1)),setTimeout(function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()},10),i.op=0,!o.hideControlsEnd&&this.player.emit(Events$7.PLAYER_FOCUS)}else n.isActive&&o.stopPropagation&&(e.preventDefault(),e.stopPropagation()),!r.closeVideoClick&&n.isActive?this.switchPlayPause(e):n.isActive?this.player.emit(Events$7.PLAYER_BLUR):this.player.emit(Events$7.PLAYER_FOCUS);this.changeAction(ACTIONS.AUTO),this.isTouchStart=!1,this.isTouchMove=!1}},{key:"updateTime",value:function(e){var t=this.player;e=Number(e.toFixed(4));var n=parseInt(e*t.duration*1e3,10);n=(n+=this.pos.time)<0?0:n>1e3*t.duration?1e3*t.duration:n,t.getPlugin("time")&&t.getPlugin("time").updateTime(n/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(n/1e3/this.player.duration,!0),this.activeSeekNote(n/1e3),this.config.isTouchingSeek&&t.seek(Number(n/1e3).toFixed(1)),this.pos.time=n}},{key:"updateVolume",value:function(e){var t=this.pos,n=this.player,i=t.volume-parseInt(100*e);t.volume=i<1?0:i>100?100:i,n.volume=t.volume/100,t.volume>0&&(n.muted=!1)}},{key:"updateBrightness",value:function(e){var t=this.pos,n=this.config,i=this.xgMask,o=t.light-.8*e;o=o>n.maxDarkness?n.maxDarkness:o<0?0:o,i&&(i.style.backgroundColor="rgba(0,0,0,"+o+")"),t.light=o}},{key:"activeSeekNote",value:function(e){var t=this.player,n=this.config,i=!(t.duration!==1/0&&t.duration>0);!e||"number"!=typeof e||i||n.disableActive||(e<0?e=0:e>this.player.duration&&(e=this.player.duration),this.changeAction(ACTIONS.SEEKING),this.find(".dur").innerHTML=Util$7.format(t.duration),this.find(".cur").innerHTML=Util$7.format(e),this.find(".curbar").style.width=e/t.duration*100+"%",this.thumbnailPlugin&&this.thumbnailPlugin.update(e))}},{key:"switchPlayPause",value:function(){var e=this.player;if(!e.hasStart)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"destroy",value:function(){var e=this.root,t=this.player;this.thumbnailPlugin=null,t.root.removeChild(this.xgMask),this.xgMask=null,e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1)}},{key:"render",value:function(){return'\n     <xg-trigger class="trigger">\n     <div class="'+("normal"!==this.config.gradient?"gradient "+this.config.gradient:"gradient")+'"></div>\n        <div class="time-preview">\n            <span class="cur">00:00</span>\n            <span>/</span>\n            <span class="dur">00:00</span>\n            <div class="bar timebar">\n              <div class="curbar"></div>\n            </class>\n        </div>\n     </xg-trigger>\n    '}}]),t}(Plugin),Keyboard=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map(function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map(function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])}):e.keyCodeMap[n]=t[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.onKeydown=this.onKeydown.bind(this),this.onBodyKeyDown=this.onBodyKeyDown.bind(this),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map(function(o){n.keyCodeMap[o]&&e===n.keyCodeMap[o].keyCode&&(i=!t||t&&!n.keyCodeMap[o].noBodyTarget)}),i}},{key:"downVolume",value:function(){var e=this.player;e.volume-.1>=0?e.volume=parseFloat((e.volume-.1).toFixed(1)):e.volume=0}},{key:"upVolume",value:function(){var e=this.player;e.volume+.1<=1?e.volume=parseFloat((e.volume+.1).toFixed(1)):e.volume=1}},{key:"seek",value:function(){var e=this.player;e.currentTime+this.seekStep<=e.duration?e.currentTime+=this.seekStep:e.currentTime=e.duration-1}},{key:"seekBack",value:function(){var e=this.player;e.currentTime-this.seekStep>=0?e.currentTime-=this.seekStep:e.currentTime=0}},{key:"playPause",value:function(){var e=this.player;e.paused?e.play():e.pause()}},{key:"exitFullscreen",value:function(){var e=this.player;e.fullscreen&&e.exitFullscreen(),e.isCssfullScreen&&e.exitCssFullscreen()}},{key:"onBodyKeyDown",value:function(e){if(!this.config.disable){var t=e||window.event,n=t.keyCode;return!(t.target!==document.body||!this.checkCode(n,!0)||(t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,this.handleKeyCode(n),1))}}},{key:"onKeydown",value:function(e){if(!this.config.disable){var t=this.player,n=e||window.event;if(!n||37!==n.keyCode&&!this.checkCode(n.keyCode)||n.target!==this.player.root&&n.target!==this.player.video&&n.target!==this.player.controls.el)return!0;t.emit("focus"),n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,this.handleKeyCode(n.keyCode)}}},{key:"handleKeyCode",value:function(e){var t=this,n=this.player;40!==e&&38!==e||n.controls,Object.keys(this.keyCodeMap).map(function(n){if(t.keyCodeMap[n].keyCode===e&&!t.keyCodeMap[n].disable)if("function"==typeof t.keyCodeMap[n].action)t.keyCodeMap[n].action();else if("string"==typeof t.keyCodeMap[n].action){var i=t.keyCodeMap[n].action;"function"==typeof t[i]&&t[i]()}})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,keyCodeMap:{},disable:!1}}}]),t}(BasePlugin),loadingIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n',POSITIONS$2=Plugin.POSITIONS,Loading=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{loadingIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'}}},{key:"afterCreate",value:function(){this.appendChild(this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$2.ROOT}}}]),t}(Plugin),defaultDot={time:10,text:"",duration:1,style:{},color:"#fff"},Util$8=Plugin.Util,Events$8=Plugin.Events,ProgressDot=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dotsList={},n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"progressDots"}},{key:"defaultConfig",get:function(){return{dots:[]}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$8.CANPLAY,function(){var t=e.config.dots;t&&Array.isArray(t)&&(t.map(function(t){e.createDotDom(t)}),e.initEvents())})}},{key:"initEvents",value:function(){}},{key:"addDot",value:function(e,t,n){var i=null;i=1===arguments.length&&"object"===(void 0===e?"undefined":_typeof(e))?arguments[0]:{time:e,text:t,duration:n},i=Util$8.deepCopy(arguments[0],defaultDot),this.createDotDom(i)}},{key:"removeDot",value:function(e){var t=this.player;if(e>=0&&e<=t.duration&&this.dotsList[e]){var n=this.dotsList[e];n.parentNode.removeChild(n),n=null,this.dotsList[e]=null}}},{key:"removeAllProgressDots",value:function(){var e=this;Object.keys(this.dotsList).forEach(function(t){if(e.dotsList[t]){var n=e.dotsList[t];n.parentNode.removeChild(n),n=null,e.dotsList[t]=null}})}},{key:"createDotDom",value:function(e){var t=this.player,n=Util$8.createDom("xg-progress-dot",e.text?'<span class="xgplayer-progress-tip">'+e.text+"</span>":"",{},"xgplayer-progress-dot"),i=e.style||{};i.left=e.time/t.duration*100+"%",i.width=Math.min(e.duration,t.duration-e.time)/t.duration*100+"%",Object.keys(i).map(function(e){n.style[e]=i[e]}),this.dotsList[e.time]=n,this.root.appendChild(n)}},{key:"render",value:function(){return"<xg-dots></xg-dots>"}},{key:"destroy",value:function(){}}]),t}(Plugin),Events$9=Plugin.Events,Util$9=Plugin.Util,POSITIONS$3=Plugin.POSITIONS,Sniffer$1=Plugin.Sniffer,Progress=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.useable=!1,n.isProgressMoving=!1,n.__dragCallBacks=[],n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$3.CONTROLS_CENTER,index:0,progressDot:[],thumbnail:null,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,onMoveStart:function(){},onMoveEnd:function(){}}}}]),createClass(t,[{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.progress&&(e.config.disable=!e.player.config.progress)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||("mobile"===Sniffer$1.device&&(this.config.isDragingSeek=!1),this.playedBar=this.find(".xgplayer-progress-played"),this.cachedBar=this.find(".xgplayer-progress-cache"),this.pointTip=this.find(".xgplayer-progress-point"),this.progressBtn=this.find(".xgplayer-progress-btn"),this.initCustomStyle(),this.registerThumbnail(),this.on(Events$9.TIME_UPDATE,function(){e.onTimeupdate()}),this.on(Events$9.SEEKED,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on([Events$9.PROGRESS,Events$9.ENDED],function(){e.onCacheUpdate()}),this.bindDomEvents())}},{key:"children",value:function(){return{ProgressDots:{plugin:ProgressDot,options:{root:this.find("xg-outer"),dots:this.playerConfig.progressDot||this.config.progressDot}}}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.cachedColor,i=e.sliderBtnStyle,o=e.progressColor,r=this.playedBar,s=this.cachedBar,a=this.progressBtn;t&&(r.style.backgroundImage="initilal",r.style.background=t),n&&(s.style.background=n),o&&(this.find(".xgplayer-progress-outer").style.backgroundColor=o),i&&("string"==typeof i?a.style.boxShadow=i:"object"===(void 0===i?"undefined":_typeof(i))&&Object.keys(i).map(function(e){a.style[e]=i[e]}))}},{key:"addDragCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"registerThumbnail",value:function(){var e=this.playerConfig.thumbnail;e&&"mobile"!==Sniffer$1.device&&(e.className="progress-thumbnail xg-tips",this.thumbnailPlugin=this.registerPlugin(Thumbnail,{root:this.find(".xgplayer-progress-played")}))}},{key:"bindDomEvents",value:function(){this.mouseDown=this.mouseDown.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),"mobile"===Sniffer$1.device?this.root.addEventListener("touchstart",this.mouseDown,!1):(this.root.addEventListener("mousedown",this.mouseDown,!1),this.root.addEventListener("mouseenter",this.mouseEnter,!1))}},{key:"mouseDown",value:function(e){var t=this,n=this.player,i=this.config,o=this.playerConfig,r=this.pointTip;if(!n.isMini&&!i.closeMoveSeek){if(e.preventDefault(),e.stopPropagation(),Util$9.checkIsFunction(o.disableSwipeHandler)&&o.disableSwipeHandler(),Util$9.event(e),e.target===r||!o.allowSeekAfterEnded&&n.ended)return!0;Util$9.checkIsFunction(i.onMoveStart)&&i.onMoveStart(),n.emit(Events$9.PLAYER_FOCUS,{autoHide:!1}),this.isProgressMoving=!0,Util$9.addClass(this.progressBtn,"moving"),this.computeWidth(e,!1);var s=function(e){e.preventDefault(),e.stopPropagation(),Util$9.event(e),t.isProgressMoving=!0,t.computeWidth(e,!0)},a=function e(n){var i=t.player,r=t.config;n.preventDefault(),n.stopPropagation(),Util$9.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),Util$9.event(n),Util$9.removeClass(t.progressBtn,"moving"),"mobile"===Sniffer$1.device?(t.root.removeEventListener("touchmove",s),t.root.removeEventListener("touchend",e)):(t.root.removeEventListener("mousemove",s),t.root.removeEventListener("mouseup",e),t.root.removeEventListener("mouseleave",e)),Util$9.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),t.computeWidth(n,!1),setTimeout(function(){t.resetSeekState()},10),t.triggerCallbacks("dragend",{}),i.emit(Events$9.PLAYER_FOCUS)};return"mobile"===Sniffer$1.device?(this.root.addEventListener("touchmove",s,!1),this.root.addEventListener("touchend",a,!1)):(this.root.addEventListener("mousemove",s),this.root.addEventListener("mouseup",a),this.root.addEventListener("mouseleave",a)),!0}}},{key:"mouseEnter",value:function(e){var t=this.player;t.isMini||!t.config.allowSeekAfterEnded&&t.ended||(this.root.addEventListener("mousemove",this.mouseMove,!1),this.root.addEventListener("mouseleave",this.mouseLeave,!1))}},{key:"mouseLeave",value:function(e){var t=this.player,n=this.root,i=this.pointTip,o=this.thumbnailPlugin;t.isMini||(i.style.display="none",o&&o.hide(),n.removeEventListener("mousemove",this.mouseMove,!1),n.removeEventListener("mouseleave",this.mouseLeave,!1))}},{key:"mouseMove",value:function(e){var t=this.player,n=this.thumbnailPlugin,i=this.root.getBoundingClientRect(),o=i.left,r=i.width,s=(e.clientX-o)/r*t.duration;s=s<0?0:s,this.pointTip.textContent=Util$9.format(s);var a=this.pointTip.getBoundingClientRect().width,l=e.clientX-o-a/2;l=(l=l>0?l:0)>r-a?r-a:l,this.pointTip.style.left=l+"px",e.target&&"xgplayer-progress-dot"===e.target.className?this.pointTip.style.display="none":this.pointTip.style.display="block",n&&n.update(s,e.clientX,r)}},{key:"computeWidth",value:function(e,t){var n=this.root.getBoundingClientRect().width,i=this.player,o=this.config,r=this.playedBar.getBoundingClientRect().left,s=e.clientX-r;s>n&&(s=n);var a=s/n,l=a*this.player.duration,u=a*i.duration;t&&this.triggerCallbacks("drag",{percent:a,currentTime:l}),this.updatePercent(s/n),this.updateTime(u),t&&!o.isDragingSeek||"video"===i.videoConfig.mediaType&&i.seek(Number(u).toFixed(1))}},{key:"updateTime",value:function(e){var t=this.player;e>t.duration?e=t.duration:e<0&&(e=0);var n=t.plugins.time;n&&n.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){this.isProgressMoving=!0,this.config.disable||(this.playedBar.style.width=100*e+"%")}},{key:"compute",value:function(e){var t=this.root.getBoundingClientRect().left,n=this.root.getBoundingClientRect().width,i=this.pointTip.getBoundingClientRect().width,o=e.clientX-t-i/2;o=(o=o>0?o:0)>n-i?n-i:o,this.pointTip.style.left=o+"px"}},{key:"triggerCallbacks",value:function(e,t){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(n){n.type===e&&n.handler(t)})}},{key:"onTimeupdate",value:function(){var e=this.player;e.isSeeking||this.isProgressMoving||"audio"===e.videoConfig.mediaType&&e.dash||(this.playedBar.style.width=100*e.currentTime/e.duration+"%")}},{key:"onCacheUpdate",value:function(){var e=this.player,t=e.bufferedPoint;this.cachedBar.style.width=t.end/e.duration*100+"%"}},{key:"destroy",value:function(){this.thumbnailPlugin=null,"mobile"===Sniffer$1.device?this.root.removeEventListener("touchstart",this.mouseDown,!1):(this.root.removeEventListener("mousedown",this.mouseDown,!1),this.root.removeEventListener("mouseenter",this.mouseEnter,!1))}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-progress class="xgplayer-progress">\n        <xg-outer class="xgplayer-progress-outer">\n          <xg-cache class="xgplayer-progress-cache" style="width:0">\n          </xg-cache>\n          <xg-played class="xgplayer-progress-played" style="width:0">\n            <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n            <xg-point class="xgplayer-progress-point xg-tips">00:00</xg-point>\n          </xg-played>\n        </xg-outer>\n      </xg-progress>\n    '}}]),t}(Plugin),Events$a=Plugin.Events,POSITIONS$4=Plugin.POSITIONS,Play=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(Events$a.PAUSE,function(){e.animate(t.paused)}),this.on(Events$a.PLAY,function(){e.animate(t.paused)}))}},{key:"registerLangauageTexts",value:function(){return{play:{jp:"プレイ",en:"play",zh:"播放"},pause:{jp:"一時停止",en:"pause",zh:"暂停"}}}},{key:"registerIcons",value:function(){return{play:{icon:PlaySvg,class:"xg-icon-play"},pause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return t.paused?t.play():t.pause(),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),"play")):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),"pause"))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="play">'+(this.player.paused?this.langText.play:this.langText.pause)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$4.CONTROLS_LEFT,index:0,disable:!1}}}]),t}(Plugin),BackSVG='<svg width="28px" height="40px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',POSITIONS$5=Plugin.POSITIONS,Util$a=Plugin.Util,TopBackIcon=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){e.config.onClick(t)},this.bind("touchend",this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:'<svg width="28px" height="40px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;console.log("icons.screenBack",e.screenBack),this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){Util$a.addClass(this.root,"show")}},{key:"hide",value:function(){Util$a.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$5.ROOT_TOP,index:0}}}]),t}(Plugin),FullScreenSvg='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',ExitFullScreenSvg='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',Events$b=Plugin.Events,POSITIONS$6=Plugin.POSITIONS,Sniffer$2=Plugin.Sniffer,Fullscreen=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.fullscreen&&(e.config.disable=!e.player.config.fullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.isFullScreen=this.player.isFullScreen,this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick),this.on(Events$b.FULLSCREEN_CHANGE,function(t){e.changeLangTextKey(e.find(".xg-tips"),t?"exitFullscreen":"fullscreen"),e.animate(t)}),"mobile"===Sniffer$2.device&&this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:TopBackIcon,options:{config:{onClick:function(t){e.show(),e.btnClick(t)}}}})))}},{key:"registerLangauageTexts",value:function(){return{fullscreen:{jp:"フルスクリーン",en:"Fullscreen",zh:"进入全屏"},exitFullscreen:{jp:"フルスクリーン",en:"Exit fullscreen",zh:"退出全屏"}}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',class:"xg-get-fullscreen"},exitFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"btnClick",value:function(e){var t=this.player,n=this.config,i=!1;if((!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen())&&(i=!0),i)t.fullscreen?(t.exitCssFullscreen(),t.fullscreen=!1,this.emit(Events$b.FULLSCREEN_CHANGE,!1)):(t.getCssFullscreen(),t.fullscreen=!0,this.emit(Events$b.FULLSCREEN_CHANGE,!0)),this.animate(t.fullscreen);else{if(n.switchCallback&&"function"==typeof n.switchCallback)return n.switchFullScreen(this.isFullScreen),void(this.isFullScreen=!this.isFullScreen);t.fullscreen?t.exitFullscreen(n.target):t.getFullscreen(n.target)}}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"hide",value:function(){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="fullscreen">'+(this.player.isFullScreen?this.langText.exitFullscreen:this.langText.fullscreen)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$6.CONTROLS_RIGTH,index:0,useCssFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),t}(Plugin),Util$b=Plugin.Util,Events$c=Plugin.Events,POSITIONS$7=Plugin.POSITIONS,Time=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isActiving=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$7.CONTROLS_LEFT,index:2,disable:!1}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Events$c.DURATION_CHANGE,function(){e.onTimeUpdate()}),this.on(Events$c.TIME_UPDATE,function(){e.onTimeUpdate()}))}},{key:"show",value:function(){"flex"!==this.mode&&get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!this.config.disable&&!this.isActiving){var t=e.currentTime;"flex"===this.mode?(this.centerCurDom.innerHTML=Util$b.format(t),e.duration!==1/0&&(this.centerDurDom.innerHTML=Util$b.format(e.duration))):(this.timeDom.innerHTML=Util$b.format(t),e.duration!==1/0&&(this.durationDom.innerHTML=Util$b.format(e.duration)))}}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=Util$b.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Util$b.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.player,t=this.config;e.duration===1/0||this.playerConfig.isLive?(Util$b.hide(this.durationDom),Util$b.hide(this.timeDom),Util$b.hide(this.find(".time-separator")),Util$b.show(this.find(".time-live-tag"))):Util$b.hide(this.find(".time-live-tag")),t.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(Util$b.hide(this.durationDom),Util$b.hide(this.timeDom),Util$b.hide(this.find(".time-separator")),Util$b.show(this.find(".time-live-tag"))):(Util$b.hide(this.find(".time-live-tag")),Util$b.show(this.find(".time-separator")),Util$b.show(this.durationDom),Util$b.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0;var t=this.player;if(!(!e&&0!==e||e>t.duration))return"flex"===this.mode?void(this.centerCurDom.innerHTML=Util$b.format(e)):void(this.timeDom.innerHTML=Util$b.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(Events$c.SEEKED,n),t.isSeeking?this.once(Events$c.SEEKED,n):this.isActiving=!1}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">直播</span>\n    </xg-icon>'}}]),t}(Plugin),volumeLargeSvg='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',volumeSmallSvg='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',volumeMutedSvg='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',Util$c=Plugin.Util,Events$d=Plugin.Events,POSITIONS$8=Plugin.POSITIONS,Volume=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',class:"xg-volume-small"},volumeLarge:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',class:"xg-volume"},volumeMuted:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -8 28 40">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){if(!this.config.disable){this.initIcons();var e=this.playerConfig.commonStyle;e.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=e.volumeColor),this.changeMuted=this.changeMuted.bind(this),this.onBarMousedown=this.onBarMousedown.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this),this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-bar","mousedown",this.onBarMousedown),this.bind(".xgplayer-icon",["click","touchend"],this.changeMuted),this.on(Events$d.VOLUME_CHANGE,this.onVolumeChange.bind(this)),this.player.volume=this.config.default}}},{key:"onBarMousedown",value:function(e){var t=this,n=this.player,i=this.find(".xgplayer-drag"),o=this.find(".xgplayer-slider"),r=this.find(".xgplayer-bar");o.focus(),Util$c.event(e);var s=r.getBoundingClientRect(),a={x:e.clientX,y:e.clientY},l=i.getBoundingClientRect().height;this.isMoveing=!1;var u=function(e){e.preventDefault(),e.stopPropagation(),Util$c.event(e),t.isMoveing=!0;var o=l-e.clientY+a.y;if(!(o>s.height)){var r=o/s.height;i.style.height=o+"px",n.volume=Math.max(Math.min(r,1),0),n.muted=!1}},c=function e(o){if(o.preventDefault(),o.stopPropagation(),Util$c.event(o),window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",u),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),!t.isMoveing){var r=s.height-(o.clientY-s.top),a=r/s.height;i.style.height=r+"px",n.volume=Math.max(Math.min(a,1),0),n.muted=!1}t.isMoveing=!1};return window.addEventListener("mousemove",u),window.addEventListener("touchmove",u),window.addEventListener("mouseup",c),window.addEventListener("touchend",c),!1}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$c.addClass(this.root,"slide-show")}},{key:"onMouseleave",value:function(e){e.preventDefault(),e.stopPropagation(),Util$c.removeClass(this.root,"slide-show")}},{key:"changeMuted",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;t.muted=!t.muted}},{key:"onVolumeChange",value:function(){var e=this.player,t=e.muted,n=e.volume;this.isMoveing||(this.find(".xgplayer-drag").style.height=t||0===n?"0px":100*n+"%"),this.animate(t,n)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-bar","mousedown",this.onBarMousedown),this.unbind(".xgplayer-icon",["click","touchend"],this.changeMuted)}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: '+100*(this.config.default||this.player.volume)+'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$8.CONTROLS_RIGTH,index:1,disable:!1,default:.6}}}]),t}(Plugin),RotateSvg='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',POSITIONS$9=Plugin.POSITIONS,Rotate=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rotateDeg=n.config.rotateDeg||0,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$9.CONTROLS_RIGTH,index:6,innerRotate:!1,clockwise:!1,rotateDeg:0,disable:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.rotate&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(){var e=this.player;this.rotateDeg||(this.rotateDeg=0);var t=e.root.offsetWidth,n=e.root.offsetHeight,i=e.video.videoWidth,o=e.video.videoHeight;this.config.innerRotate;var r=void 0;.25===this.rotateDeg||.75===this.rotateDeg?(r=this.config.innerRotate?i/o>n/t?n/(o/i>n/t?n*i/o:t):t/(o/i>n/t?n:t*o/i):t>=n?t/n:n/t,r=parseFloat(r.toFixed(5))):r=1,this.config.innerRotate?(e.video.style.transformOrigin="center center",e.video.style.transform="rotate("+this.rotateDeg+"turn) scale("+r+")",e.video.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale("+r+")"):(e.root.style.transformOrigin="center center",e.root.style.transform="rotate("+this.rotateDeg+"turn) scale(1)",e.root.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.player;this.rotateDeg||(this.rotateDeg=0);var i=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*i*t)%1,this.updateRotateDeg(),n.emit("rotate",360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{rotate:{jp:"日文text",en:"rotate",zh:"旋转屏幕"}}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="rotate">\n      '+this.langText.rotate+"\n      </div>\n    </xg-icon>"}}]),t}(Plugin),Events$e=Plugin.Events,POSITIONS$a=Plugin.POSITIONS,PIP=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.btnClick=function(t){e.switchPIP(t)},this.once(Events$e.COMPLETE,function(){e.config.showIcon&&e.isPIPAvailable()&&(e.show(),e.bind("click",e.btnClick)),e.initPipEvents()})}},{key:"registerLangauageTexts",value:function(){return{pipicon:{jp:"picture-in-picture",en:"picture-in-picture",zh:"画中画"}}}},{key:"initPipEvents",value:function(){var e=this.player;this.leavePIPCallback=function(){var t=e.paused;setTimeout(function(){!t&&e.play()},0),e.emit("pip_change",!1)},this.enterPIPCallback=function(){e.emit("pip_change",!0)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback))}},{key:"switchPIP",value:function(){var e=this.player,t=this.playerConfig;if(!this.isPIPAvailable())return!1;try{if(document.pictureInPictureElement&&document.pictureInPictureElement===e.video)document.exitPictureInPicture();else{if(!e.video)return;t.poster&&(e.video.poster=t.poster),e.video.requestPictureInPicture()}return!0}catch(e){return console.error("switchPIP",e),!1}}},{key:"isPIPAvailable",value:function(){var e=this.player;return document.pictureInPictureEnabled||!(e.video&&e.video.disablePictureInPicture)}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon||!this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon btn-definition">\n      <span lany-key="pipicon">'+this.langText.pipicon+'</span>\n      </div>\n      <div class="xg-tips" lany-key="pipicon">'+this.langText.pipicon+"</div>\n    </xg-icon>"}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement===e.video}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGTH,index:6,showIcon:!1}}}]),t}(Plugin),Next='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',POSITIONS$b=Plugin.POSITIONS,Sniffer$3=Plugin.Sniffer,PlayNextIcon=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.idx=-1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$b.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),createClass(t,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{playNext:{jp:"次をプレイ",en:"playNext",zh:"播放"}}}},{key:"initEvents",value:function(){this.playNext=this.playNext.bind(this);var e="mobile"===Sniffer$3.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"playNext",value:function(){var e=this.player;this.idx+1<this.config.urlList.length?(this.idx++,e.video.pause(),e.currentTime=0,e.video.autoplay=!0,e.src=this.config.urlList[this.idx],e.emit("playerNext",this.idx+1)):e.emit("urlList last")}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="playNext">'+this.langText.playNext+"</div>\n     </xg-icon>\n    "}}]),t}(Plugin),download=createCommonjsModule(function(e,t){e.exports=function e(t,n,i){function o(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),o=i.length,r=0,s=new Uint8Array(o);r<o;++r)s[r]=i.charCodeAt(r);return new p([s],{type:n})}function r(e,t){if("download"in f)return f.href=e,f.setAttribute("download",y),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout(function(){l.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}var s,a,l=window,u="application/octet-stream",c=i||u,h=t,d=!n&&!i&&h,f=document.createElement("a"),g=function(e){return String(e)},p=l.Blob||l.MozBlob||l.WebKitBlob||g,y=n||"download";if(p=p.call?p.bind(l):Blob,"true"===String(this)&&(c=(h=[h,c])[0],h=h[1]),d&&d.length<2048&&(y=d.split("/").pop().split("?")[0],f.href=d,-1!==f.href.indexOf(d))){var v=new XMLHttpRequest;return v.open("GET",d,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,y,u)},setTimeout(function(){v.send()},0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h)){if(!(h.length>2096103.424&&p!==g))return navigator.msSaveBlob?navigator.msSaveBlob(o(h),y):r(h);c=(h=o(h)).type||u}else if(/([\x80-\xff])/.test(h)){for(var m=0,b=new Uint8Array(h.length),C=b.length;m<C;++m)b[m]=h.charCodeAt(m);h=new p([b],{type:c})}if(s=h instanceof p?h:new p([h],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(s,y);if(l.URL)r(l.URL.createObjectURL(s),!0);else{if("string"==typeof s||s.constructor===g)try{return r("data:"+c+";base64,"+l.btoa(s))}catch(e){return r("data:"+c+","+encodeURIComponent(s))}(a=new FileReader).onload=function(e){r(this.result)},a.readAsDataURL(s)}return!0}}),DownloadSvg='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',POSITIONS$c=Plugin.POSITIONS,Download=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timer=null,n.isLock=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"downloadIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$c.CONTROLS_RIGTH,index:3,disable:!0}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.download&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.download=this.download.bind(this),this.bind(["click","touchend"],this.download))}},{key:"registerLangauageTexts",value:function(){return{download:{jp:"フルスクリーン",en:"download",zh:"下载"}}}},{key:"registerIcons",value:function(){return{download:'<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n'}}},{key:"download",value:function(){var e=this;if(this.isLock){var t=this.getAbsoluteURL(this.player.src);download(t),this.isLock=!0,this.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="download">'+this.langText.download+"</div>\n    </xg-icon>"}}]),t}(Plugin),POSITIONS$d=Plugin.POSITIONS,ScreenShot=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild("xgplayer-icon",this.icons.screenshotIcon)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(){var e=document.createElement("canvas");this.canvasCtx=e.getContext("2d"),this.canvas=e,e.width=this.config.width||600,e.height=this.config.height||337.5}},{key:"onClickBtn",value:function(e){e.preventDefault(),e.stopPropagation(),this.canvas||this.createCanvans();var t=new window.Image;this.canvasCtx.drawImage(this.player.video,0,0,this.canvas.width,this.canvas.height);var n=this.config.quality,i=this.config.type,o=this.config.format;t.setAttribute("crossOrigin","anonymous"),t.src=this.canvas.toDataURL(i,n).replace(i,"image/octet-stream");var r=t.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");this.emit("screenShot",r),this.saveScreenShot(r,"截图"+o),t.onload=function(){t=null}}},{key:"registerLangauageTexts",value:function(){return{screenshot:{jp:"スクリーンショット",en:"screenshot",zh:"截图"}}}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn)}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'+(this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text")+'">\n      '+(this.icons.screenshotIcon?"":'<span lang-key="screenshot">'+this.langText.screenshot+"</span>")+" \n      </div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$d.CONTROLS_RIGTH,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,disable:!1}}}]),t}(Plugin),Util$d=Plugin.Util,Sniffer$4=Plugin.Sniffer,OptionList=function(){function e(t){classCallCheck(this,e),this.config=t.config,this.root=Util$d.createDom("ul","",{},"xg-options-list "+this.config.className),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===Sniffer$4.device?"touchend":"click";Plugin.delegate.call(this,"li",n,this.onItemClick)}return createClass(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map(function(e){i.style[e]=n[e]}),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map(function(e,n){var i=e.isCurrent?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(Util$d.createDom("li","<span>"+e.showText+"</span>",e,i))})}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&Util$d.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Util$d.addClass(t,"selected"),i&&Util$d.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map(function(t){n[t]=e.getAttribute(t)});var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Util$d.removeClass(this.root,"hide"),Util$d.addClass(this.root,"active")}},{key:"hide",value:function(){Util$d.removeClass(this.root,"active"),Util$d.addClass(this.root,"hide")}},{key:"destroy",value:function(){Plugin.removeDelegate.call(this,"li",["touchend","click"],this.onItemClick),this.root.innerHTML=null,this.root=null}}]),e}(),Events$f=Plugin.Events,Util$e=Plugin.Util,Sniffer$5=Plugin.Sniffer,POSITIONS$e=Plugin.POSITIONS,IS_MOBILE="mobile"===Sniffer$5.device,OptionsIcon=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isActive=!1,n.curValue=null,n.curIndex=0,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$e.CONTROLS_RIGTH,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.config;IS_MOBILE&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&Util$e.addClass(this.root,"portrait"),this.once(Events$f.CANPLAY,function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())}),IS_MOBILE&&this.on(Events$f.PLAYER_FOCUS,function(){e.isActive&&(e.optionsPlugin&&e.optionsPlugin.hide(),e.isActive=!1)}),this.activeEvent=IS_MOBILE?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&Util$e.addClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;!n&&(n=this.player.lang),t=!t||Util$e.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]);try{return"object"===_typeof(e[t])?e[t][n]||e[t].zh:e[t]}catch(e){return console.warn(e),""}}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsPlugin&&this.optionsPlugin.show()):("rightSide"===n?t.focus():t.unFocus(),this.optionsPlugin&&this.optionsPlugin.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,o=n.list;(IS_MOBILE||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=o[this.curIndex],this.changeCurrentText()}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,o=this.optionsPlugin,r=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),o)return o.renderItemList(e),void this.changeCurrentText();var s={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?r.root:this.root};this.optionsPlugin=new OptionList(s),this.changeCurrentText(),this.show()}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsPlugin&&this.optionsPlugin.destroy()}},{key:"render",value:function(){return'<xg-icon class="xg-options-icon '+(this.config.className||"")+'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>'}},{key:"lang",set:function(e){set(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lang",e,this),this.renderItemList(this.config.list,this.curIndex)}}]),t}(Plugin),Events$g=OptionsIcon.Events,POSITIONS$f=OptionsIcon.POSITIONS,Util$f=OptionsIcon.Util,DefinitionIcon=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curTime=0,n.isPaused=!0,n}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map(function(e){return!e.text&&e.name&&(e.text=e.name),e}))}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$f.CONTROLS_RIGTH,index:3,list:[],disable:!1,hidePortrait:!1,className:"xgplayer-definition"}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this;get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(t){e.changeDefinitionList(t)})}},{key:"renderItemList",value:function(){var e=this,n=this.player,i=this.config.list,o=n.currentSrc||n.src,r=0,s=i.map(function(t,n){var i={url:t.url,definition:t.definition||"",showText:e.getTextByLang(t)};return(t.url===o||!Util$f.isUndefined(t.definition)&&t.definition===e.config.defaultDefinition)&&(i.isCurrent=!0,r=n),i});get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItemList",this).call(this,s,r)}},{key:"onCanplayChangeDefinition",value:function(){var e=this.player;if(e.currentTime=this.curTime,this.isPaused)e.pause();else{var t=e.play();void 0!==t&&t&&t.catch(function(e){})}e.emit(Events$g.AFTER_DEFINITION_CHANGE)}},{key:"switchUrl",value:function(e){var t=this.player,n=document.createElement("a");["mp4","hls","__flv__","dash"].every(function(e){return!t[e]||(t[e].url&&(n.href=t[e].url),"__flv__"===e&&(t[e]._options?n.href=t[e]._options.url:n.href=t[e]._mediaDataSource.url),!1)}),e&&n.href!==e.href&&!t.ended&&t.switchURL(e.href)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(e){return!e.text&&e.name&&(e.text=e.name),e}),this.renderItemList(),this.show())}},{key:"changeDefinition",value:function(e){var t=this,n=this.player;n.switchURL?this.switchUrl(e):e.url!==n.currentSrc&&(this.curTime=n.currentTime,this.isPaused=n.paused,n.ended||(n.video.src=e.url,this.once("canplay",function(){t.onCanplayChangeDefinition()})))}},{key:"onItemClick",value:function(e,n){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onItemClick",this).apply(this,arguments);var i=this.player,o=e.delegateTarget.getAttribute("url");i.emit(Events$g.BEFORE_DEFINITION_CHANGE,o),this.changeDefinition(n.to),i.emit(Events$g.DEFINITION_CHANGE,{from:n.from,to:n.to})}}]),t}(OptionsIcon),POSITIONS$g=Plugin.POSITIONS,PlaybackRate=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curRate=1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$g.CONTROLS_RIGTH,index:4,list:[.5,.75,{rate:1,iconText:"倍速"},1.5,2],className:"xgplayer-playbackrate",hidePortrait:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map(function(e){return"number"==typeof e?e={rate:e,text:e+"x"}:!e.text&&e.rate&&(e.text=e.rate+"x"),e}))}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,n){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget.getAttribute("rate");if(Number(i)===this.curValue)return!1;this.player.playbackRate=Number(i)}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onMouseenter),this.unbind("mouseleave",this.onMouseenter)}},{key:"renderItemList",value:function(){var e=this,n=this.player.playbackRate||1;this.curValue=n;var i=0,o=this.config.list.map(function(t,o){var r={rate:t.rate};return r.rate===n&&(r.isCurrent=!0,i=o),r.showText=e.getTextByLang(t),r});get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItemList",this).call(this,o,i)}}]),t}(OptionsIcon),CssFullSceenSvg='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="translate(0, 2) scale(1.3, 1.3)">\n  <path class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',ExitCssFullSceenSvg='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="translate(0, 2) scale(1.3, 1.3)">\n  <path d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',Events$h=Plugin.Events,POSITIONS$h=Plugin.POSITIONS,CssFullScreen=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.initIcons(),this.on(Events$h.CSS_FULLSCREEN_CHANGE,function(t){e.animate(t)}),this.on(Events$h.FULLSCREEN_CHANGE,function(t){!t&&e.animate(t)}),this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.isCssfullScreen?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"))}},{key:"switchTips",value:function(){this.changeLangTextKey(this.find(".xg-tips"),this.isCssfullScreen?"exitCssFullscreen":"cssFullscreen")}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="translate(0, 2) scale(1.3, 1.3)">\n  <path class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',class:"xg-get-cssfull"},exitCssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="translate(0, 2) scale(1.3, 1.3)">\n  <path d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',class:"xg-exit-cssfull"}}}},{key:"registerLangauageTexts",value:function(){return{cssFullscreen:{jp:"シアターモード",en:"Cssfullscreen",zh:"进入样式全屏"},exitCssFullscreen:{jp:"シアターモードを終了",en:"Exit cssfullscreen",zh:"退出样式全屏"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="cssFullscreen">'+(this.isCssfullScreen?this.langText.exitCssFullscreen:this.langText.cssFullscreen)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$h.CONTROLS_RIGTH,index:1,disable:!1}}}]),t}(Plugin),BasePlugin$1=function(){function e(t){classCallCheck(this,e),util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),this.__args=t,this.__events={},this.config=t.config||{},this.__init(t)}return createClass(e,null,[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}}]),createClass(e,[{key:"onPluginsReady",value:function(){}},{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{player:{get:function(){return t.player}},playerConfig:{get:function(){return t.player&&t.player.config}},pluginName:{get:function(){return t.pluginName?t.pluginName:n.constructor.pluginName}},logger:{get:function(){return t.player.logger}}})}},{key:"on",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(i){delete n.__events[e],n.player.off(i,t)})}},{key:"offAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=Object.keys(this.__events)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;this.__events[r]&&this.off(r,this.__events[r])}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"emit",value:function(e,t){this.player.emit(e,t)}},{key:"__destroy",value:function(){this.offAll(),util.checkIsFunction(this.destroy)&&this.destroy()}}]),e}();BasePlugin$1.Util=util,BasePlugin$1.Sniffer=sniffer,BasePlugin$1.Errors=Errors,BasePlugin$1.Events=Events;var pluginsManager$1={init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),this.pluginGroup||(this.pluginGroup={}),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{}}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then(function(t){var i=void 0;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},i)})])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var o=this.pluginGroup[i]._plugins,r=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported())return void console.warn("not supported plugin ["+s+"]");n.config||(n.config={}),t.defaultConfig&&Object.keys(t.defaultConfig).map(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])});var a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(r)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var d=c.value;if(s.toLowerCase()===d.toLowerCase()){n.config=Object.assign({},n.config,r[d]);break}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{o[s.toLowerCase()]&&(o[s.toLowerCase()].__destroy&&o[s.toLowerCase()].__destroy(),o[s.toLowerCase()]=null,console.warn("the is one plugin with same pluginName ["+s+"] exist, destroy the old instance"));var f=new t(n);return o[s.toLowerCase()]=f,o[s.toLowerCase()].func=t,f&&"function"==typeof f.afterCreate&&f.afterCreate(),f}catch(e){throw console.error(e),e}}},unRegister:function(e,t){try{this.pluginGroup[e]._plugins[t].__destroy(),this.pluginGroup[e]._plugins[t]=null}catch(n){this.pluginGroup[e]._plugins[t]=null}},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){if(!this.pluginGroup)return null;var n=e._pluginInfoId,i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){function t(e){return e&&e.then?e:new Promise(function(e){e()})}var n=this;return new Promise(function(i){if(n.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then(function(){var o=e._pluginInfoId,r=n.pluginGroup[o]._plugins,s=[],a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(r)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var d=c.value;if(r[d]&&r[d].beforePlayerInit)try{var f=r[d].beforePlayerInit();s.push(t(f))}catch(e){throw s.push(t(null)),e}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}Promise.all([].concat(s)).then(function(){i()}).catch(function(e){console.error(e),i()})})})},afterInit:function(e){if(this.pluginGroup){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n[l]&&n[l].afterPlayerInit&&n[l].afterPlayerInit()}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}},setLang:function(e,t){if(this.pluginGroup){var n=t._pluginInfoId,i=this.pluginGroup[n]._plugins,o=!0,r=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(o=(a=l.next()).done);o=!0)i[a.value].lang=e}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}}},reRender:function(e){var t=e._pluginInfoId,n={},i=this.pluginGroup[t]._plugins,o=!0,r=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;n[u]={plugin:i[u].func,options:i[u]._args},this.unRegister(t,u)}}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}var c=!0,h=!1,d=void 0;try{for(var f,g=Object.keys(n)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var p=f.value;this.register(t,p,n[p].plugin,n[p].options)}}catch(e){h=!0,d=e}finally{try{!c&&g.return&&g.return()}finally{if(h)throw d}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map(function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()})},destroy:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.unRegister(t,l)}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}delete this.pluginGroup[t]}},Plugin$1=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return inherits(t,e),createClass(t,null,[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,o=Number(n),r=e instanceof window.Node;if(i){for(var s=0,a=null,l="";s<i;s++){a=t.children[s];var u=Number(a.getAttribute("data-index"));if(u>=o){l="beforebegin";break}u<o&&(l="afterend")}return r?"afterend"===l?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(l,e),"afterend"===l?t.children[t.children.length-1]:t.children[s]}return r?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"delegate",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.bindEL(e,t)}):this.bindEL(e,t);else if(3===arguments.length&&"function"==typeof n){if(!this.root)return;Array.isArray(t)?t.forEach(function(t){bind$1(i.root,e,t,n,!1)}):bind$1(this.root,e,t,n,!1)}}},{key:"removeDelegate",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t):"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){unbind$1(i.root,e,t,n)}):unbind$1(this.root,e,t,n))}},{key:"defaultConfig",get:function(){return{}}}]),createClass(t,[{key:"__init",value:function(e){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__init",this).call(this,e);var n=e.root,i=null;this.icons={},registerIconsObj$1(this.registerIcons()||{},this),this.langText={},registerTextObj$1(this.registerLangauageTexts()||{},this);var o="";try{o=this.render()}catch(e){throw new Error("Plugin:"+this.pluginName+":render:"+e.message)}if(o)i=t.insert(o,n,e.index);else{if(!e.tag)return;i=util.createDom(e.tag,"",e.attr,e.name),n.appendChild(i)}t.defineGetterOrSetter(this,{root:{get:function(){return i}},parent:{get:function(){return n}}});var r=this.config.attr||{},s=this.config.style||{};this.setAttr(r),this.setStyle(s),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registeChildren()}},{key:"__registeChildren",value:function(){if(this.root){var e=this.children();if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&(this._children||(this._children=[]),Object.keys(e).length>0)){var t=!0,n=!1,i=void 0;try{for(var o,r=Object.keys(e)[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,a=e[s],l={root:this.root},u=void 0,c=void 0;"function"==typeof a?(u=this.config[s]||{},c=a):"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof a.plugin&&(u=a.options?BasePlugin$1.Util.deepCopy(this.config[s]||{},a.options):this.config[s]||{},c=a.plugin),l.config=u,void 0!==u.index&&(l.index=u.index),u.root&&(l.root=u.root);var h=this.registerPlugin(c,l,s);this._children.push(h)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}}},{key:"changeLangTextKey",value:function(e,t){e.getAttribute&&e.setAttribute("lang-key",t),e.innerHTML=this.langText[t]}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root,n&&(t.pluginName=n);var i=pluginsManager$1.register(this.player,e,t);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLangauageTexts",value:function(){return{}}},{key:"getPlugin",value:function(e){return pluginsManager$1.findPlugin(this.player,e)}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,n,i){var o;(o=t.delegate).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"unbind",value:function(e,n,i){var o;(o=t.removeDelegate).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setStyle",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.style[e]=t;if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.style[l]=n[l]}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}}},{key:"setAttr",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.setAttribute(e,t);if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.setAttribute(l,n[l])}}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHtml=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return console.warn(e),null}}},{key:"render",value:function(){return""}},{key:"__destroy",value:function(){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__destroy",this).call(this),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root))}},{key:"lang",set:function(e){var t=this;e!==this.config.lang&&(this.config.lang=e,this.root&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(this.root,function(n){var i=n.getAttribute&&n.getAttribute("lang-key");if(i&&t.langText[i]){var o=t.langText[i];n.innerHTML="function"==typeof o?o(e):o}}))},get:function(){return this.config.lang||this.playerConfig.lang||"zh"}}]),t}(BasePlugin$1);Plugin$1.ROOT_TYPES={CONTROLS:"controls",ROOT:"root"},Plugin$1.POSITIONS={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};var ErrorPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.bind(".xgplayer-error-refresh","click",function(t){t.preventDefault(),e.player.replay(),Plugin$1.Util.removeClass(e.player.root,"replay")}),this.on(Player.Events.CANPLAY,this.handleCanPlay.bind(this)),this.on(Player.Events.ERROR,this.handleError.bind(this))}},{key:"handleCanPlay",value:function(){Plugin$1.Util.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=this.player,t=this.find(".xgplayer-error-text");e.error?t.innerHTML=e.error:e.config.lang&&"zh-cn"===e.config.lang?t.innerHTML=e.lang.ERROR:this.root.innerHTML=(e.lang.ERROR||"play error")+'，please try to <span class="xgplayer-error-refresh">refresh</span>'}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <em class="xgplayer-error-text"></em>请<span class="xgplayer-error-refresh">刷新</span>试试\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),t}(Plugin$1),DefaultPreset=function e(){var t,n;classCallCheck(this,e);var i=[Progress,Play,Fullscreen,Time,Rotate,PlayNextIcon,DefinitionIcon,PlaybackRate,Download,ScreenShot,Volume],o=[{plugin:PIP,options:{index:0,position:PIP.POSITIONS.ROOT_TOP}}],r=[Replay,Poster,Start,Loading,Enter,ErrorPlugin];switch(this.plugins=[].concat(i,r),sniffer.device){case"pc":(t=this.plugins).push.apply(t,[Keyboard,PCPlugin,CssFullScreen].concat(o,[MiniScreen]));break;case"mobile":this.plugins.push(MobilePlugin);break;default:(n=this.plugins).push.apply(n,[Keyboard,PCPlugin])}this.ignores=[]};return Player.defaultPreset=DefaultPreset,Player}()}}]);
//# sourceMappingURL=other-vender-e2e407c5.693b7413c7e579e81869.js.map